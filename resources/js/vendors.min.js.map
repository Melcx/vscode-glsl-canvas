{"version":3,"sources":["node_modules/stats.js/build/stats.min.js","node_modules/dat.gui/build/dat.gui.min.js","node_modules/glsl-canvas-js/dist/umd/src/glsl.ts","../../src/context/chunks.ts","../../node_modules/promise-polyfill/src/index.js","../../node_modules/promise-polyfill/src/finally.js","../../node_modules/promise-polyfill/src/allSettled.js","../../src/logger/logger.ts","../../src/core/common.ts","../../src/context/context.ts","../../src/buffers/buffers.ts","../../src/core/iterable.ts","../../src/geometry/geometry.ts","../../src/geometry/flat-geometry.ts","../../src/math/vector2.ts","../../src/math/vector3.ts","../../src/camera/orbit-camera.ts","../../node_modules/gl-matrix/esm/common.js","../../node_modules/gl-matrix/esm/mat4.js","../../src/textures/textures.ts","../../src/canvas/canvas-timer.ts","../../src/core/subscriber.ts","../../src/geometry/box-geometry.ts","../../src/geometry/sphere-geometry.ts","../../src/geometry/torus-geometry.ts","../../src/loaders/obj-loader.ts","../../src/uniforms/uniforms.ts","../../src/renderer/renderer.ts","../../src/canvas/canvas.ts","../../src/glsl.ts"],"names":["f","e","exports","module","define","amd","Stats","this","a","c","appendChild","dom","u","d","children","length","style","display","l","document","createElement","cssText","addEventListener","preventDefault","k","performance","Date","now","g","r","Panel","h","self","memory","t","REVISION","addPanel","showPanel","begin","end","update","usedJSHeapSize","jsHeapSizeLimit","domElement","setMode","Infinity","Math","round","window","devicePixelRatio","v","m","n","p","q","width","height","b","getContext","font","textBaseline","fillStyle","fillRect","fillText","globalAlpha","w","min","max","drawImage","dat","__state","conversionName","toString","o","i","s","toFixed","hex","Object","defineProperty","get","space","I","recalculateRGB","set","recalculateHSV","S","isUndefined","match","U","isNull","parseFloat","indexOf","background","each","ee","__ul","insertBefore","onResize","X","unbind","__resizeHandler","saveToLocalStorageIfPossible","_","__preset_select","selectedIndex","innerHTML","value","getRoot","__rememberedObjects","object","__rememberedObjectIndecesToControllers","property","load","remembered","preset","se","initialValue","setValue","Error","color","$","concat","factoryArgs","ne","apply","before","z","__li","addClass","he","CLASS_CONTROLLER_ROW","H","getValue","__gui","extend","options","arguments","nextElementSibling","remove","toArray","isArray","isObject","name","firstElementChild","listen","Q","__min","__max","step","__step","Array","prototype","slice","call","isNumber","__listening","compose","K","bind","fakeEvent","__checkbox","stopPropagation","Z","__button","removeClass","updateDisplay","borderLeftColor","__color","isModified","__controllers","push","location","href","useLocalStorage","__save_row","firstChild","ae","getElementById","localStorage","getItem","setAttribute","metaKey","which","keyCode","le","hide","JSON","stringify","getSaveObject","show","focus","select","save","prompt","saveAs","revert","autoPlace","__closeButton","x","C","oe","A","forEach","BREAK","keys","defaults","defer","setTimeout","debounce","clearTimeout","isNaN","constructor","isString","isBoolean","isFunction","Function","O","litmus","conversions","THREE_CHAR_HEX","read","parseInt","write","SIX_CHAR_HEX","CSS_RGB","CSS_RGBA","HEX","RGB_ARRAY","RGBA_ARRAY","RGBA_OBJ","RGB_OBJ","HSVA_OBJ","HSV_OBJ","T","L","R","conversion","B","N","hsv_to_rgb","floor","rgb_to_hsv","NaN","rgb_to_hex","hex_with_component","component_from_hex","Symbol","iterator","F","TypeError","P","enumerable","configurable","writable","key","D","getOwnPropertyDescriptor","getPrototypeOf","j","create","setPrototypeOf","__proto__","V","ReferenceError","COMPONENTS","__onChange","__onFinishChange","G","HTMLEvents","MouseEvents","KeyboardEvents","makeSelectable","onselectstart","MozUserSelect","KhtmlUserSelect","unselectable","makeFullscreen","position","left","right","top","bottom","createEvent","clientX","y","clientY","initMouseEvent","bubbles","cancelable","clickCount","initKeyboardEvent","initKeyEvent","ctrlKey","altKey","shiftKey","charCode","initEvent","dispatchEvent","attachEvent","removeEventListener","detachEvent","className","split","join","replace","removeAttribute","splice","hasClass","RegExp","test","getWidth","getComputedStyle","getHeight","getOffset","offsetParent","offsetLeft","offsetTop","isActive","activeElement","type","__prev","checked","Y","__select","J","__input","blur","W","__impliedStep","pow","log","abs","LN10","__precision","__truncationSuspended","__background","getBoundingClientRect","touches","__foreground","fire","toOriginal","__saturation_field","__hue_field","__temp","__selector","__field_knob","__field_knob_border","__hue_knob","__input_textShadow","padding","backgroundColor","boxShadow","border","borderRadius","zIndex","borderRight","marginRight","cursor","outline","textAlign","fontWeight","textShadow","marginLeft","marginTop","toHexString","te","getElementsByTagName","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","ie","backgroundElement","opacity","WebkitTransition","transition","body","webkitTransform","layout","innerWidth","innerHeight","head","de","ce","ue","_e","__folders","closeOnTop","DEFAULT_WIDTH","resizable","hideable","parent","scrollable","defineProperties","E","closed","CLASS_CLOSED","TEXT_OPEN","TEXT_CLOSED","setItem","CLASS_MAIN","parse","CLASS_CLOSE_BUTTON","CLASS_CLOSE_TOP","childNodes","CLASS_CLOSE_BOTTOM","createTextNode","CLASS_AUTO_PLACE_CONTAINER","CLASS_AUTO_PLACE","onResizeDebounced","CLASS_DRAG","__resize_handle","toggleHide","CLASS_TOO_TALL","_keydownHandler","add","addColor","removeChild","destroy","removeFolder","addFolder","folders","parentElement","open","close","offsetHeight","remember","pe","Color","math","interpret","fe","Controller","BooleanController","OptionController","StringController","NumberController","NumberControllerBox","NumberControllerSlider","FunctionController","ColorController","me","ge","GUI","be","ve","controllers","gui","default","globalThis","glsl","_defineProperties","target","props","descriptor","_inheritsLoose","subClass","superClass","_setPrototypeOf","_assertThisInitialized","DefaultWebGLVertexAttributes_","DefaultWebGLFragmentAttributes_","DefaultWebGL2VertexAttributes_","DefaultWebGL2FragmentAttributes_","DefaultWebGLUniform_","DefaultWebGLFlatVertex_","DefaultWebGLMeshVertex_","DefaultWebGLMeshVertex","DefaultWebGL2MeshVertex","DefaultWebGLFlatFragment","DefaultWebGL2FlatFragment","DefaultWebGLMeshFragment","DefaultWebGL2MeshFragment","DefaultWebGLBufferVertex","DefaultWebGL2BufferVertex","DefaultWebGLBufferFragment","DefaultWebGL2BufferFragment","setTimeoutFunc","Boolean","noop","Promise","fn","_state","_handled","_value","_deferreds","doResolve","handle","deferred","_immediateFn","cb","onFulfilled","onRejected","ret","reject","promise","resolve","newValue","then","finale","thisArg","_unhandledRejectionFn","len","Handler","done","reason","ex","catch","prom","finally","callback","all","arr","args","remaining","res","val","allSettled","status","race","setImmediate","err","console","warn","LoggerLevel","Common","fetch","url","xhr","XMLHttpRequest","onload","response","responseText","onerror","error","ontimeout","onabort","send","getResource","filepath","workpath","comps","_len","pop","dirname","path","ContextVersion","ContextPrecision","ContextMode","Logger","_console","enabled","level","Log","_console2","Warn","_console3","ContextError","ContextDefault","webgl","flat","vertex","fragment","mesh","webgl2","ContextVertexBuffers","Context","getContext_","canvas","names","context","getContext2_","getFragmentVertex","gl","fragmentString","vertexString","isWebGl2","exec","getIncludes","input","regex","promises","_loop","index","filePath","nextWorkpath","chunks","isWebGl","WebGLRenderingContext","WebGL2RenderingContext","inferVersion","source","WebGl2","WebGl","inferPrecision","precision","versionDiffers","currentVersion","getBufferVertex","getVertex","mode","Flat","version","getFragment","tryInferContext","attributes","extensions","errorCallback","handleError","errorCode","html","container","parentNode","BrowserSupport","inferContext","supportedExtensions","getSupportedExtensions","getExtension","Other","tryGetContext","createShader","offset","shader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","lastError","getShaderInfoLog","deleteShader","createProgram","shaders","locations","program","attachShader","bindAttribLocation","linkProgram","validateProgram","getProgramParameter","LINK_STATUS","useProgram","getProgramInfoLog","deleteProgram","createVertexBuffers","vertexBuffers","texcoordIndex","getAttribLocation","texcoord","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","enableVertexAttribArray","vertexAttribPointer","FLOAT","positionIndex","MediumP","BufferFloatType","StringMap","IterableStringMap","values","_proto","has","item","callbackfn","_this","reduce","_this2","previous","Geometry","assign","positions","size","createData_","createAttributes_","createBufferData_","array","buffer","createAttribLocation_","positionBuffer","positionLocation","texcoords","texcoordBuffer","texcoordLocation","normals","normalBuffer","normalLocation","colors","colorBuffer","colorLocation","attachAttributes_","attribLocation","bindAttributes_","fromIndices","indices","FlatGeometry","_Geometry","Buffer","BW","BH","createFramebuffer","texture","getTexture","texParameteri","TEXTURE_2D","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","getFloatType","getHalfFloatType","extension","HALF_FLOAT","HALF_FLOAT_OES","getInternalFormat","RGBA16F","RGBA","getType","internalFormat","format","createTexture","activeTexture","TEXTURE0","bindTexture","texImage2D","checkFramebufferStatus","FRAMEBUFFER","FRAMEBUFFER_COMPLETE","resize","bindFramebuffer","pixels","minW","minH","readPixels","newIndex","newTexture","texSubImage2D","newBuffer","deleteTexture","IOBuffer","isValid","geometry","_proto2","vertexShader","VERTEX_SHADER","fragmentShader","FRAGMENT_SHADER","output","render","framebufferTexture2D","COLOR_ATTACHMENT0","clearColor","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","viewport","drawArrays","TRIANGLES","Buffers","_IterableStringMap","Constructor","protoProps","getBuffers","buffers","count","matches","regexp","bufferFragmentString","drawingBufferWidth","drawingBufferHeight","Vector2","isVector2","copy","sqrt","normalize","divideScalar","scalar","multiplyScalar","subVectors","addVectors","Vector3","isVector3","crossVectors","ax","ay","az","bx","by","bz","RAD","PI","OrbitCamera","theta","phi","radius","_Vector","mouse","dirty","down","move","up","wheel","fromVector","vector","acos","atan","camera","spr","sin","cos","ARRAY_TYPE","out","glMatrix.ARRAY_TYPE","identity","rotate","rad","axis","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","b00","b01","b02","b10","b11","b12","b20","b21","b22","hypot","TextureSourceType","TextureFilteringType","CanvasTimer","delay","current","delta","paused","start","play","pause","next","Listener","event","Subscriber","listeners","Set","logListeners","subscribe","listener","unsubscribe","delete","unsubscribeAll","on","off","trigger","data","BoxGeometry","faceColors","SphereGeometry","ix","iy","phiLength","thetaLength","thetaEnd","grid","positionRow","uOffset","uvx","uvy","heightDivisions","TorusGeometry","tubularDivisions","normal","p1","p2","calculatePositionOnCurve","cx","cy","cu","su","quOverP","cs","COLORS","CI","ObjLoader","text","parseIndices","faceIndices","parseFaces","VN","VT","si","vl","fill","rgb","_this3","line","trim","map","boundingBox","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","dx","dy","dz","unrapUvw","pitch","asin","yaw","atan2","tx","ty","TextureImageExtensions","TextureVideoExtensions","TextureExtensions","isTextureData","UniformMethod","UniformType","Texture","_Subscriber","filtering","Linear","valid","animated","powerOf2","isPowerOf2","isSafari","navigator","userAgent","isTextureUrl","isTexture","urlElementOrData","getTextureOptions","getMaxTextureSize","getParameter","MAX_TEXTURE_SIZE","prev","curr","params","decodeURIComponent","querySelector","HTMLCanvasElement","HTMLImageElement","HTMLVideoElement","element","setData","Uint8Array","setUrl","setElement","sourceType","Url","ext","toLowerCase","isVideo","src","loop","muted","crossOrigin","originalElement","Element","video","setFiltering","message","Data","pixelStorei","UNPACK_FLIP_Y_WEBGL","UNPACK_PREMULTIPLY_ALPHA_WEBGL","naturalWidth","naturalHeight","UNSIGNED_BYTE","videoWidth","videoHeight","imageBuffer","tryUpdate","MipMap","wrapS","repeat","REPEAT","wrapT","LINEAR_MIPMAP_LINEAR","LINEAR","generateMipmap","Nearest","Textures","clean","_this4","createOrUpdate","_this5","textureOptions","flag","METHODS_INT","Uniform1i","Uniform2i","Uniform3i","Uniform4i","METHODS_FLOAT","Uniform1f","Uniform2f","Uniform3f","Uniform4f","METHODS_INTV","Uniform1iv","Uniform2iv","Uniform3iv","Uniform4iv","METHODS_FLOATV","Uniform1fv","Uniform2fv","Uniform3fv","Uniform4fv","Uniform","method","UniformMatrix2fv","UniformMatrix3fv","UniformMatrix4fv","getUniformLocation","UniformTexture","_Uniform","Uniforms","isArrayOfInteger","isInteger","isArrayOfNumber","isArrayOfBoolean","isArrayOfTexture","isArrayOfSampler2D","Sampler2D","getType_","Unknown","subject","Float","Bool","getMethod_","isVector","Int","parseUniform","uniform","isDifferent","Renderer","uniforms","textures","textureList","radians","cache","drawFunc_","drawArrays_","update_","timer","deltaTime","clearDepth","enable","DEPTH_TEST","depthFunc","LEQUAL","CULL_FACE","doubleSided","cullFace","FRONT","BLEND","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","BACK","create_","createGeometry_","createUniforms_","parseGeometry_","defaultMesh","hasDelta","hasTime","hasDate","hasMouse","hasCamera","updateUniformDelta_","updateUniformDelta__","updateUniformNoop_","updateUniformTime_","updateUniformTime__","date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","updateUniformDate_","updateUniformDate__","updateUniformMouse_","updateUniformMouse__","updateUniformCamera_","updateUniformCamera__","projectionMatrix","mat4","modelViewMatrix","normalMatrix","updateUniformMesh_","updateUniformMesh__","updateProjectionMatrix_","updateModelViewMatrix_","updateNormalMatrix_","updateUniformFlat__","fieldOfView","aspect","fovy","near","far","nf","tan","a30","a31","a32","a33","b03","b04","b05","b06","b07","b08","b09","det","Mesh","Box","Sphere","Torus","setMesh","Canvas","_Renderer","visible","controls","vertexPath","fragmentPath","rect","getShaders_","addListeners_","onLoop","items","urls","hasAttribute","getAttribute","onScroll","onWheel","onClick","onMove","onMouseDown","onMouseMove","onMouseOver","onMouseOut","onMouseUp","onTouchMove","onTouchEnd","onTouchStart","addCanvasListeners_","removeCanvasListeners_","removeListeners_","cancelAnimationFrame","rafId","deltaY","toggle","onDown","mx","my","onUp","touch","checkRender","setUniform_","loadTexture","isVisible_","documentElement","clientHeight","isAnimated_","isDirty_","sizeDidChanged_","CW","ceil","clientWidth","CH","parseTextures_","_this6","fragmentVertexString","createContext_","destroyContext_","swapCanvas_","onError","defaultFragment","classList","parseMode_","parseMesh_","createBuffers_","createTextures_","_this7","_this8","filter","setTexture","updateBuffers_","updateTextures_","_this9","_this10","_this11","canvas_","cloneNode","replaceChild","_this12","keyResolution","setUniform","setUniformOfInt","setUniforms","_this13","of","find","loadAll","getElementsByClassName"],"mappings":"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","file":"resources/js/vendors.min.js","sourcesContent":["// stats.js - http://github.com/mrdoob/stats.js\n(function(f,e){\"object\"===typeof exports&&\"undefined\"!==typeof module?module.exports=e():\"function\"===typeof define&&define.amd?define(e):f.Stats=e()})(this,function(){var f=function(){function e(a){c.appendChild(a.dom);return a}function u(a){for(var d=0;d<c.children.length;d++)c.children[d].style.display=d===a?\"block\":\"none\";l=a}var l=0,c=document.createElement(\"div\");c.style.cssText=\"position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000\";c.addEventListener(\"click\",function(a){a.preventDefault();\nu(++l%c.children.length)},!1);var k=(performance||Date).now(),g=k,a=0,r=e(new f.Panel(\"FPS\",\"#0ff\",\"#002\")),h=e(new f.Panel(\"MS\",\"#0f0\",\"#020\"));if(self.performance&&self.performance.memory)var t=e(new f.Panel(\"MB\",\"#f08\",\"#201\"));u(0);return{REVISION:16,dom:c,addPanel:e,showPanel:u,begin:function(){k=(performance||Date).now()},end:function(){a++;var c=(performance||Date).now();h.update(c-k,200);if(c>g+1E3&&(r.update(1E3*a/(c-g),100),g=c,a=0,t)){var d=performance.memory;t.update(d.usedJSHeapSize/\n1048576,d.jsHeapSizeLimit/1048576)}return c},update:function(){k=this.end()},domElement:c,setMode:u}};f.Panel=function(e,f,l){var c=Infinity,k=0,g=Math.round,a=g(window.devicePixelRatio||1),r=80*a,h=48*a,t=3*a,v=2*a,d=3*a,m=15*a,n=74*a,p=30*a,q=document.createElement(\"canvas\");q.width=r;q.height=h;q.style.cssText=\"width:80px;height:48px\";var b=q.getContext(\"2d\");b.font=\"bold \"+9*a+\"px Helvetica,Arial,sans-serif\";b.textBaseline=\"top\";b.fillStyle=l;b.fillRect(0,0,r,h);b.fillStyle=f;b.fillText(e,t,v);\nb.fillRect(d,m,n,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d,m,n,p);return{dom:q,update:function(h,w){c=Math.min(c,h);k=Math.max(k,h);b.fillStyle=l;b.globalAlpha=1;b.fillRect(0,0,r,m);b.fillStyle=f;b.fillText(g(h)+\" \"+e+\" (\"+g(c)+\"-\"+g(k)+\")\",t,v);b.drawImage(q,d+a,m,n-a,p,d,m,n-a,p);b.fillRect(d+n-a,m,a,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d+n-a,m,a,g((1-h/w)*p))}}};return f});\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?t(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],t):t(e.dat={})}(this,function(e){\"use strict\";function t(e,t){var n=e.__state.conversionName.toString(),o=Math.round(e.r),i=Math.round(e.g),r=Math.round(e.b),s=e.a,a=Math.round(e.h),l=e.s.toFixed(1),d=e.v.toFixed(1);if(t||\"THREE_CHAR_HEX\"===n||\"SIX_CHAR_HEX\"===n){for(var c=e.hex.toString(16);c.length<6;)c=\"0\"+c;return\"#\"+c}return\"CSS_RGB\"===n?\"rgb(\"+o+\",\"+i+\",\"+r+\")\":\"CSS_RGBA\"===n?\"rgba(\"+o+\",\"+i+\",\"+r+\",\"+s+\")\":\"HEX\"===n?\"0x\"+e.hex.toString(16):\"RGB_ARRAY\"===n?\"[\"+o+\",\"+i+\",\"+r+\"]\":\"RGBA_ARRAY\"===n?\"[\"+o+\",\"+i+\",\"+r+\",\"+s+\"]\":\"RGB_OBJ\"===n?\"{r:\"+o+\",g:\"+i+\",b:\"+r+\"}\":\"RGBA_OBJ\"===n?\"{r:\"+o+\",g:\"+i+\",b:\"+r+\",a:\"+s+\"}\":\"HSV_OBJ\"===n?\"{h:\"+a+\",s:\"+l+\",v:\"+d+\"}\":\"HSVA_OBJ\"===n?\"{h:\"+a+\",s:\"+l+\",v:\"+d+\",a:\"+s+\"}\":\"unknown format\"}function n(e,t,n){Object.defineProperty(e,t,{get:function(){return\"RGB\"===this.__state.space?this.__state[t]:(I.recalculateRGB(this,t,n),this.__state[t])},set:function(e){\"RGB\"!==this.__state.space&&(I.recalculateRGB(this,t,n),this.__state.space=\"RGB\"),this.__state[t]=e}})}function o(e,t){Object.defineProperty(e,t,{get:function(){return\"HSV\"===this.__state.space?this.__state[t]:(I.recalculateHSV(this),this.__state[t])},set:function(e){\"HSV\"!==this.__state.space&&(I.recalculateHSV(this),this.__state.space=\"HSV\"),this.__state[t]=e}})}function i(e){if(\"0\"===e||S.isUndefined(e))return 0;var t=e.match(U);return S.isNull(t)?0:parseFloat(t[1])}function r(e){var t=e.toString();return t.indexOf(\".\")>-1?t.length-t.indexOf(\".\")-1:0}function s(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}function a(e,t,n,o,i){return o+(e-t)/(n-t)*(i-o)}function l(e,t,n,o){e.style.background=\"\",S.each(ee,function(i){e.style.cssText+=\"background: \"+i+\"linear-gradient(\"+t+\", \"+n+\" 0%, \"+o+\" 100%); \"})}function d(e){e.style.background=\"\",e.style.cssText+=\"background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);\",e.style.cssText+=\"background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);\",e.style.cssText+=\"background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);\",e.style.cssText+=\"background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);\",e.style.cssText+=\"background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);\"}function c(e,t,n){var o=document.createElement(\"li\");return t&&o.appendChild(t),n?e.__ul.insertBefore(o,n):e.__ul.appendChild(o),e.onResize(),o}function u(e){X.unbind(window,\"resize\",e.__resizeHandler),e.saveToLocalStorageIfPossible&&X.unbind(window,\"unload\",e.saveToLocalStorageIfPossible)}function _(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];n.innerHTML=t?n.value+\"*\":n.value}function h(e,t,n){if(n.__li=t,n.__gui=e,S.extend(n,{options:function(t){if(arguments.length>1){var o=n.__li.nextElementSibling;return n.remove(),f(e,n.object,n.property,{before:o,factoryArgs:[S.toArray(arguments)]})}if(S.isArray(t)||S.isObject(t)){var i=n.__li.nextElementSibling;return n.remove(),f(e,n.object,n.property,{before:i,factoryArgs:[t]})}},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof q){var o=new Q(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});S.each([\"updateDisplay\",\"onChange\",\"onFinishChange\",\"step\",\"min\",\"max\"],function(e){var t=n[e],i=o[e];n[e]=o[e]=function(){var e=Array.prototype.slice.call(arguments);return i.apply(o,e),t.apply(n,e)}}),X.addClass(t,\"has-slider\"),n.domElement.insertBefore(o.domElement,n.domElement.firstElementChild)}else if(n instanceof Q){var i=function(t){if(S.isNumber(n.__min)&&S.isNumber(n.__max)){var o=n.__li.firstElementChild.firstElementChild.innerHTML,i=n.__gui.__listening.indexOf(n)>-1;n.remove();var r=f(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return r.name(o),i&&r.listen(),r}return t};n.min=S.compose(i,n.min),n.max=S.compose(i,n.max)}else n instanceof K?(X.bind(t,\"click\",function(){X.fakeEvent(n.__checkbox,\"click\")}),X.bind(n.__checkbox,\"click\",function(e){e.stopPropagation()})):n instanceof Z?(X.bind(t,\"click\",function(){X.fakeEvent(n.__button,\"click\")}),X.bind(t,\"mouseover\",function(){X.addClass(n.__button,\"hover\")}),X.bind(t,\"mouseout\",function(){X.removeClass(n.__button,\"hover\")})):n instanceof $&&(X.addClass(t,\"color\"),n.updateDisplay=S.compose(function(e){return t.style.borderLeftColor=n.__color.toString(),e},n.updateDisplay),n.updateDisplay());n.setValue=S.compose(function(t){return e.getRoot().__preset_select&&n.isModified()&&_(e.getRoot(),!0),t},n.setValue)}function p(e,t){var n=e.getRoot(),o=n.__rememberedObjects.indexOf(t.object);if(-1!==o){var i=n.__rememberedObjectIndecesToControllers[o];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[o]=i),i[t.property]=t,n.load&&n.load.remembered){var r=n.load.remembered,s=void 0;if(r[e.preset])s=r[e.preset];else{if(!r[se])return;s=r[se]}if(s[o]&&void 0!==s[o][t.property]){var a=s[o][t.property];t.initialValue=a,t.setValue(a)}}}}function f(e,t,n,o){if(void 0===t[n])throw new Error('Object \"'+t+'\" has no property \"'+n+'\"');var i=void 0;if(o.color)i=new $(t,n);else{var r=[t,n].concat(o.factoryArgs);i=ne.apply(e,r)}o.before instanceof z&&(o.before=o.before.__li),p(e,i),X.addClass(i.domElement,\"c\");var s=document.createElement(\"span\");X.addClass(s,\"property-name\"),s.innerHTML=i.property;var a=document.createElement(\"div\");a.appendChild(s),a.appendChild(i.domElement);var l=c(e,a,o.before);return X.addClass(l,he.CLASS_CONTROLLER_ROW),i instanceof $?X.addClass(l,\"color\"):X.addClass(l,H(i.getValue())),h(e,l,i),e.__controllers.push(i),i}function m(e,t){return document.location.href+\".\"+t}function g(e,t,n){var o=document.createElement(\"option\");o.innerHTML=t,o.value=t,e.__preset_select.appendChild(o),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function b(e,t){t.style.display=e.useLocalStorage?\"block\":\"none\"}function v(e){var t=e.__save_row=document.createElement(\"li\");X.addClass(e.domElement,\"has-save\"),e.__ul.insertBefore(t,e.__ul.firstChild),X.addClass(t,\"save-row\");var n=document.createElement(\"span\");n.innerHTML=\"&nbsp;\",X.addClass(n,\"button gears\");var o=document.createElement(\"span\");o.innerHTML=\"Save\",X.addClass(o,\"button\"),X.addClass(o,\"save\");var i=document.createElement(\"span\");i.innerHTML=\"New\",X.addClass(i,\"button\"),X.addClass(i,\"save-as\");var r=document.createElement(\"span\");r.innerHTML=\"Revert\",X.addClass(r,\"button\"),X.addClass(r,\"revert\");var s=e.__preset_select=document.createElement(\"select\");if(e.load&&e.load.remembered?S.each(e.load.remembered,function(t,n){g(e,n,n===e.preset)}):g(e,se,!1),X.bind(s,\"change\",function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value}),t.appendChild(s),t.appendChild(n),t.appendChild(o),t.appendChild(i),t.appendChild(r),ae){var a=document.getElementById(\"dg-local-explain\"),l=document.getElementById(\"dg-local-storage\");document.getElementById(\"dg-save-locally\").style.display=\"block\",\"true\"===localStorage.getItem(m(e,\"isLocal\"))&&l.setAttribute(\"checked\",\"checked\"),b(e,a),X.bind(l,\"change\",function(){e.useLocalStorage=!e.useLocalStorage,b(e,a)})}var d=document.getElementById(\"dg-new-constructor\");X.bind(d,\"keydown\",function(e){!e.metaKey||67!==e.which&&67!==e.keyCode||le.hide()}),X.bind(n,\"click\",function(){d.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),le.show(),d.focus(),d.select()}),X.bind(o,\"click\",function(){e.save()}),X.bind(i,\"click\",function(){var t=prompt(\"Enter a new preset name.\");t&&e.saveAs(t)}),X.bind(r,\"click\",function(){e.revert()})}function y(e){function t(t){return t.preventDefault(),e.width+=i-t.clientX,e.onResize(),i=t.clientX,!1}function n(){X.removeClass(e.__closeButton,he.CLASS_DRAG),X.unbind(window,\"mousemove\",t),X.unbind(window,\"mouseup\",n)}function o(o){return o.preventDefault(),i=o.clientX,X.addClass(e.__closeButton,he.CLASS_DRAG),X.bind(window,\"mousemove\",t),X.bind(window,\"mouseup\",n),!1}var i=void 0;e.__resize_handle=document.createElement(\"div\"),S.extend(e.__resize_handle.style,{width:\"6px\",marginLeft:\"-3px\",height:\"200px\",cursor:\"ew-resize\",position:\"absolute\"}),X.bind(e.__resize_handle,\"mousedown\",o),X.bind(e.__closeButton,\"mousedown\",o),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}function w(e,t){e.domElement.style.width=t+\"px\",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+\"px\"),e.__closeButton&&(e.__closeButton.style.width=t+\"px\")}function x(e,t){var n={};return S.each(e.__rememberedObjects,function(o,i){var r={},s=e.__rememberedObjectIndecesToControllers[i];S.each(s,function(e,n){r[n]=t?e.initialValue:e.getValue()}),n[i]=r}),n}function E(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}function C(e){0!==e.length&&oe.call(window,function(){C(e)}),S.each(e,function(e){e.updateDisplay()})}var A=Array.prototype.forEach,k=Array.prototype.slice,S={BREAK:{},extend:function(e){return this.each(k.call(arguments,1),function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(t[n])||(e[n]=t[n])}.bind(this))},this),e},defaults:function(e){return this.each(k.call(arguments,1),function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(e[n])&&(e[n]=t[n])}.bind(this))},this),e},compose:function(){var e=k.call(arguments);return function(){for(var t=k.call(arguments),n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},each:function(e,t,n){if(e)if(A&&e.forEach&&e.forEach===A)e.forEach(t,n);else if(e.length===e.length+0){var o=void 0,i=void 0;for(o=0,i=e.length;o<i;o++)if(o in e&&t.call(n,e[o],o)===this.BREAK)return}else for(var r in e)if(t.call(n,e[r],r)===this.BREAK)return},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var o=void 0;return function(){var i=this,r=arguments,s=n||!o;clearTimeout(o),o=setTimeout(function(){o=null,n||e.apply(i,r)},t),s&&e.apply(i,r)}},toArray:function(e){return e.toArray?e.toArray():k.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return isNaN(e)}),isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+\"\"},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return e instanceof Function}},O=[{litmus:S.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:\"HEX\",hex:parseInt(\"0x\"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:t},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:\"HEX\",hex:parseInt(\"0x\"+t[1].toString(),0)}},write:t},CSS_RGB:{read:function(e){var t=e.match(/^rgb\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);return null!==t&&{space:\"RGB\",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:t},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);return null!==t&&{space:\"RGB\",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:t}}},{litmus:S.isNumber,conversions:{HEX:{read:function(e){return{space:\"HEX\",hex:e,conversionName:\"HEX\"}},write:function(e){return e.hex}}}},{litmus:S.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3===e.length&&{space:\"RGB\",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4===e.length&&{space:\"RGB\",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:S.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(S.isNumber(e.r)&&S.isNumber(e.g)&&S.isNumber(e.b)&&S.isNumber(e.a))&&{space:\"RGB\",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(S.isNumber(e.r)&&S.isNumber(e.g)&&S.isNumber(e.b))&&{space:\"RGB\",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(S.isNumber(e.h)&&S.isNumber(e.s)&&S.isNumber(e.v)&&S.isNumber(e.a))&&{space:\"HSV\",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(S.isNumber(e.h)&&S.isNumber(e.s)&&S.isNumber(e.v))&&{space:\"HSV\",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],T=void 0,L=void 0,R=function(){L=!1;var e=arguments.length>1?S.toArray(arguments):arguments[0];return S.each(O,function(t){if(t.litmus(e))return S.each(t.conversions,function(t,n){if(T=t.read(e),!1===L&&!1!==T)return L=T,T.conversionName=n,T.conversion=t,S.BREAK}),S.BREAK}),L},B=void 0,N={hsv_to_rgb:function(e,t,n){var o=Math.floor(e/60)%6,i=e/60-Math.floor(e/60),r=n*(1-t),s=n*(1-i*t),a=n*(1-(1-i)*t),l=[[n,a,r],[s,n,r],[r,n,a],[r,s,n],[a,r,n],[n,r,s]][o];return{r:255*l[0],g:255*l[1],b:255*l[2]}},rgb_to_hsv:function(e,t,n){var o=Math.min(e,t,n),i=Math.max(e,t,n),r=i-o,s=void 0,a=void 0;return 0===i?{h:NaN,s:0,v:0}:(a=r/i,s=e===i?(t-n)/r:t===i?2+(n-e)/r:4+(e-t)/r,(s/=6)<0&&(s+=1),{h:360*s,s:a,v:i/255})},rgb_to_hex:function(e,t,n){var o=this.hex_with_component(0,2,e);return o=this.hex_with_component(o,1,t),o=this.hex_with_component(o,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,n){return n<<(B=8*t)|e&~(255<<B)}},H=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},F=function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")},P=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),D=function e(t,n,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,o)}if(\"value\"in i)return i.value;var s=i.get;if(void 0!==s)return s.call(o)},j=function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},V=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t},I=function(){function e(){if(F(this,e),this.__state=R.apply(this,arguments),!1===this.__state)throw new Error(\"Failed to interpret color arguments\");this.__state.a=this.__state.a||1}return P(e,[{key:\"toString\",value:function(){return t(this)}},{key:\"toHexString\",value:function(){return t(this,!0)}},{key:\"toOriginal\",value:function(){return this.__state.conversion.write(this)}}]),e}();I.recalculateRGB=function(e,t,n){if(\"HEX\"===e.__state.space)e.__state[t]=N.component_from_hex(e.__state.hex,n);else{if(\"HSV\"!==e.__state.space)throw new Error(\"Corrupted color state\");S.extend(e.__state,N.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}},I.recalculateHSV=function(e){var t=N.rgb_to_hsv(e.r,e.g,e.b);S.extend(e.__state,{s:t.s,v:t.v}),S.isNaN(t.h)?S.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h},I.COMPONENTS=[\"r\",\"g\",\"b\",\"h\",\"s\",\"v\",\"hex\",\"a\"],n(I.prototype,\"r\",2),n(I.prototype,\"g\",1),n(I.prototype,\"b\",0),o(I.prototype,\"h\"),o(I.prototype,\"s\"),o(I.prototype,\"v\"),Object.defineProperty(I.prototype,\"a\",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(I.prototype,\"hex\",{get:function(){return\"HEX\"!==this.__state.space&&(this.__state.hex=N.rgb_to_hex(this.r,this.g,this.b),this.__state.space=\"HEX\"),this.__state.hex},set:function(e){this.__state.space=\"HEX\",this.__state.hex=e}});var z=function(){function e(t,n){F(this,e),this.initialValue=t[n],this.domElement=document.createElement(\"div\"),this.object=t,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return P(e,[{key:\"onChange\",value:function(e){return this.__onChange=e,this}},{key:\"onFinishChange\",value:function(e){return this.__onFinishChange=e,this}},{key:\"setValue\",value:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}},{key:\"getValue\",value:function(){return this.object[this.property]}},{key:\"updateDisplay\",value:function(){return this}},{key:\"isModified\",value:function(){return this.initialValue!==this.getValue()}}]),e}(),M={HTMLEvents:[\"change\"],MouseEvents:[\"click\",\"mousemove\",\"mousedown\",\"mouseup\",\"mouseover\"],KeyboardEvents:[\"keydown\"]},G={};S.each(M,function(e,t){S.each(e,function(e){G[e]=t})});var U=/(\\d+(\\.\\d+)?)px/,X={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?\"auto\":\"none\",e.style.KhtmlUserSelect=t?\"auto\":\"none\",e.unselectable=t?\"on\":\"off\")},makeFullscreen:function(e,t,n){var o=n,i=t;S.isUndefined(i)&&(i=!0),S.isUndefined(o)&&(o=!0),e.style.position=\"absolute\",i&&(e.style.left=0,e.style.right=0),o&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,n,o){var i=n||{},r=G[t];if(!r)throw new Error(\"Event type \"+t+\" not supported.\");var s=document.createEvent(r);switch(r){case\"MouseEvents\":var a=i.x||i.clientX||0,l=i.y||i.clientY||0;s.initMouseEvent(t,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,a,l,!1,!1,!1,!1,0,null);break;case\"KeyboardEvents\":var d=s.initKeyboardEvent||s.initKeyEvent;S.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),d(t,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:s.initEvent(t,i.bubbles||!1,i.cancelable||!0)}S.defaults(s,o),e.dispatchEvent(s)},bind:function(e,t,n,o){var i=o||!1;return e.addEventListener?e.addEventListener(t,n,i):e.attachEvent&&e.attachEvent(\"on\"+t,n),X},unbind:function(e,t,n,o){var i=o||!1;return e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent&&e.detachEvent(\"on\"+t,n),X},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);-1===n.indexOf(t)&&(n.push(t),e.className=n.join(\" \").replace(/^\\s+/,\"\").replace(/\\s+$/,\"\"))}return X},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute(\"class\");else{var n=e.className.split(/ +/),o=n.indexOf(t);-1!==o&&(n.splice(o,1),e.className=n.join(\" \"))}else e.className=void 0;return X},hasClass:function(e,t){return new RegExp(\"(?:^|\\\\s+)\"+t+\"(?:\\\\s+|$)\").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return i(t[\"border-left-width\"])+i(t[\"border-right-width\"])+i(t[\"padding-left\"])+i(t[\"padding-right\"])+i(t.width)},getHeight:function(e){var t=getComputedStyle(e);return i(t[\"border-top-width\"])+i(t[\"border-bottom-width\"])+i(t[\"padding-top\"])+i(t[\"padding-bottom\"])+i(t.height)},getOffset:function(e){var t=e,n={left:0,top:0};if(t.offsetParent)do{n.left+=t.offsetLeft,n.top+=t.offsetTop,t=t.offsetParent}while(t);return n},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},K=function(e){function t(e,n){F(this,t);var o=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=o;return o.__prev=o.getValue(),o.__checkbox=document.createElement(\"input\"),o.__checkbox.setAttribute(\"type\",\"checkbox\"),X.bind(o.__checkbox,\"change\",function(){i.setValue(!i.__prev)},!1),o.domElement.appendChild(o.__checkbox),o.updateDisplay(),o}return j(t,z),P(t,[{key:\"setValue\",value:function(e){var n=D(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),\"setValue\",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:\"updateDisplay\",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute(\"checked\",\"checked\"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),D(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),\"updateDisplay\",this).call(this)}}]),t}(),Y=function(e){function t(e,n,o){F(this,t);var i=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),r=o,s=i;if(i.__select=document.createElement(\"select\"),S.isArray(r)){var a={};S.each(r,function(e){a[e]=e}),r=a}return S.each(r,function(e,t){var n=document.createElement(\"option\");n.innerHTML=t,n.setAttribute(\"value\",e),s.__select.appendChild(n)}),i.updateDisplay(),X.bind(i.__select,\"change\",function(){var e=this.options[this.selectedIndex].value;s.setValue(e)}),i.domElement.appendChild(i.__select),i}return j(t,z),P(t,[{key:\"setValue\",value:function(e){var n=D(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),\"setValue\",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:\"updateDisplay\",value:function(){return X.isActive(this.__select)?this:(this.__select.value=this.getValue(),D(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),\"updateDisplay\",this).call(this))}}]),t}(),J=function(e){function t(e,n){function o(){r.setValue(r.__input.value)}F(this,t);var i=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),r=i;return i.__input=document.createElement(\"input\"),i.__input.setAttribute(\"type\",\"text\"),X.bind(i.__input,\"keyup\",o),X.bind(i.__input,\"change\",o),X.bind(i.__input,\"blur\",function(){r.__onFinishChange&&r.__onFinishChange.call(r,r.getValue())}),X.bind(i.__input,\"keydown\",function(e){13===e.keyCode&&this.blur()}),i.updateDisplay(),i.domElement.appendChild(i.__input),i}return j(t,z),P(t,[{key:\"updateDisplay\",value:function(){return X.isActive(this.__input)||(this.__input.value=this.getValue()),D(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),\"updateDisplay\",this).call(this)}}]),t}(),W=function(e){function t(e,n,o){F(this,t);var i=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),s=o||{};return i.__min=s.min,i.__max=s.max,i.__step=s.step,S.isUndefined(i.__step)?0===i.initialValue?i.__impliedStep=1:i.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(i.initialValue))/Math.LN10))/10:i.__impliedStep=i.__step,i.__precision=r(i.__impliedStep),i}return j(t,z),P(t,[{key:\"setValue\",value:function(e){var n=e;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!=0&&(n=Math.round(n/this.__step)*this.__step),D(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),\"setValue\",this).call(this,n)}},{key:\"min\",value:function(e){return this.__min=e,this}},{key:\"max\",value:function(e){return this.__max=e,this}},{key:\"step\",value:function(e){return this.__step=e,this.__impliedStep=e,this.__precision=r(e),this}}]),t}(),Q=function(e){function t(e,n,o){function i(){l.__onFinishChange&&l.__onFinishChange.call(l,l.getValue())}function r(e){var t=d-e.clientY;l.setValue(l.getValue()+t*l.__impliedStep),d=e.clientY}function s(){X.unbind(window,\"mousemove\",r),X.unbind(window,\"mouseup\",s),i()}F(this,t);var a=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,o));a.__truncationSuspended=!1;var l=a,d=void 0;return a.__input=document.createElement(\"input\"),a.__input.setAttribute(\"type\",\"text\"),X.bind(a.__input,\"change\",function(){var e=parseFloat(l.__input.value);S.isNaN(e)||l.setValue(e)}),X.bind(a.__input,\"blur\",function(){i()}),X.bind(a.__input,\"mousedown\",function(e){X.bind(window,\"mousemove\",r),X.bind(window,\"mouseup\",s),d=e.clientY}),X.bind(a.__input,\"keydown\",function(e){13===e.keyCode&&(l.__truncationSuspended=!0,this.blur(),l.__truncationSuspended=!1,i())}),a.updateDisplay(),a.domElement.appendChild(a.__input),a}return j(t,W),P(t,[{key:\"updateDisplay\",value:function(){return this.__input.value=this.__truncationSuspended?this.getValue():s(this.getValue(),this.__precision),D(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),\"updateDisplay\",this).call(this)}}]),t}(),q=function(e){function t(e,n,o,i,r){function s(e){e.preventDefault();var t=_.__background.getBoundingClientRect();return _.setValue(a(e.clientX,t.left,t.right,_.__min,_.__max)),!1}function l(){X.unbind(window,\"mousemove\",s),X.unbind(window,\"mouseup\",l),_.__onFinishChange&&_.__onFinishChange.call(_,_.getValue())}function d(e){var t=e.touches[0].clientX,n=_.__background.getBoundingClientRect();_.setValue(a(t,n.left,n.right,_.__min,_.__max))}function c(){X.unbind(window,\"touchmove\",d),X.unbind(window,\"touchend\",c),_.__onFinishChange&&_.__onFinishChange.call(_,_.getValue())}F(this,t);var u=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{min:o,max:i,step:r})),_=u;return u.__background=document.createElement(\"div\"),u.__foreground=document.createElement(\"div\"),X.bind(u.__background,\"mousedown\",function(e){document.activeElement.blur(),X.bind(window,\"mousemove\",s),X.bind(window,\"mouseup\",l),s(e)}),X.bind(u.__background,\"touchstart\",function(e){1===e.touches.length&&(X.bind(window,\"touchmove\",d),X.bind(window,\"touchend\",c),d(e))}),X.addClass(u.__background,\"slider\"),X.addClass(u.__foreground,\"slider-fg\"),u.updateDisplay(),u.__background.appendChild(u.__foreground),u.domElement.appendChild(u.__background),u}return j(t,W),P(t,[{key:\"updateDisplay\",value:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+\"%\",D(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),\"updateDisplay\",this).call(this)}}]),t}(),Z=function(e){function t(e,n,o){F(this,t);var i=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),r=i;return i.__button=document.createElement(\"div\"),i.__button.innerHTML=void 0===o?\"Fire\":o,X.bind(i.__button,\"click\",function(e){return e.preventDefault(),r.fire(),!1}),X.addClass(i.__button,\"button\"),i.domElement.appendChild(i.__button),i}return j(t,z),P(t,[{key:\"fire\",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),t}(),$=function(e){function t(e,n){function o(e){u(e),X.bind(window,\"mousemove\",u),X.bind(window,\"touchmove\",u),X.bind(window,\"mouseup\",r),X.bind(window,\"touchend\",r)}function i(e){_(e),X.bind(window,\"mousemove\",_),X.bind(window,\"touchmove\",_),X.bind(window,\"mouseup\",s),X.bind(window,\"touchend\",s)}function r(){X.unbind(window,\"mousemove\",u),X.unbind(window,\"touchmove\",u),X.unbind(window,\"mouseup\",r),X.unbind(window,\"touchend\",r),c()}function s(){X.unbind(window,\"mousemove\",_),X.unbind(window,\"touchmove\",_),X.unbind(window,\"mouseup\",s),X.unbind(window,\"touchend\",s),c()}function a(){var e=R(this.value);!1!==e?(p.__color.__state=e,p.setValue(p.__color.toOriginal())):this.value=p.__color.toString()}function c(){p.__onFinishChange&&p.__onFinishChange.call(p,p.__color.toOriginal())}function u(e){-1===e.type.indexOf(\"touch\")&&e.preventDefault();var t=p.__saturation_field.getBoundingClientRect(),n=e.touches&&e.touches[0]||e,o=n.clientX,i=n.clientY,r=(o-t.left)/(t.right-t.left),s=1-(i-t.top)/(t.bottom-t.top);return s>1?s=1:s<0&&(s=0),r>1?r=1:r<0&&(r=0),p.__color.v=s,p.__color.s=r,p.setValue(p.__color.toOriginal()),!1}function _(e){-1===e.type.indexOf(\"touch\")&&e.preventDefault();var t=p.__hue_field.getBoundingClientRect(),n=1-((e.touches&&e.touches[0]||e).clientY-t.top)/(t.bottom-t.top);return n>1?n=1:n<0&&(n=0),p.__color.h=360*n,p.setValue(p.__color.toOriginal()),!1}F(this,t);var h=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));h.__color=new I(h.getValue()),h.__temp=new I(0);var p=h;h.domElement=document.createElement(\"div\"),X.makeSelectable(h.domElement,!1),h.__selector=document.createElement(\"div\"),h.__selector.className=\"selector\",h.__saturation_field=document.createElement(\"div\"),h.__saturation_field.className=\"saturation-field\",h.__field_knob=document.createElement(\"div\"),h.__field_knob.className=\"field-knob\",h.__field_knob_border=\"2px solid \",h.__hue_knob=document.createElement(\"div\"),h.__hue_knob.className=\"hue-knob\",h.__hue_field=document.createElement(\"div\"),h.__hue_field.className=\"hue-field\",h.__input=document.createElement(\"input\"),h.__input.type=\"text\",h.__input_textShadow=\"0 1px 1px \",X.bind(h.__input,\"keydown\",function(e){13===e.keyCode&&a.call(this)}),X.bind(h.__input,\"blur\",a),X.bind(h.__selector,\"mousedown\",function(){X.addClass(this,\"drag\").bind(window,\"mouseup\",function(){X.removeClass(p.__selector,\"drag\")})}),X.bind(h.__selector,\"touchstart\",function(){X.addClass(this,\"drag\").bind(window,\"touchend\",function(){X.removeClass(p.__selector,\"drag\")})});var f=document.createElement(\"div\");return S.extend(h.__selector.style,{width:\"122px\",height:\"102px\",padding:\"3px\",backgroundColor:\"#222\",boxShadow:\"0px 1px 3px rgba(0,0,0,0.3)\"}),S.extend(h.__field_knob.style,{position:\"absolute\",width:\"12px\",height:\"12px\",border:h.__field_knob_border+(h.__color.v<.5?\"#fff\":\"#000\"),boxShadow:\"0px 1px 3px rgba(0,0,0,0.5)\",borderRadius:\"12px\",zIndex:1}),S.extend(h.__hue_knob.style,{position:\"absolute\",width:\"15px\",height:\"2px\",borderRight:\"4px solid #fff\",zIndex:1}),S.extend(h.__saturation_field.style,{width:\"100px\",height:\"100px\",border:\"1px solid #555\",marginRight:\"3px\",display:\"inline-block\",cursor:\"pointer\"}),S.extend(f.style,{width:\"100%\",height:\"100%\",background:\"none\"}),l(f,\"top\",\"rgba(0,0,0,0)\",\"#000\"),S.extend(h.__hue_field.style,{width:\"15px\",height:\"100px\",border:\"1px solid #555\",cursor:\"ns-resize\",position:\"absolute\",top:\"3px\",right:\"3px\"}),d(h.__hue_field),S.extend(h.__input.style,{outline:\"none\",textAlign:\"center\",color:\"#fff\",border:0,fontWeight:\"bold\",textShadow:h.__input_textShadow+\"rgba(0,0,0,0.7)\"}),X.bind(h.__saturation_field,\"mousedown\",o),X.bind(h.__saturation_field,\"touchstart\",o),X.bind(h.__field_knob,\"mousedown\",o),X.bind(h.__field_knob,\"touchstart\",o),X.bind(h.__hue_field,\"mousedown\",i),X.bind(h.__hue_field,\"touchstart\",i),h.__saturation_field.appendChild(f),h.__selector.appendChild(h.__field_knob),h.__selector.appendChild(h.__saturation_field),h.__selector.appendChild(h.__hue_field),h.__hue_field.appendChild(h.__hue_knob),h.domElement.appendChild(h.__input),h.domElement.appendChild(h.__selector),h.updateDisplay(),h}return j(t,z),P(t,[{key:\"updateDisplay\",value:function(){var e=R(this.getValue());if(!1!==e){var t=!1;S.each(I.COMPONENTS,function(n){if(!S.isUndefined(e[n])&&!S.isUndefined(this.__color.__state[n])&&e[n]!==this.__color.__state[n])return t=!0,{}},this),t&&S.extend(this.__color.__state,e)}S.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,o=255-n;S.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+\"px\",marginTop:100*(1-this.__color.v)-7+\"px\",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+\"rgb(\"+n+\",\"+n+\",\"+n+\")\"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+\"px\",this.__temp.s=1,this.__temp.v=1,l(this.__saturation_field,\"left\",\"#fff\",this.__temp.toHexString()),this.__input.value=this.__color.toString(),S.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:\"rgb(\"+n+\",\"+n+\",\"+n+\")\",textShadow:this.__input_textShadow+\"rgba(\"+o+\",\"+o+\",\"+o+\",.7)\"})}}]),t}(),ee=[\"-moz-\",\"-o-\",\"-webkit-\",\"-ms-\",\"\"],te={load:function(e,t){var n=t||document,o=n.createElement(\"link\");o.type=\"text/css\",o.rel=\"stylesheet\",o.href=e,n.getElementsByTagName(\"head\")[0].appendChild(o)},inject:function(e,t){var n=t||document,o=document.createElement(\"style\");o.type=\"text/css\",o.innerHTML=e;var i=n.getElementsByTagName(\"head\")[0];try{i.appendChild(o)}catch(e){}}},ne=function(e,t){var n=e[t];return S.isArray(arguments[2])||S.isObject(arguments[2])?new Y(e,t,arguments[2]):S.isNumber(n)?S.isNumber(arguments[2])&&S.isNumber(arguments[3])?S.isNumber(arguments[4])?new q(e,t,arguments[2],arguments[3],arguments[4]):new q(e,t,arguments[2],arguments[3]):S.isNumber(arguments[4])?new Q(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new Q(e,t,{min:arguments[2],max:arguments[3]}):S.isString(n)?new J(e,t):S.isFunction(n)?new Z(e,t,\"\"):S.isBoolean(n)?new K(e,t):null},oe=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},ie=function(){function e(){F(this,e),this.backgroundElement=document.createElement(\"div\"),S.extend(this.backgroundElement.style,{backgroundColor:\"rgba(0,0,0,0.8)\",top:0,left:0,display:\"none\",zIndex:\"1000\",opacity:0,WebkitTransition:\"opacity 0.2s linear\",transition:\"opacity 0.2s linear\"}),X.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position=\"fixed\",this.domElement=document.createElement(\"div\"),S.extend(this.domElement.style,{position:\"fixed\",display:\"none\",zIndex:\"1001\",opacity:0,WebkitTransition:\"-webkit-transform 0.2s ease-out, opacity 0.2s linear\",transition:\"transform 0.2s ease-out, opacity 0.2s linear\"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;X.bind(this.backgroundElement,\"click\",function(){t.hide()})}return P(e,[{key:\"show\",value:function(){var e=this;this.backgroundElement.style.display=\"block\",this.domElement.style.display=\"block\",this.domElement.style.opacity=0,this.domElement.style.webkitTransform=\"scale(1.1)\",this.layout(),S.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform=\"scale(1)\"})}},{key:\"hide\",value:function(){var e=this,t=function t(){e.domElement.style.display=\"none\",e.backgroundElement.style.display=\"none\",X.unbind(e.domElement,\"webkitTransitionEnd\",t),X.unbind(e.domElement,\"transitionend\",t),X.unbind(e.domElement,\"oTransitionEnd\",t)};X.bind(this.domElement,\"webkitTransitionEnd\",t),X.bind(this.domElement,\"transitionend\",t),X.bind(this.domElement,\"oTransitionEnd\",t),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform=\"scale(1.1)\"}},{key:\"layout\",value:function(){this.domElement.style.left=window.innerWidth/2-X.getWidth(this.domElement)/2+\"px\",this.domElement.style.top=window.innerHeight/2-X.getHeight(this.domElement)/2+\"px\"}}]),e}(),re=function(e){if(e&&\"undefined\"!=typeof window){var t=document.createElement(\"style\");return t.setAttribute(\"type\",\"text/css\"),t.innerHTML=e,document.head.appendChild(t),e}}(\".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\\n\");te.inject(re);var se=\"Default\",ae=function(){try{return!!window.localStorage}catch(e){return!1}}(),le=void 0,de=!0,ce=void 0,ue=!1,_e=[],he=function e(t){var n=this,o=t||{};this.domElement=document.createElement(\"div\"),this.__ul=document.createElement(\"ul\"),this.domElement.appendChild(this.__ul),X.addClass(this.domElement,\"dg\"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],o=S.defaults(o,{closeOnTop:!1,autoPlace:!0,width:e.DEFAULT_WIDTH}),o=S.defaults(o,{resizable:o.autoPlace,hideable:o.autoPlace}),S.isUndefined(o.load)?o.load={preset:se}:o.preset&&(o.load.preset=o.preset),S.isUndefined(o.parent)&&o.hideable&&_e.push(this),o.resizable=S.isUndefined(o.parent)&&o.resizable,o.autoPlace&&S.isUndefined(o.scrollable)&&(o.scrollable=!0);var i=ae&&\"true\"===localStorage.getItem(m(this,\"isLocal\")),r=void 0,s=void 0;if(Object.defineProperties(this,{parent:{get:function(){return o.parent}},scrollable:{get:function(){return o.scrollable}},autoPlace:{get:function(){return o.autoPlace}},closeOnTop:{get:function(){return o.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:o.load.preset},set:function(e){n.parent?n.getRoot().preset=e:o.load.preset=e,E(this),n.revert()}},width:{get:function(){return o.width},set:function(e){o.width=e,w(n,e)}},name:{get:function(){return o.name},set:function(e){o.name=e,s&&(s.innerHTML=o.name)}},closed:{get:function(){return o.closed},set:function(t){o.closed=t,o.closed?X.addClass(n.__ul,e.CLASS_CLOSED):X.removeClass(n.__ul,e.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=t?e.TEXT_OPEN:e.TEXT_CLOSED)}},load:{get:function(){return o.load}},useLocalStorage:{get:function(){return i},set:function(e){ae&&(i=e,e?X.bind(window,\"unload\",r):X.unbind(window,\"unload\",r),localStorage.setItem(m(n,\"isLocal\"),e))}}}),S.isUndefined(o.parent)){if(this.closed=o.closed||!1,X.addClass(this.domElement,e.CLASS_MAIN),X.makeSelectable(this.domElement,!1),ae&&i){n.useLocalStorage=!0;var a=localStorage.getItem(m(this,\"gui\"));a&&(o.load=JSON.parse(a))}this.__closeButton=document.createElement(\"div\"),this.__closeButton.innerHTML=e.TEXT_CLOSED,X.addClass(this.__closeButton,e.CLASS_CLOSE_BUTTON),o.closeOnTop?(X.addClass(this.__closeButton,e.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(X.addClass(this.__closeButton,e.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),X.bind(this.__closeButton,\"click\",function(){n.closed=!n.closed})}else{void 0===o.closed&&(o.closed=!0);var l=document.createTextNode(o.name);X.addClass(l,\"controller-name\"),s=c(n,l);X.addClass(this.__ul,e.CLASS_CLOSED),X.addClass(s,\"title\"),X.bind(s,\"click\",function(e){return e.preventDefault(),n.closed=!n.closed,!1}),o.closed||(this.closed=!1)}o.autoPlace&&(S.isUndefined(o.parent)&&(de&&(ce=document.createElement(\"div\"),X.addClass(ce,\"dg\"),X.addClass(ce,e.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(ce),de=!1),ce.appendChild(this.domElement),X.addClass(this.domElement,e.CLASS_AUTO_PLACE)),this.parent||w(n,o.width)),this.__resizeHandler=function(){n.onResizeDebounced()},X.bind(window,\"resize\",this.__resizeHandler),X.bind(this.__ul,\"webkitTransitionEnd\",this.__resizeHandler),X.bind(this.__ul,\"transitionend\",this.__resizeHandler),X.bind(this.__ul,\"oTransitionEnd\",this.__resizeHandler),this.onResize(),o.resizable&&y(this),r=function(){ae&&\"true\"===localStorage.getItem(m(n,\"isLocal\"))&&localStorage.setItem(m(n,\"gui\"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=r,o.parent||function(){var e=n.getRoot();e.width+=1,S.defer(function(){e.width-=1})}()};he.toggleHide=function(){ue=!ue,S.each(_e,function(e){e.domElement.style.display=ue?\"none\":\"\"})},he.CLASS_AUTO_PLACE=\"a\",he.CLASS_AUTO_PLACE_CONTAINER=\"ac\",he.CLASS_MAIN=\"main\",he.CLASS_CONTROLLER_ROW=\"cr\",he.CLASS_TOO_TALL=\"taller-than-window\",he.CLASS_CLOSED=\"closed\",he.CLASS_CLOSE_BUTTON=\"close-button\",he.CLASS_CLOSE_TOP=\"close-top\",he.CLASS_CLOSE_BOTTOM=\"close-bottom\",he.CLASS_DRAG=\"drag\",he.DEFAULT_WIDTH=245,he.TEXT_CLOSED=\"Close Controls\",he.TEXT_OPEN=\"Open Controls\",he._keydownHandler=function(e){\"text\"===document.activeElement.type||72!==e.which&&72!==e.keyCode||he.toggleHide()},X.bind(window,\"keydown\",he._keydownHandler,!1),S.extend(he.prototype,{add:function(e,t){return f(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return f(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;S.defer(function(){t.onResize()})},destroy:function(){if(this.parent)throw new Error(\"Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.\");this.autoPlace&&ce.removeChild(this.domElement);var e=this;S.each(this.__folders,function(t){e.removeFolder(t)}),X.unbind(window,\"keydown\",he._keydownHandler,!1),u(this)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name \"'+e+'\"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var n=new he(t);this.__folders[e]=n;var o=c(this,n.domElement);return X.addClass(o,\"folder\"),n},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],u(e);var t=this;S.each(e.__folders,function(t){e.removeFolder(t)}),S.defer(function(){t.onResize()})},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display=\"none\"},show:function(){this.domElement.style.display=\"\"},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=X.getOffset(e.__ul).top,n=0;S.each(e.__ul.childNodes,function(t){e.autoPlace&&t===e.__save_row||(n+=X.getHeight(t))}),window.innerHeight-t-20<n?(X.addClass(e.domElement,he.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-20+\"px\"):(X.removeClass(e.domElement,he.CLASS_TOO_TALL),e.__ul.style.height=\"auto\")}e.__resize_handle&&S.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+\"px\"}),e.__closeButton&&(e.__closeButton.style.width=e.width+\"px\")},onResizeDebounced:S.debounce(function(){this.onResize()},50),remember:function(){if(S.isUndefined(le)&&((le=new ie).domElement.innerHTML='<div id=\"dg-save\" class=\"dg dialogue\">\\n\\n  Here\\'s the new load parameter for your <code>GUI</code>\\'s constructor:\\n\\n  <textarea id=\"dg-new-constructor\"></textarea>\\n\\n  <div id=\"dg-save-locally\">\\n\\n    <input id=\"dg-local-storage\" type=\"checkbox\"/> Automatically save\\n    values to <code>localStorage</code> on exit.\\n\\n    <div id=\"dg-local-explain\">The values saved to <code>localStorage</code> will\\n      override those passed to <code>dat.GUI</code>\\'s constructor. This makes it\\n      easier to work incrementally, but <code>localStorage</code> is fragile,\\n      and your friends may not see the same values you do.\\n\\n    </div>\\n\\n  </div>\\n\\n</div>'),this.parent)throw new Error(\"You can only call remember on a top level GUI.\");var e=this;S.each(Array.prototype.slice.call(arguments),function(t){0===e.__rememberedObjects.length&&v(e),-1===e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)}),this.autoPlace&&w(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=x(this)),e.folders={},S.each(this.__folders,function(t,n){e.folders[n]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=x(this),_(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[se]=x(this,!0)),this.load.remembered[e]=x(this),this.preset=e,g(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){S.each(this.__controllers,function(t){this.getRoot().load.remembered?p(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())},this),S.each(this.__folders,function(e){e.revert(e)}),e||_(this.getRoot(),!1)},listen:function(e){var t=0===this.__listening.length;this.__listening.push(e),t&&C(this.__listening)},updateDisplay:function(){S.each(this.__controllers,function(e){e.updateDisplay()}),S.each(this.__folders,function(e){e.updateDisplay()})}});var pe={Color:I,math:N,interpret:R},fe={Controller:z,BooleanController:K,OptionController:Y,StringController:J,NumberController:W,NumberControllerBox:Q,NumberControllerSlider:q,FunctionController:Z,ColorController:$},me={dom:X},ge={GUI:he},be=he,ve={color:pe,controllers:fe,dom:me,gui:ge,GUI:be};e.color=pe,e.controllers=fe,e.dom=me,e.gui=ge,e.GUI=be,e.default=ve,Object.defineProperty(e,\"__esModule\",{value:!0})});\n",null,"\nexport const DefaultWebGLVertexAttributes_ = `\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\nattribute vec4 a_position;\nattribute vec4 a_normal;\nattribute vec2 a_texcoord;\nattribute vec4 a_color;\n\nvarying vec4 v_position;\nvarying vec4 v_normal;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\n`;\n\nexport const DefaultWebGLFragmentAttributes_ = `\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\nvarying vec4 v_position;\nvarying vec4 v_normal;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\n`;\n\nexport const DefaultWebGL2VertexAttributes_ = `#version 300 es\n\nprecision mediump float;\n\nin vec4 a_position;\nin vec4 a_normal;\nin vec2 a_texcoord;\nin vec4 a_color;\n\nout vec4 v_position;\nout vec4 v_normal;\nout vec2 v_texcoord;\nout vec4 v_color;\n`;\n\nexport const DefaultWebGL2FragmentAttributes_ = `#version 300 es\n\nprecision mediump float;\n\nin vec4 v_position;\nin vec4 v_normal;\nin vec2 v_texcoord;\nin vec4 v_color;\n\nout vec4 outColor;\n`;\n\nexport const DefaultWebGLUniform_ = `\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_modelViewMatrix;\nuniform mat4 u_normalMatrix;\n\nuniform vec2 u_resolution;\nuniform float u_time;\n`;\n\nexport const DefaultWebGL2Uniform_ = DefaultWebGLUniform_;\n\nexport const DefaultWebGLFlatVertex_ = `\nvoid main() {\n\tv_position = a_position;\n\tv_normal = a_normal;\n\tv_texcoord = a_texcoord;\n\tv_color = a_color;\n\tgl_Position = a_position;\n}\n`;\n\nexport const DefaultWebGLMeshVertex_ = `\nvoid main(void) {\n\tv_position = u_projectionMatrix * u_modelViewMatrix * a_position;\n\tv_normal = u_normalMatrix * a_normal;\n\tv_texcoord = a_texcoord;\n\tv_color = a_color;\n\tgl_Position = v_position;\n}\n`;\n\nexport const DefaultWebGLFlatFragment_ = `\nvoid main() {\n\tvec2 st = gl_FragCoord.xy / u_resolution.xy;\n\tst.x *= u_resolution.x / u_resolution.y;\n\tvec3 color = vec3(\n\t\tabs(cos(u_time * 0.1)) * st.y,\n\t\tabs(cos(u_time * 0.2)) * st.y,\n\t\tabs(sin(u_time)) * st.y\n\t);\n\tgl_FragColor = vec4(color, 1.0);\n}\n`;\n\nexport const DefaultWebGL2FlatFragment_ = `\nvoid main() {\n\tvec2 st = gl_FragCoord.xy / u_resolution.xy;\n\tst.x *= u_resolution.x / u_resolution.y;\n\tvec3 color = vec3(\n\t\tabs(cos(u_time * 0.1)) * st.y,\n\t\tabs(cos(u_time * 0.2)) * st.y,\n\t\tabs(sin(u_time)) * st.y\n\t);\n\toutColor = vec4(color, 1.0);\n}\n`;\n\nexport const DefaultWebGLMeshFragment_ = `\nvoid main() {\n\tvec2 uv = v_texcoord;\n\tvec3 color = vec3(\n\t\tabs(cos(u_time * 0.1)) * uv.y,\n\t\tabs(cos(u_time * 0.2)) * uv.y,\n\t\tabs(sin(u_time)) * uv.y\n\t);\n\tfloat incidence = max(dot(v_normal.xyz, vec3(0.0, 1.0, 0.0)), 0.0);\n\tvec3 light = vec3(0.2) + (vec3(1.0) * incidence);\n\tgl_FragColor = vec4(v_color.rgb * color * light, 1.0);\n}\n`;\n\nexport const DefaultWebGL2MeshFragment_ = `\nvoid main() {\n\tvec2 uv = v_texcoord;\n\tvec3 color = vec3(\n\t\tabs(cos(u_time * 0.1)) * uv.y,\n\t\tabs(cos(u_time * 0.2)) * uv.y,\n\t\tabs(sin(u_time)) * uv.y\n\t);\n\tfloat incidence = max(dot(v_normal.xyz, vec3(0.0, 1.0, 0.0)), 0.0);\n\tvec3 light = vec3(0.2) + (vec3(1.0) * incidence);\n\toutColor = vec4(v_color.rgb * color * light, 1.0);\n}\n`;\n\nexport const DefaultWebGLBufferFragment_ = `\nvoid main(){\n\tgl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n}`;\n\nexport const DefaultWebGL2BufferFragment_ = `\nvoid main() {\n\toutColor = vec4(0.0, 0.0, 0.0, 1.0);\n}\n`;\n\n//\nexport const DefaultWebGLMeshVertex = DefaultWebGLVertexAttributes_ + DefaultWebGLUniform_ + DefaultWebGLMeshVertex_;\nexport const DefaultWebGL2MeshVertex = DefaultWebGL2VertexAttributes_ + DefaultWebGLUniform_ + DefaultWebGLMeshVertex_;\nexport const DefaultWebGLFlatFragment = DefaultWebGLFragmentAttributes_ + DefaultWebGLUniform_ + DefaultWebGLFlatFragment_;\nexport const DefaultWebGL2FlatFragment = DefaultWebGL2FragmentAttributes_ + DefaultWebGLUniform_ + DefaultWebGL2FlatFragment_;\nexport const DefaultWebGLMeshFragment = DefaultWebGLFragmentAttributes_ + DefaultWebGLUniform_ + DefaultWebGLMeshFragment_;\nexport const DefaultWebGL2MeshFragment = DefaultWebGL2FragmentAttributes_ + DefaultWebGLUniform_ + DefaultWebGL2MeshFragment_;\n//\nexport const DefaultWebGLBufferVertex = DefaultWebGLVertexAttributes_ + DefaultWebGLUniform_ + DefaultWebGLFlatVertex_;\nexport const DefaultWebGL2BufferVertex = DefaultWebGL2VertexAttributes_ + DefaultWebGLUniform_ + DefaultWebGLFlatVertex_;\nexport const DefaultWebGLBufferFragment = DefaultWebGLFragmentAttributes_ + DefaultWebGLUniform_ + DefaultWebGLBufferFragment_;\nexport const DefaultWebGL2BufferFragment = DefaultWebGL2FragmentAttributes_ + DefaultWebGLUniform_ + DefaultWebGL2BufferFragment_;\n//\n\n","import promiseFinally from './finally';\nimport allSettled from './allSettled';\n\n// Store setTimeout reference so promise-polyfill will be unaffected by\n// other code modifying setTimeout (like sinon.useFakeTimers())\nvar setTimeoutFunc = setTimeout;\n\nfunction isArray(x) {\n  return Boolean(x && typeof x.length !== 'undefined');\n}\n\nfunction noop() {}\n\n// Polyfill for Function.prototype.bind\nfunction bind(fn, thisArg) {\n  return function() {\n    fn.apply(thisArg, arguments);\n  };\n}\n\n/**\n * @constructor\n * @param {Function} fn\n */\nfunction Promise(fn) {\n  if (!(this instanceof Promise))\n    throw new TypeError('Promises must be constructed via new');\n  if (typeof fn !== 'function') throw new TypeError('not a function');\n  /** @type {!number} */\n  this._state = 0;\n  /** @type {!boolean} */\n  this._handled = false;\n  /** @type {Promise|undefined} */\n  this._value = undefined;\n  /** @type {!Array<!Function>} */\n  this._deferreds = [];\n\n  doResolve(fn, this);\n}\n\nfunction handle(self, deferred) {\n  while (self._state === 3) {\n    self = self._value;\n  }\n  if (self._state === 0) {\n    self._deferreds.push(deferred);\n    return;\n  }\n  self._handled = true;\n  Promise._immediateFn(function() {\n    var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n      return;\n    }\n    var ret;\n    try {\n      ret = cb(self._value);\n    } catch (e) {\n      reject(deferred.promise, e);\n      return;\n    }\n    resolve(deferred.promise, ret);\n  });\n}\n\nfunction resolve(self, newValue) {\n  try {\n    // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n    if (newValue === self)\n      throw new TypeError('A promise cannot be resolved with itself.');\n    if (\n      newValue &&\n      (typeof newValue === 'object' || typeof newValue === 'function')\n    ) {\n      var then = newValue.then;\n      if (newValue instanceof Promise) {\n        self._state = 3;\n        self._value = newValue;\n        finale(self);\n        return;\n      } else if (typeof then === 'function') {\n        doResolve(bind(then, newValue), self);\n        return;\n      }\n    }\n    self._state = 1;\n    self._value = newValue;\n    finale(self);\n  } catch (e) {\n    reject(self, e);\n  }\n}\n\nfunction reject(self, newValue) {\n  self._state = 2;\n  self._value = newValue;\n  finale(self);\n}\n\nfunction finale(self) {\n  if (self._state === 2 && self._deferreds.length === 0) {\n    Promise._immediateFn(function() {\n      if (!self._handled) {\n        Promise._unhandledRejectionFn(self._value);\n      }\n    });\n  }\n\n  for (var i = 0, len = self._deferreds.length; i < len; i++) {\n    handle(self, self._deferreds[i]);\n  }\n  self._deferreds = null;\n}\n\n/**\n * @constructor\n */\nfunction Handler(onFulfilled, onRejected, promise) {\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, self) {\n  var done = false;\n  try {\n    fn(\n      function(value) {\n        if (done) return;\n        done = true;\n        resolve(self, value);\n      },\n      function(reason) {\n        if (done) return;\n        done = true;\n        reject(self, reason);\n      }\n    );\n  } catch (ex) {\n    if (done) return;\n    done = true;\n    reject(self, ex);\n  }\n}\n\nPromise.prototype['catch'] = function(onRejected) {\n  return this.then(null, onRejected);\n};\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  // @ts-ignore\n  var prom = new this.constructor(noop);\n\n  handle(this, new Handler(onFulfilled, onRejected, prom));\n  return prom;\n};\n\nPromise.prototype['finally'] = promiseFinally;\n\nPromise.all = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!isArray(arr)) {\n      return reject(new TypeError('Promise.all accepts an array'));\n    }\n\n    var args = Array.prototype.slice.call(arr);\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n\n    function res(i, val) {\n      try {\n        if (val && (typeof val === 'object' || typeof val === 'function')) {\n          var then = val.then;\n          if (typeof then === 'function') {\n            then.call(\n              val,\n              function(val) {\n                res(i, val);\n              },\n              reject\n            );\n            return;\n          }\n        }\n        args[i] = val;\n        if (--remaining === 0) {\n          resolve(args);\n        }\n      } catch (ex) {\n        reject(ex);\n      }\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.allSettled = allSettled;\n\nPromise.resolve = function(value) {\n  if (value && typeof value === 'object' && value.constructor === Promise) {\n    return value;\n  }\n\n  return new Promise(function(resolve) {\n    resolve(value);\n  });\n};\n\nPromise.reject = function(value) {\n  return new Promise(function(resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!isArray(arr)) {\n      return reject(new TypeError('Promise.race accepts an array'));\n    }\n\n    for (var i = 0, len = arr.length; i < len; i++) {\n      Promise.resolve(arr[i]).then(resolve, reject);\n    }\n  });\n};\n\n// Use polyfill for setImmediate for performance gains\nPromise._immediateFn =\n  // @ts-ignore\n  (typeof setImmediate === 'function' &&\n    function(fn) {\n      // @ts-ignore\n      setImmediate(fn);\n    }) ||\n  function(fn) {\n    setTimeoutFunc(fn, 0);\n  };\n\nPromise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n  if (typeof console !== 'undefined' && console) {\n    console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\n  }\n};\n\nexport default Promise;\n","/**\n * @this {Promise}\n */\nfunction finallyConstructor(callback) {\n  var constructor = this.constructor;\n  return this.then(\n    function(value) {\n      // @ts-ignore\n      return constructor.resolve(callback()).then(function() {\n        return value;\n      });\n    },\n    function(reason) {\n      // @ts-ignore\n      return constructor.resolve(callback()).then(function() {\n        // @ts-ignore\n        return constructor.reject(reason);\n      });\n    }\n  );\n}\n\nexport default finallyConstructor;\n","function allSettled(arr) {\n  var P = this;\n  return new P(function(resolve, reject) {\n    if (!(arr && typeof arr.length !== 'undefined')) {\n      return reject(\n        new TypeError(\n          typeof arr +\n            ' ' +\n            arr +\n            ' is not iterable(cannot read property Symbol(Symbol.iterator))'\n        )\n      );\n    }\n    var args = Array.prototype.slice.call(arr);\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n\n    function res(i, val) {\n      if (val && (typeof val === 'object' || typeof val === 'function')) {\n        var then = val.then;\n        if (typeof then === 'function') {\n          then.call(\n            val,\n            function(val) {\n              res(i, val);\n            },\n            function(e) {\n              args[i] = { status: 'rejected', reason: e };\n              if (--remaining === 0) {\n                resolve(args);\n              }\n            }\n          );\n          return;\n        }\n      }\n      args[i] = { status: 'fulfilled', value: val };\n      if (--remaining === 0) {\n        resolve(args);\n      }\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n}\n\nexport default allSettled;\n","export enum LoggerLevel {\n\tNone = 0,\n\tError = 1,\n\tWarn = 2,\n\tLog = 3,\n}\n\nexport default class Logger {\n\n\tstatic level: LoggerLevel = LoggerLevel.Warn;\n\n\tstatic enabled: boolean = true;\n\n\tstatic log(...datas: any[]) {\n\t\tif (Logger.enabled && Logger.level >= LoggerLevel.Log) {\n\t\t\tconsole.log(...datas);\n\t\t}\n\t}\n\n\tstatic warn(...datas: any[]) {\n\t\tif (Logger.enabled && Logger.level >= LoggerLevel.Warn) {\n\t\t\tconsole.warn(...datas);\n\t\t}\n\t}\n\n\tstatic error(...datas: any[]) {\n\t\tif (Logger.enabled && Logger.level >= LoggerLevel.Error) {\n\t\t\tconsole.error(...datas);\n\t\t}\n\t}\n\n}\n","import 'promise-polyfill';\n\nexport default class Common {\n\tstatic fetch(url: string): Promise<string> {\n\t\t// console.log('Common.fetch', url);\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tconst xhr: XMLHttpRequest = new XMLHttpRequest();\n\t\t\txhr.onload = function () {\n\t\t\t\tresolve(xhr.response || xhr.responseText);\n\t\t\t};\n\t\t\txhr.onerror = function (error) {\n\t\t\t\tconsole.log('Common.error', error);\n\t\t\t\treject(new Error(`Network request failed for url ${url}`));\n\t\t\t};\n\t\t\txhr.ontimeout = function (error) {\n\t\t\t\t// console.log(error);\n\t\t\t\treject(new Error(`Network request failed for url ${url}`));\n\t\t\t};\n\t\t\txhr.onabort = function () {\n\t\t\t\treject(new Error('Aborted'));\n\t\t\t};\n\t\t\txhr.open('GET', url, true);\n\t\t\txhr.send(null);\n\t\t})\n\t}\n\n\tstatic getResource(filepath: string, workpath: string = ''): string {\n\t\tconst resource: string = (filepath.indexOf(':/') === -1) ? Common.join(workpath, filepath) : filepath;\n\t\treturn resource;\n\t}\n\n\tstatic join(...args: string[]): string {\n\t\tlet comps: string[] = [];\n\t\targs.forEach(a => {\n\t\t\tif (a.indexOf('/') === 0) {\n\t\t\t\tcomps = [];\n\t\t\t}\n\t\t\tconst parts = Common.comps(a);\n\t\t\tparts.forEach(x => {\n\t\t\t\tswitch(x) {\n\t\t\t\t\tcase '.':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase '..':\n\t\t\t\t\t\tcomps.pop();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tcomps.push(x);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\treturn comps.join('/');\n\t}\n\n\tstatic dirname(path: string): string {\n\t\t// return path.replace(/\\/[^\\/]+\\.\\w+/, '');\n\t\tconst comps: string[] = Common.comps(path);\n\t\tcomps.pop();\n\t\treturn comps.join('/');\n\t}\n\n\tstatic comps(path: string): string[] {\n\t\treturn path.replace(/\\/$/, '').split(/\\/+/);\n\t}\n}\n","import Common from '../core/common';\nimport Logger from '../logger/logger';\nimport { DefaultWebGL2BufferVertex, DefaultWebGL2FlatFragment, DefaultWebGL2MeshFragment, DefaultWebGL2MeshVertex, DefaultWebGLBufferVertex, DefaultWebGLFlatFragment, DefaultWebGLMeshFragment, DefaultWebGLMeshVertex } from './chunks';\n\nexport enum ContextVersion {\n\tWebGl = 'webgl',\n\tWebGl2 = 'webgl2',\n}\n\nexport enum ContextPrecision {\n\tLowP = 'lowp',\n\tMediumP = 'mediump',\n\tHighP = 'highp',\n}\n\nexport enum ContextMode {\n\tFlat = 'flat',\n\tBox = 'box',\n\tSphere = 'sphere',\n\tTorus = 'torus',\n\tMesh = 'mesh',\n}\n\nexport const ContextDefault = {\n\t'webgl': {\n\t\t'flat': {\n\t\t\tvertex: DefaultWebGLMeshVertex,\n\t\t\tfragment: DefaultWebGLFlatFragment,\n\t\t},\n\t\t'mesh': {\n\t\t\tvertex: DefaultWebGLMeshVertex,\n\t\t\tfragment: DefaultWebGLMeshFragment,\n\t\t}\n\t},\n\t'webgl2': {\n\t\t'flat': {\n\t\t\tvertex: DefaultWebGL2MeshVertex,\n\t\t\tfragment: DefaultWebGL2FlatFragment,\n\t\t},\n\t\t'mesh': {\n\t\t\tvertex: DefaultWebGL2MeshVertex,\n\t\t\tfragment: DefaultWebGL2MeshFragment,\n\t\t}\n\t}\n};\n\nexport enum ContextError {\n\tBrowserSupport = 1,\n\tOther = 2,\n}\n\nexport class ContextVertexBuffers {\n\ttexcoord: WebGLBuffer;\n\tposition: WebGLBuffer;\n}\n\nexport default class Context {\n\n\tstatic precision: ContextPrecision = ContextPrecision.MediumP;\n\tstatic lastError: string = '';\n\n\tstatic getContext_(canvas: HTMLCanvasElement, options?: WebGLContextAttributes): WebGLRenderingContext {\n\t\tconst names = ['webgl', 'experimental-webgl'];\n\t\tlet context = null;\n\t\tfor (let i = 0; i < names.length; ++i) {\n\t\t\ttry {\n\t\t\t\tcontext = canvas.getContext(names[i], options) as WebGLRenderingContext;\n\t\t\t} catch (e) {\n\t\t\t\tif (context) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn context;\n\t}\n\n\tstatic getContext2_(canvas: HTMLCanvasElement, options?: WebGLContextAttributes): WebGL2RenderingContext {\n\t\tlet context = null;\n\t\ttry {\n\t\t\tcontext = canvas.getContext('webgl2', options) as WebGL2RenderingContext;\n\t\t} catch (e) {\n\t\t\t// console.error('GlslCanvas.Context.getContext2_.error', e);\n\t\t}\n\t\treturn context;\n\t}\n\n\tstatic getFragmentVertex(gl: WebGLRenderingContext | WebGL2RenderingContext, fragmentString: string): string {\n\t\tlet vertexString;\n\t\tif (fragmentString) {\n\t\t\tif (Context.isWebGl2(gl)) {\n\t\t\t\tfragmentString = fragmentString.replace(/^\\#version\\s*300\\s*es\\s*\\n/, '');\n\t\t\t}\n\t\t\tconst regexp = /(?:^\\s*)((?:#if|#elif)(?:\\s*)(defined\\s*\\(\\s*VERTEX)(?:\\s*\\))|(?:#ifdef)(?:\\s*VERTEX)(?:\\s*))/gm;\n\t\t\tconst matches = regexp.exec(fragmentString);\n\t\t\tif (matches !== null) {\n\t\t\t\tvertexString = Context.isWebGl2(gl) ? `#version 300 es\n#define VERTEX\n${fragmentString}` : `#define VERTEX\n${fragmentString}`;\n\t\t\t}\n\t\t}\n\t\t// console.log('vertexString', vertexString);\n\t\treturn vertexString;\n\t}\n\n\tstatic getIncludes(input: string | undefined, workpath: string = ''): Promise<string | undefined> {\n\t\tif (input === undefined) {\n\t\t\treturn Promise.resolve(input);\n\t\t}\n\t\tconst regex = /#include\\s*['|\"](.*.glsl)['|\"]/gm;\n\t\tconst promises = [];\n\t\tlet i = 0;\n\t\tlet match;\n\t\twhile ((match = regex.exec(input)) !== null) {\n\t\t\tpromises.push(Promise.resolve(input.slice(i, match.index)));\n\t\t\ti = match.index + match[0].length;\n\t\t\tconst filePath = match[1];\n\t\t\tconst url = Common.getResource(filePath, workpath);\n\t\t\tconst nextWorkpath = filePath.indexOf(':/') === -1 ? Common.dirname(url) : '';\n\t\t\tpromises.push(Common.fetch(url).then(input => Context.getIncludes(input, nextWorkpath)));\n\t\t}\n\t\tpromises.push(Promise.resolve(input.slice(i)));\n\t\treturn Promise.all(promises).then(chunks => {\n\t\t\treturn chunks.join('');\n\t\t});\n\t}\n\n\tstatic isWebGl(context: WebGLRenderingContext | WebGL2RenderingContext): boolean {\n\t\treturn context instanceof WebGLRenderingContext;\n\t}\n\n\tstatic isWebGl2(context: WebGLRenderingContext | WebGL2RenderingContext): boolean {\n\t\t// console.log(context);\n\t\t// return context !== undefined && typeof (context as any).bindBufferRange === 'function';\n\t\treturn (window as any).WebGL2RenderingContext && context instanceof WebGL2RenderingContext;\n\t}\n\n\tstatic inferVersion(vertexString?: string, fragmentString?: string): ContextVersion {\n\t\tconst source: string = vertexString || fragmentString;\n\t\tif (source) {\n\t\t\treturn source.indexOf('#version 300 es') === 0 ? ContextVersion.WebGl2 : ContextVersion.WebGl;\n\t\t} else {\n\t\t\treturn ContextVersion.WebGl;\n\t\t}\n\t}\n\n\tstatic inferPrecision(fragmentString: string): ContextPrecision {\n\t\tconst precision: RegExpMatchArray = fragmentString.match(/precision\\s+(.+)\\s+float/);\n\t\tif (precision && precision.length > 1) {\n\t\t\tContext.precision = precision[1] as ContextPrecision;\n\t\t}\n\t\t// console.log('precision', Context.precision);\n\t\treturn Context.precision;\n\t}\n\n\tstatic versionDiffers(gl: WebGLRenderingContext | WebGL2RenderingContext, vertexString?: string, fragmentString?: string): boolean {\n\t\tif (gl) {\n\t\t\tconst currentVersion = this.isWebGl2(gl) ? ContextVersion.WebGl2 : ContextVersion.WebGl;\n\t\t\tconst newVersion = Context.inferVersion(vertexString, fragmentString);\n\t\t\treturn newVersion !== currentVersion;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tstatic getBufferVertex(gl: WebGLRenderingContext | WebGL2RenderingContext): string {\n\t\treturn this.isWebGl2(gl) ? DefaultWebGL2BufferVertex : DefaultWebGLBufferVertex;\n\t}\n\n\tstatic getVertex(vertexString?: string, fragmentString?: string, mode: ContextMode = ContextMode.Flat): string {\n\t\tif (vertexString) {\n\t\t\treturn vertexString;\n\t\t} else {\n\t\t\tconst version: ContextVersion = this.inferVersion(vertexString, fragmentString);\n\t\t\treturn ContextDefault[version][mode === ContextMode.Flat ? 'flat' : 'mesh'].vertex;\n\t\t}\n\t}\n\n\tstatic getFragment(vertexString?: string, fragmentString?: string, mode: ContextMode = ContextMode.Flat): string {\n\t\tif (fragmentString) {\n\t\t\treturn fragmentString;\n\t\t} else {\n\t\t\tconst version: ContextVersion = this.inferVersion(vertexString, fragmentString);\n\t\t\treturn ContextDefault[version][mode === ContextMode.Flat ? 'flat' : 'mesh'].fragment;\n\t\t}\n\t}\n\n\tstatic tryInferContext(vertexString: string, fragmentString: string, canvas: HTMLCanvasElement, attributes: WebGLContextAttributes, extensions: string[] = [], errorCallback: Function): WebGLRenderingContext | WebGL2RenderingContext {\n\t\tfunction handleError(errorCode: number, html: string) {\n\t\t\tif (typeof errorCallback === 'function') {\n\t\t\t\terrorCallback(errorCode);\n\t\t\t} else {\n\t\t\t\tconst container = canvas.parentNode;\n\t\t\t\tif (container) {\n\t\t\t\t\t(container as HTMLElement).innerHTML = `<div class=\"glsl-canvas--error\">${html}</div>`;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (!WebGLRenderingContext) {\n\t\t\thandleError(ContextError.BrowserSupport, `This page requires a browser that supports WebGL.<br/>\n\t\t\t<a href=\"http://get.webgl.org\">Click here to upgrade your browser.</a>`);\n\t\t\treturn null;\n\t\t}\n\t\tconst context: WebGLRenderingContext | WebGL2RenderingContext = Context.inferContext(vertexString, fragmentString, canvas, attributes);\n\t\tif (!context) {\n\t\t\thandleError(ContextError.Other, `It does not appear your computer can support WebGL.<br/>\n\t\t\t<a href=\"http://get.webgl.org/troubleshooting/\">Click here for more information.</a>`);\n\t\t} else {\n\t\t\tif (!(this.isWebGl2(context)) && extensions.indexOf('OES_standard_derivatives') === -1) {\n\t\t\t\textensions.push('OES_standard_derivatives');\n\t\t\t}\n\t\t\tconst supportedExtensions = context.getSupportedExtensions();\n\t\t\textensions.forEach(key => {\n\t\t\t\tif (supportedExtensions.indexOf(key) !== -1) {\n\t\t\t\t\tcontext.getExtension(key);\n\t\t\t\t} else {\n\t\t\t\t\tLogger.warn(`GlslCanvas ${key} not supported`);\n\t\t\t\t}\n\t\t\t});\n\t\t\t// context.getExtension('OES_standard_derivatives');\n\t\t}\n\t\treturn context;\n\t}\n\n\tstatic tryGetContext(canvas: HTMLCanvasElement, attributes: WebGLContextAttributes, errorCallback: Function): WebGLRenderingContext {\n\t\tfunction handleError(errorCode: number, html: string) {\n\t\t\tif (typeof errorCallback === 'function') {\n\t\t\t\terrorCallback(errorCode);\n\t\t\t} else {\n\t\t\t\tconst container = canvas.parentNode;\n\t\t\t\tif (container) {\n\t\t\t\t\t(container as HTMLElement).innerHTML = `<div class=\"glsl-canvas--error\">${html}</div>`;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (!WebGLRenderingContext) {\n\t\t\thandleError(ContextError.BrowserSupport, `This page requires a browser that supports WebGL.<br/>\n\t\t\t<a href=\"http://get.webgl.org\">Click here to upgrade your browser.</a>`);\n\t\t\treturn null;\n\t\t}\n\t\tconst context: WebGLRenderingContext = Context.getContext_(canvas, attributes);\n\t\tif (!context) {\n\t\t\thandleError(ContextError.Other, `It does not appear your computer can support WebGL.<br/>\n\t\t\t<a href=\"http://get.webgl.org/troubleshooting/\">Click here for more information.</a>`);\n\t\t} else {\n\t\t\tcontext.getExtension('OES_standard_derivatives');\n\t\t}\n\t\treturn context;\n\t}\n\n\tstatic inferContext(vertexString: string, fragmentString: string, canvas: HTMLCanvasElement, options?: WebGLContextAttributes): WebGLRenderingContext | WebGL2RenderingContext {\n\t\tconst version: ContextVersion = this.inferVersion(vertexString, fragmentString);\n\t\treturn version === ContextVersion.WebGl2 ? this.getContext2_(canvas, options) : this.getContext_(canvas, options);\n\t}\n\n\tstatic createShader(gl: WebGLRenderingContext | WebGL2RenderingContext, source: string, type: number, offset: number = 0): WebGLShader {\n\t\tconst shader = gl.createShader(type);\n\t\tsource = source.replace(/precision\\s+(.+)\\s+float/, `precision ${Context.precision} float`);\n\t\tgl.shaderSource(shader, source);\n\t\tgl.compileShader(shader);\n\t\tconst compiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n\t\tif (!compiled) {\n\t\t\t// Something went wrong during compilation; get the error\n\t\t\tContext.lastError = gl.getShaderInfoLog(shader);\n\t\t\t// console.log('lastError', Context.lastError);\n\t\t\tLogger.error(`*** Error compiling shader: ${Context.lastError}`);\n\t\t\t// main.trigger('error', {\n\t\t\tgl.deleteShader(shader);\n\t\t\tthrow ({\n\t\t\t\tshader: shader,\n\t\t\t\tsource: source,\n\t\t\t\ttype: type,\n\t\t\t\terror: Context.lastError,\n\t\t\t\toffset: offset\n\t\t\t});\n\t\t}\n\t\treturn shader;\n\t}\n\n\tstatic createProgram(gl: WebGLRenderingContext | WebGL2RenderingContext, shaders: WebGLShader[], attributes?: any[], locations?: number[]): WebGLProgram {\n\t\tconst program = gl.createProgram();\n\t\tfor (let i = 0; i < shaders.length; ++i) {\n\t\t\tgl.attachShader(program, shaders[i]);\n\t\t}\n\t\tif (attributes && locations) {\n\t\t\tfor (let i = 0; i < attributes.length; ++i) {\n\t\t\t\tgl.bindAttribLocation(program, locations ? locations[i] : i, attributes[i]);\n\t\t\t}\n\t\t}\n\t\tgl.linkProgram(program);\n\t\tgl.validateProgram(program);\n\t\t// Check the link status\n\t\tconst linked = gl.getProgramParameter(program, gl.LINK_STATUS);\n\t\tif (!linked) {\n\t\t\t// something went wrong with the link\n\t\t\tContext.lastError = gl.getProgramInfoLog(program);\n\t\t\tLogger.error(`Error in program linking: ${Context.lastError}`);\n\t\t\tgl.deleteProgram(program);\n\t\t\treturn null;\n\t\t}\n\t\tgl.useProgram(program);\n\t\treturn program;\n\t}\n\n\tstatic createVertexBuffers(gl: WebGLRenderingContext | WebGL2RenderingContext, program: WebGLProgram): ContextVertexBuffers {\n\t\tconst vertexBuffers: ContextVertexBuffers = new ContextVertexBuffers();\n\t\tconst texcoordIndex: number = gl.getAttribLocation(program, 'a_texcoord');\n\t\tvertexBuffers.texcoord = gl.createBuffer();\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffers.texcoord);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array([0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0, 1.0]), gl.STATIC_DRAW);\n\t\tgl.enableVertexAttribArray(texcoordIndex);\n\t\tgl.vertexAttribPointer(texcoordIndex, 2, gl.FLOAT, false, 0, 0);\n\t\tconst positionIndex: number = gl.getAttribLocation(program, 'a_position');\n\t\tvertexBuffers.position = gl.createBuffer();\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffers.position);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array([-1.0, -1.0, 1.0, -1.0, -1.0, 1.0, -1.0, 1.0, 1.0, -1.0, 1.0, 1.0]), gl.STATIC_DRAW);\n\t\tgl.enableVertexAttribArray(positionIndex);\n\t\tgl.vertexAttribPointer(positionIndex, 2, gl.FLOAT, false, 0, 0);\n\t\treturn vertexBuffers;\n\t}\n}\n","import { DefaultWebGL2BufferFragment, DefaultWebGLBufferFragment } from '../context/chunks';\nimport Context from '../context/context';\nimport IterableStringMap from '../core/iterable';\nimport FlatGeometry from '../geometry/flat-geometry';\nimport Geometry from '../geometry/geometry';\n\nexport enum BufferFloatType {\n\tFLOAT = 0,\n\tHALF_FLOAT,\n}\n\nexport class Buffer {\n\n\ttexture: WebGLTexture;\n\tbuffer: WebGLFramebuffer;\n\tBW: number;\n\tBH: number;\n\tindex: number;\n\n\tstatic type: BufferFloatType = BufferFloatType.HALF_FLOAT;\n\n\tstatic getFloatType(gl: WebGLRenderingContext | WebGL2RenderingContext): number | null {\n\t\tlet extension: any;\n\t\tif (Context.isWebGl2(gl)) {\n\t\t\textension = gl.getExtension('EXT_color_buffer_float');\n\t\t\tif (extension) {\n\t\t\t\treturn gl.FLOAT;\n\t\t\t}\n\t\t}\n\t\textension = gl.getExtension('OES_texture_float');\n\t\tif (extension) {\n\t\t\treturn gl.FLOAT;\n\t\t}\n\t\treturn null;\n\t}\n\n\tstatic getHalfFloatType(gl: WebGLRenderingContext | WebGL2RenderingContext): number | null {\n\t\tlet extension: any;\n\t\tif (Context.isWebGl2(gl)) {\n\t\t\textension = gl.getExtension('EXT_color_buffer_half_float') || gl.getExtension('EXT_color_buffer_float');\n\t\t\tif (extension) {\n\t\t\t\treturn (gl as WebGL2RenderingContext).HALF_FLOAT;\n\t\t\t}\n\t\t}\n\t\textension = gl.getExtension('OES_texture_half_float');\n\t\tif (extension) {\n\t\t\treturn extension.HALF_FLOAT_OES || null;\n\t\t}\n\t\treturn null;\n\t}\n\n\tstatic getInternalFormat(gl: WebGLRenderingContext | WebGL2RenderingContext): number {\n\t\treturn (Context.isWebGl2(gl) ? (gl as WebGL2RenderingContext).RGBA16F : gl.RGBA);\n\t}\n\n\tstatic getType(gl: WebGLRenderingContext | WebGL2RenderingContext): number {\n\t\tlet type: number;\n\t\tif (Buffer.type === BufferFloatType.HALF_FLOAT) {\n\t\t\ttype = Buffer.getHalfFloatType(gl);\n\t\t\tif (type) {\n\t\t\t\treturn type;\n\t\t\t} else {\n\t\t\t\tBuffer.type = BufferFloatType.FLOAT;\n\t\t\t\treturn Buffer.getType(gl);\n\t\t\t}\n\t\t} else {\n\t\t\ttype = Buffer.getFloatType(gl);\n\t\t\tif (type) {\n\t\t\t\treturn type;\n\t\t\t} else {\n\t\t\t\tBuffer.type = BufferFloatType.HALF_FLOAT;\n\t\t\t\treturn Buffer.getType(gl);\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic getTexture(gl: WebGLRenderingContext | WebGL2RenderingContext, BW: number, BH: number, index: number): WebGLTexture {\n\t\tconst internalFormat = Buffer.getInternalFormat(gl);\n\t\tconst format = gl.RGBA;\n\t\tconst type = Buffer.getType(gl);\n\t\tconst texture = gl.createTexture();\n\t\tgl.activeTexture(gl.TEXTURE0 + index);\n\t\tgl.bindTexture(gl.TEXTURE_2D, texture);\n\t\tgl.texImage2D(gl.TEXTURE_2D, 0, internalFormat, BW, BH, 0, format, type, null);\n\t\tconst status = gl.checkFramebufferStatus(gl.FRAMEBUFFER);\n\t\tif (status !== gl.FRAMEBUFFER_COMPLETE) {\n\t\t\tif (Buffer.type === BufferFloatType.FLOAT) {\n\t\t\t\tBuffer.type = BufferFloatType.HALF_FLOAT;\n\t\t\t} else {\n\t\t\t\tBuffer.type = BufferFloatType.FLOAT;\n\t\t\t}\n\t\t\treturn Buffer.getTexture(gl, BW, BH, index);\n\t\t}\n\t\t// console.log('getTexture', 'internalFormat', internalFormat === (gl as WebGL2RenderingContext).RGBA16F, 'format', format === gl.RGBA, 'type', type === (gl as WebGL2RenderingContext).HALF_FLOAT, 'status', status === gl.FRAMEBUFFER_COMPLETE);\n\t\treturn texture;\n\t}\n\n\tconstructor(gl: WebGLRenderingContext | WebGL2RenderingContext, BW: number, BH: number, index: number) {\n\t\tconst buffer = gl.createFramebuffer();\n\t\tconst texture = Buffer.getTexture(gl, BW, BH, index);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\t\tthis.texture = texture;\n\t\tthis.buffer = buffer;\n\t\tthis.BW = BW;\n\t\tthis.BH = BH;\n\t\tthis.index = index;\n\t}\n\n\tresize(gl: WebGLRenderingContext | WebGL2RenderingContext, BW: number, BH: number) {\n\t\tif (BW !== this.BW || BH !== this.BH) {\n\t\t\tconst buffer = this.buffer;\n\t\t\tconst texture = this.texture;\n\t\t\tconst index = this.index;\n\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, buffer);\n\t\t\tconst status = gl.checkFramebufferStatus(gl.FRAMEBUFFER);\n\t\t\tconst minW = Math.min(BW, this.BW);\n\t\t\tconst minH = Math.min(BH, this.BH);\n\t\t\tlet pixels: Float32Array;\n\t\t\tlet type = Buffer.getType(gl);\n\t\t\tif (status === gl.FRAMEBUFFER_COMPLETE) {\n\t\t\t\tpixels = new Float32Array(minW * minH * 4);\n\t\t\t\tgl.readPixels(0, 0, minW, minH, gl.RGBA, type, pixels);\n\t\t\t}\n\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\t\t\tconst newIndex = index + 1; // temporary index\n\t\t\tconst newTexture = Buffer.getTexture(gl, BW, BH, newIndex);\n\t\t\ttype = Buffer.getType(gl);\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\t\t\tif (pixels) {\n\t\t\t\tgl.texSubImage2D(gl.TEXTURE_2D, 0, 0, 0, minW, minH, gl.RGBA, type, pixels);\n\t\t\t}\n\t\t\tconst newBuffer = gl.createFramebuffer();\n\t\t\t/*\n\t\t\tif (!newBuffer) {\n\t\t\t\tLogger.error('Failed to create the frame buffer object');\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\t*/\n\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\t\t\tgl.deleteTexture(texture);\n\t\t\tgl.activeTexture(gl.TEXTURE0 + index);\n\t\t\tgl.bindTexture(gl.TEXTURE_2D, newTexture);\n\t\t\tthis.index = index;\n\t\t\tthis.texture = newTexture;\n\t\t\tthis.buffer = newBuffer;\n\t\t\tthis.BW = BW;\n\t\t\tthis.BH = BH;\n\t\t\t// console.log('resize', newBuffer);\n\t\t}\n\t}\n}\n\nexport class IOBuffer {\n\n\tprogram: WebGLProgram;\n\tgeometry: Geometry;\n\tinput: Buffer;\n\toutput: Buffer;\n\tindex: number;\n\tkey: string;\n\tvertexString: string;\n\tfragmentString: string;\n\tBW: number;\n\tBH: number;\n\tisValid: boolean = false;\n\n\tconstructor(index: number, key: string, vertexString: string, fragmentString: string) {\n\t\tthis.index = index;\n\t\tthis.key = key;\n\t\tthis.vertexString = vertexString;\n\t\tthis.fragmentString = fragmentString;\n\t\tthis.geometry = new FlatGeometry();\n\t}\n\n\tcreate(gl: WebGLRenderingContext | WebGL2RenderingContext, BW: number, BH: number) {\n\t\t// BW = BH = 1024;\n\t\tconst vertexShader = Context.createShader(gl, this.vertexString, gl.VERTEX_SHADER);\n\t\tlet fragmentShader = Context.createShader(gl, this.fragmentString, gl.FRAGMENT_SHADER, 1);\n\t\tif (!fragmentShader) {\n\t\t\tfragmentShader = Context.createShader(gl, Context.isWebGl2(gl) ? DefaultWebGL2BufferFragment : DefaultWebGLBufferFragment, gl.FRAGMENT_SHADER);\n\t\t\tthis.isValid = false;\n\t\t} else {\n\t\t\tthis.isValid = true;\n\t\t}\n\t\tconst program = Context.createProgram(gl, [vertexShader, fragmentShader]);\n\t\tif (!program) {\n\t\t\tthis.isValid = false;\n\t\t\tgl.deleteShader(vertexShader);\n\t\t\tgl.deleteShader(fragmentShader);\n\t\t\treturn;\n\t\t}\n\t\tthis.geometry.create(gl, program);\n\t\tgl.deleteShader(vertexShader);\n\t\tgl.deleteShader(fragmentShader);\n\t\tconst input = new Buffer(gl, BW, BH, this.index + 0);\n\t\tconst output = new Buffer(gl, BW, BH, this.index + 2);\n\t\tthis.program = program;\n\t\tthis.input = input;\n\t\tthis.output = output;\n\t\t// console.log(geometry.position.length / 3, geometry.size);\n\t\t// console.log(gl.getProgramInfoLog(program));\n\t\t// Context.lastError = gl.getProgramInfoLog(program);\n\t\t// Logger.warn(`Error in program linking: ${Context.lastError}`);\n\t}\n\n\trender(gl: WebGLRenderingContext | WebGL2RenderingContext, BW: number, BH: number) {\n\t\t// BW = BH = 1024;\n\t\tgl.useProgram(this.program);\n\t\t// gl.activeTexture(gl.TEXTURE0);\n\t\t// gl.bindTexture(gl.TEXTURE_2D, this.input.texture);\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, this.output.buffer);\n\t\t// gl.bindTexture(gl.TEXTURE_2D, this.output.texture);\n\t\t// console.log(this.output.texture);\n\t\t// console.log('binding', gl.getParameter(gl.FRAMEBUFFER_BINDING));\n\t\t// gl.enable(gl.DEPTH_TEST); // Enable depth testing\n\t\t// gl.depthFunc(gl.LEQUAL); // Near things obscure far things\n\t\tgl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.output.texture, 0);\n\t\tconst status = gl.checkFramebufferStatus(gl.FRAMEBUFFER);\n\t\tif (status === gl.FRAMEBUFFER_COMPLETE) {\n\t\t\t// Clear the canvas before we start drawing on it.\n\t\t\tgl.clearColor(0, 0, 0, 1);  // black\n\t\t\tgl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\t\t}\n\t\t// this.geometry.createAttributes_(gl, this.program);\n\t\t// this.geometry.bindAttributes_(gl, this.program);\n\t\tgl.viewport(0, 0, BW, BH);\n\t\tgl.drawArrays(gl.TRIANGLES, 0, this.geometry.size);\n\t\t// console.log(this.geometry.size);\n\t\t// gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\t\t// console.log(BW, BH);\n\t\t// console.log(gl.getProgramInfoLog(this.program));\n\t\t// swap\n\t\tconst input = this.input;\n\t\t// const output = this.output;\n\t\tthis.input = this.output;\n\t\tthis.output = input;\n\t\t// console.log('swap');\n\t}\n\n\tresize(gl: WebGLRenderingContext | WebGL2RenderingContext, BW: number, BH: number) {\n\t\t// BW = BH = 1024;\n\t\tgl.useProgram(this.program);\n\t\tgl.viewport(0, 0, BW, BH);\n\t\tthis.input.resize(gl, BW, BH);\n\t\tthis.output.resize(gl, BW, BH);\n\t}\n\n\tdestroy(gl: WebGLRenderingContext | WebGL2RenderingContext) {\n\t\tgl.deleteProgram(this.program);\n\t\tthis.program = null;\n\t\tthis.input = null;\n\t\tthis.output = null;\n\t}\n}\n\nexport default class Buffers extends IterableStringMap<IOBuffer> {\n\n\tget count(): number {\n\t\treturn Object.keys(this.values).length * 4;\n\t}\n\n\tstatic getBuffers(gl: WebGLRenderingContext | WebGL2RenderingContext, fragmentString: string, vertexString: string): Buffers {\n\t\tconst buffers: Buffers = new Buffers();\n\t\tlet count = 0;\n\t\tif (fragmentString) {\n\t\t\tif (Context.isWebGl2(gl)) {\n\t\t\t\tfragmentString = fragmentString.replace(/^\\#version\\s*300\\s*es\\s*\\n/, '');\n\t\t\t}\n\t\t\tconst regexp = /(?:^\\s*)((?:#if|#elif)(?:\\s*)(defined\\s*\\(\\s*BUFFER_)(\\d+)(?:\\s*\\))|(?:#ifdef)(?:\\s*BUFFER_)(\\d+)(?:\\s*))/gm;\n\t\t\tlet matches;\n\t\t\twhile ((matches = regexp.exec(fragmentString)) !== null) {\n\t\t\t\tconst i = matches[3] || matches[4];\n\t\t\t\tconst key = 'u_buffer' + i;\n\t\t\t\tconst bufferFragmentString = Context.isWebGl2(gl) ? `#version 300 es\n#define BUFFER_${i}\n${fragmentString}` : `#define BUFFER_${i}\n${fragmentString}`;\n\t\t\t\tconst buffer = new IOBuffer(count, key, vertexString, bufferFragmentString);\n\t\t\t\tbuffer.create(gl, gl.drawingBufferWidth, gl.drawingBufferHeight);\n\t\t\t\tif (buffer.program) {\n\t\t\t\t\tbuffers.set(key, buffer);\n\t\t\t\t} else {\n\t\t\t\t\tthrow (`buffer error ${key}`);\n\t\t\t\t}\n\t\t\t\tcount += 4;\n\t\t\t}\n\t\t}\n\t\treturn buffers;\n\t}\n}\n","export class NumberMap<T> { [key: number]: T; };\nexport class StringMap<T> { [key: string]: T; };\n\nexport default class IterableStringMap<T> {\n\n\tvalues: StringMap<T> = new StringMap<T>();\n\n\thas(key: string) {\n\t\treturn key in this.values;\n\t\t// return this.values.hasOwnProperty(key);\n\t}\n\n\tset(key: string, item: T) {\n\t\tthis.values[key] = item;\n\t}\n\n\tget(key: string): T {\n\t\treturn this.values[key];\n\t}\n\n\tforEach(callbackfn: Function) {\n\t\tlet i = 0;\n\t\tObject.keys(this.values).forEach((key) => {\n\t\t\tcallbackfn(this.values[key], i, this.values);\n\t\t\ti++;\n\t\t});\n\t}\n\n\treduce(callbackfn: Function, initialValue?: any) {\n\t\tlet previous = initialValue, i = 0;\n\t\tObject.keys(this.values).forEach((key) => {\n\t\t\tprevious = callbackfn(previous, this.values[key], i, this.values);\n\t\t\ti++;\n\t\t});\n\t\treturn previous;\n\t}\n\n}\n","export interface IGeometry {\n\tpositions: number[];\n\tcolors: number[];\n\tnormals: number[];\n\ttexcoords: number[];\n}\n\nexport default class Geometry implements IGeometry {\n\n\tpositions: number[];\n\tcolors: number[];\n\tnormals: number[];\n\ttexcoords: number[];\n\n\tpositionBuffer: WebGLBuffer;\n\tcolorBuffer: WebGLBuffer;\n\tnormalBuffer: WebGLBuffer;\n\ttexcoordBuffer: WebGLBuffer;\n\n\tpositionLocation: number;\n\tcolorLocation: number;\n\tnormalLocation: number;\n\ttexcoordLocation: number;\n\n\tsize: number;\n\n\tconstructor(options?: IGeometry) {\n\t\tif (options) {\n\t\t\tObject.assign(this, options);\n\t\t\tif (this.positions) {\n\t\t\t\tthis.size = this.positions.length / 3;\n\t\t\t}\n\t\t\t// this.positions = Geometry.fromIndices(options.indices, options.positions, 3);\n\t\t\t// this.normals = Geometry.fromIndices(options.indices, options.normals, 3);\n\t\t\t// this.texcoords = Geometry.fromIndices(options.indices, options.texcoords, 2);\n\t\t\t// this.colors = Geometry.fromIndices(options.indices, options.colors, 4);\n\t\t}\n\t}\n\n\tcreate(gl: WebGLRenderingContext | WebGL2RenderingContext, program: WebGLProgram) {\n\t\tthis.createData_();\n\t\tthis.createAttributes_(gl, program);\n\t}\n\n\tcreateBufferData_(gl: WebGLRenderingContext | WebGL2RenderingContext, type: number, array: BufferSource) {\n\t\tconst buffer = gl.createBuffer();\n\t\tgl.bindBuffer(type, buffer);\n\t\tgl.bufferData(type, array, gl.STATIC_DRAW);\n\t\treturn buffer;\n\t}\n\n\tcreateAttribLocation_(gl: WebGLRenderingContext | WebGL2RenderingContext, program: WebGLProgram, name: string, size: number, type: number) {\n\t\tconst location: number = gl.getAttribLocation(program, name);\n\t\tgl.enableVertexAttribArray(location);\n\t\tgl.vertexAttribPointer(location, size, type, false, 0, 0);\n\t\treturn location;\n\t}\n\n\tcreateAttributes_(gl: WebGLRenderingContext | WebGL2RenderingContext, program: WebGLProgram) {\n\t\tif (this.positions) {\n\t\t\tthis.positionBuffer = this.createBufferData_(gl, gl.ARRAY_BUFFER, new Float32Array(this.positions));\n\t\t\tthis.positionLocation = this.createAttribLocation_(gl, program, 'a_position', this.positions.length / this.size, gl.FLOAT);\n\t\t\tgl.bindAttribLocation(program, this.positionLocation, 'a_position');\n\t\t}\n\t\tif (this.texcoords) {\n\t\t\tthis.texcoordBuffer = this.createBufferData_(gl, gl.ARRAY_BUFFER, new Float32Array(this.texcoords));\n\t\t\tthis.texcoordLocation = this.createAttribLocation_(gl, program, 'a_texcoord', this.texcoords.length / this.size, gl.FLOAT);\n\t\t\tgl.bindAttribLocation(program, this.texcoordLocation, 'a_texcoord');\n\t\t}\n\t\tif (this.normals) {\n\t\t\tthis.normalBuffer = this.createBufferData_(gl, gl.ARRAY_BUFFER, new Float32Array(this.normals));\n\t\t\tthis.normalLocation = this.createAttribLocation_(gl, program, 'a_normal', this.normals.length / this.size, gl.FLOAT);\n\t\t\tgl.bindAttribLocation(program, this.normalLocation, 'a_normal');\n\t\t}\n\t\tif (this.colors) {\n\t\t\tthis.colorBuffer = this.createBufferData_(gl, gl.ARRAY_BUFFER, new Float32Array(this.colors));\n\t\t\tthis.colorLocation = this.createAttribLocation_(gl, program, 'a_color', this.colors.length / this.size, gl.FLOAT);\n\t\t\tgl.bindAttribLocation(program, this.colorLocation, 'a_color');\n\t\t}\n\t\t// console.log('positionLocation', this.positionLocation);\n\t\t// console.log('texcoordLocation', this.texcoordLocation);\n\t\t// console.log('normalLocation', this.normalLocation);\n\t\t// console.log('colorLocation', this.colorLocation);\n\t}\n\n\tattachAttributes_(gl: WebGLRenderingContext | WebGL2RenderingContext, program: WebGLProgram) {\n\t\tlet attribLocation: number;\n\t\tif (this.positions) {\n\t\t\t// this.positionLocation = this.createAttribLocation_(gl, program, 'a_position', this.positions.length / this.size, gl.FLOAT);\n\t\t\tattribLocation = gl.getAttribLocation(program, 'a_position');\n\t\t\tgl.enableVertexAttribArray(attribLocation);\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.positionBuffer);\n\t\t\tgl.vertexAttribPointer(attribLocation, this.positions.length / this.size, gl.FLOAT, false, 0, 0);\n\t\t\t// gl.bindAttribLocation(program, this.positionLocation, 'a_position');\n\t\t\t// console.log('positionLocation', attribLocation);\n\t\t}\n\t\tif (this.texcoords) {\n\t\t\t// this.texcoordLocation = this.createAttribLocation_(gl, program, 'a_texcoord', this.texcoords.length / this.size, gl.FLOAT);\n\t\t\tattribLocation = gl.getAttribLocation(program, 'a_texcoord');\n\t\t\tgl.enableVertexAttribArray(this.texcoordLocation);\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.texcoordBuffer);\n\t\t\tgl.vertexAttribPointer(this.texcoordLocation, this.texcoords.length / this.size, gl.FLOAT, false, 0, 0);\n\t\t\t// gl.bindAttribLocation(program, this.texcoordLocation, 'a_texcoord');\n\t\t\t// console.log('texcoordLocation', attribLocation);\n\t\t}\n\t\tif (this.normals) {\n\t\t\t// this.normalLocation = this.createAttribLocation_(gl, program, 'a_normal', this.normals.length / this.size, gl.FLOAT);\n\t\t\tattribLocation = gl.getAttribLocation(program, 'a_normal');\n\t\t\tgl.enableVertexAttribArray(this.normalLocation);\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.normalBuffer);\n\t\t\tgl.vertexAttribPointer(this.normalLocation, this.normals.length / this.size, gl.FLOAT, false, 0, 0);\n\t\t\t// gl.bindAttribLocation(program, this.normalLocation, 'a_normal');\n\t\t\t// console.log('normalLocation', attribLocation);\n\t\t}\n\t\tif (this.colors) {\n\t\t\t// this.colorLocation = this.createAttribLocation_(gl, program, 'a_color', this.colors.length / this.size, gl.FLOAT);\n\t\t\tattribLocation = gl.getAttribLocation(program, 'a_color');\n\t\t\tgl.enableVertexAttribArray(this.colorLocation);\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.colorBuffer);\n\t\t\tgl.vertexAttribPointer(this.colorLocation, this.colors.length / this.size, gl.FLOAT, false, 0, 0);\n\t\t\t// gl.bindAttribLocation(program, this.colorLocation, 'a_color');\n\t\t\t// console.log('colorLocation', attribLocation);\n\t\t}\n\t}\n\n\tbindAttributes_(gl: WebGLRenderingContext | WebGL2RenderingContext, program: WebGLProgram) {\n\t\tif (this.positions) {\n\t\t\tgl.bindAttribLocation(program, this.positionLocation, 'a_position');\n\t\t}\n\t\tif (this.texcoords) {\n\t\t\tgl.bindAttribLocation(program, this.texcoordLocation, 'a_texcoord');\n\t\t}\n\t\tif (this.normals) {\n\t\t\tgl.bindAttribLocation(program, this.normalLocation, 'a_normal');\n\t\t}\n\t\tif (this.colors) {\n\t\t\tgl.bindAttribLocation(program, this.colorLocation, 'a_color');\n\t\t}\n\t}\n\n\tprotected createData_() {\n\t\t// Now create an array of positions for the cube.\n\t\tthis.positions = [];\n\t\tthis.normals = [];\n\t\tthis.texcoords = [];\n\t\tthis.colors = [];\n\t\tthis.size = 0;\n\t\t// console.log('positions', this.positions.length);\n\t\t// console.log('normals', this.normals.length);\n\t\t// console.log('texcoords', this.texcoords.length);\n\t\t// console.log('colors', this.colors.length);\n\t}\n\n\tstatic fromIndices(indices: number[], array: number[], size: number): number[] {\n\t\tconst buffer: number[] = [];\n\t\tindices.forEach(i => {\n\t\t\tbuffer.push.apply(buffer, array.slice(i * size, i * size + size));\n\t\t});\n\t\treturn buffer;\n\t}\n\n}\n","import Geometry from './geometry';\n\nexport default class FlatGeometry extends Geometry {\n\n\tprotected createData_() {\n\t\tthis.size = 6;\n\t\tthis.positions = [\n\t\t\t-1.0, -1.0, 0.0, 1.0, -1.0, 0.0, 1.0, 1.0, 0.0,\n\t\t\t-1.0, -1.0, 0.0, 1.0, 1.0, 0.0, -1.0, 1.0, 0.0,\n\t\t];\n\t\tthis.texcoords = [\n\t\t\t0.0, 0.0, 1.0, 0.0, 1.0, 1.0,\n\t\t\t0.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n\t\t];\n\t\tthis.normals = [\n\t\t\t0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0,\n\t\t\t0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0,\n\t\t];\n\t\tthis.colors = [\n\t\t\t1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0,\n\t\t\t1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0,\n\t\t];\n\t\t// console.log('positions', this.positions.length);\n\t\t// console.log('normals', this.normals.length);\n\t\t// console.log('texcoords', this.texcoords.length);\n\t\t// console.log('colors', this.colors.length);\n\t}\n\n}\n","export default class Vector2 {\n\n\tisVector2: boolean = true;\n\tx: number;\n\ty: number;\n\n\tconstructor(x: number = 0, y: number = 0) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t}\n\n\tcopy(v: Vector2): Vector2 {\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\treturn this;\n\t}\n\n\tlength(): number {\n\t\treturn Math.sqrt(this.x * this.x + this.y * this.y);\n\t}\n\n\tnormalize(): Vector2 {\n\t\treturn this.divideScalar(this.length() || 1);\n\t}\n\n\tdivideScalar(scalar: number): Vector2 {\n\t\treturn this.multiplyScalar(1 / scalar);\n\t}\n\n\tmultiplyScalar(scalar: number): Vector2 {\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\treturn this;\n\t}\n\n\tsubVectors(a: Vector2, b: Vector2): Vector2 {\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\treturn this;\n\t}\n\n\taddVectors(a: Vector2, b: Vector2): Vector2 {\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\treturn this;\n\t}\n\n}\n\n","export default class Vector3 {\n\n\tisVector3: boolean = true;\n\tx: number;\n\ty: number;\n\tz: number;\n\n\tconstructor(x: number = 0, y: number = 0, z: number = 0) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t}\n\n\tcopy(v: Vector3): Vector3 {\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\t\treturn this;\n\t}\n\n\tlength(): number {\n\t\treturn Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n\t}\n\n\tnormalize(): Vector3 {\n\t\treturn this.divideScalar(this.length() || 1);\n\t}\n\n\n\tdivideScalar(scalar: number): Vector3 {\n\t\treturn this.multiplyScalar(1 / scalar);\n\t}\n\n\tmultiplyScalar(scalar: number): Vector3 {\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\t\treturn this;\n\t}\n\n\tsubVectors(a: Vector3, b: Vector3): Vector3 {\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\t\treturn this;\n\t}\n\n\taddVectors(a: Vector3, b: Vector3): Vector3 {\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\t\treturn this;\n\t}\n\n\tcrossVectors(a: Vector3, b: Vector3): Vector3 {\n\t\tvar ax = a.x, ay = a.y, az = a.z;\n\t\tvar bx = b.x, by = b.y, bz = b.z;\n\t\tthis.x = ay * bz - az * by;\n\t\tthis.y = az * bx - ax * bz;\n\t\tthis.z = ax * by - ay * bx;\n\t\treturn this;\n\t}\n\n\t/*\n\tset(x, y, z) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\treturn this;\n\t}\n\n\tsetScalar(scalar) {\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\t\treturn this;\n\t}\n\n\tsetX(x) {\n\t\tthis.x = x;\n\t\treturn this;\n\t}\n\n\tsetY(y) {\n\t\tthis.y = y;\n\t\treturn this;\n\t}\n\n\tsetZ(z) {\n\t\tthis.z = z;\n\t\treturn this;\n\t}\n\n\tsetComponent(index, value) {\n\t\tswitch (index) {\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tdefault: throw new Error('index is out of range: ' + index);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tgetComponent(index) {\n\t\tswitch (index) {\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tdefault: throw new Error('index is out of range: ' + index);\n\t\t}\n\n\t}\n\n\tclone() {\n\t\treturn new Vector3(this.x, this.y, this.z);\n\t}\n\n\tadd(v, w) {\n\t\tif (w !== undefined) {\n\t\t\treturn this.addVectors(v, w);\n\t\t}\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\t\treturn this;\n\t}\n\n\taddScalar(s) {\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\t\treturn this;\n\t}\n\n\taddScaledVector(v, s) {\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\t\treturn this;\n\t}\n\n\tsub(v, w) {\n\t\tif (w !== undefined) {\n\t\t\treturn this.subVectors(v, w);\n\t\t}\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\t\treturn this;\n\t}\n\n\tsubScalar(s) {\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\t\treturn this;\n\t}\n\n\n\tmultiply(v, w) {\n\t\tif (w !== undefined) {\n\t\t\treturn this.multiplyVectors(v, w);\n\t\t}\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\t\treturn this;\n\t}\n\n\tmultiplyVectors(a:Vector3, b:Vector3):Vector3 {\n\t\tthis.x = a.x * b.x;\n\t\tthis.y = a.y * b.y;\n\t\tthis.z = a.z * b.z;\n\t\treturn this;\n\t}\n\n\tapplyMatrix3(m) {\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar e = m.elements;\n\t\tthis.x = e[0] * x + e[3] * y + e[6] * z;\n\t\tthis.y = e[1] * x + e[4] * y + e[7] * z;\n\t\tthis.z = e[2] * x + e[5] * y + e[8] * z;\n\t\treturn this;\n\t}\n\n\tapplyNormalMatrix(m) {\n\t\treturn this.applyMatrix3(m).normalize();\n\t}\n\n\tapplyMatrix4(m) {\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar e = m.elements;\n\t\tvar w = 1 / (e[3] * x + e[7] * y + e[11] * z + e[15]);\n\t\tthis.x = (e[0] * x + e[4] * y + e[8] * z + e[12]) * w;\n\t\tthis.y = (e[1] * x + e[5] * y + e[9] * z + e[13]) * w;\n\t\tthis.z = (e[2] * x + e[6] * y + e[10] * z + e[14]) * w;\n\t\treturn this;\n\t}\n\n\tapplyQuaternion(q) {\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar qx = q.x, qy = q.y, qz = q.z, qw = q.w;\n\t\t// calculate quat * vector\n\t\tvar ix = qw * x + qy * z - qz * y;\n\t\tvar iy = qw * y + qz * x - qx * z;\n\t\tvar iz = qw * z + qx * y - qy * x;\n\t\tvar iw = - qx * x - qy * y - qz * z;\n\t\t// calculate result * inverse quat\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\n\t\treturn this;\n\t}\n\n\tproject(camera) {\n\t\treturn this.applyMatrix4(camera.matrixWorldInverse).applyMatrix4(camera.projectionMatrix);\n\t}\n\n\tunproject(camera) {\n\t\treturn this.applyMatrix4(camera.projectionMatrixInverse).applyMatrix4(camera.matrixWorld);\n\t}\n\n\ttransformDirection(m) {\n\t\t// input: THREE.Matrix4 affine matrix\n\t\t// vector interpreted as a direction\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar e = m.elements;\n\t\tthis.x = e[0] * x + e[4] * y + e[8] * z;\n\t\tthis.y = e[1] * x + e[5] * y + e[9] * z;\n\t\tthis.z = e[2] * x + e[6] * y + e[10] * z;\n\t\treturn this.normalize();\n\t}\n\n\tdivide(v) {\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\t\tthis.z /= v.z;\n\t\treturn this;\n\t}\n\n\tmin(v) {\n\t\tthis.x = Math.min(this.x, v.x);\n\t\tthis.y = Math.min(this.y, v.y);\n\t\tthis.z = Math.min(this.z, v.z);\n\t\treturn this;\n\t}\n\n\tmax(v) {\n\t\tthis.x = Math.max(this.x, v.x);\n\t\tthis.y = Math.max(this.y, v.y);\n\t\tthis.z = Math.max(this.z, v.z);\n\t\treturn this;\n\t}\n\n\tclamp(min, max) {\n\t\t// assumes min < max, componentwise\n\t\tthis.x = Math.max(min.x, Math.min(max.x, this.x));\n\t\tthis.y = Math.max(min.y, Math.min(max.y, this.y));\n\t\tthis.z = Math.max(min.z, Math.min(max.z, this.z));\n\t\treturn this;\n\t}\n\n\tclampScalar(minVal, maxVal) {\n\t\tthis.x = Math.max(minVal, Math.min(maxVal, this.x));\n\t\tthis.y = Math.max(minVal, Math.min(maxVal, this.y));\n\t\tthis.z = Math.max(minVal, Math.min(maxVal, this.z));\n\t\treturn this;\n\t}\n\n\tclampLength(min, max) {\n\t\tvar length = this.length();\n\t\treturn this.divideScalar(length || 1).multiplyScalar(Math.max(min, Math.min(max, length)));\n\t}\n\n\tfloor() {\n\t\tthis.x = Math.floor(this.x);\n\t\tthis.y = Math.floor(this.y);\n\t\tthis.z = Math.floor(this.z);\n\t\treturn this;\n\t}\n\n\tceil() {\n\t\tthis.x = Math.ceil(this.x);\n\t\tthis.y = Math.ceil(this.y);\n\t\tthis.z = Math.ceil(this.z);\n\t\treturn this;\n\t}\n\n\tround() {\n\t\tthis.x = Math.round(this.x);\n\t\tthis.y = Math.round(this.y);\n\t\tthis.z = Math.round(this.z);\n\t\treturn this;\n\t}\n\n\troundToZero() {\n\t\tthis.x = (this.x < 0) ? Math.ceil(this.x) : Math.floor(this.x);\n\t\tthis.y = (this.y < 0) ? Math.ceil(this.y) : Math.floor(this.y);\n\t\tthis.z = (this.z < 0) ? Math.ceil(this.z) : Math.floor(this.z);\n\t\treturn this;\n\t}\n\n\tnegate() {\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\t\treturn this;\n\t}\n\n\tdot(v) {\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\n\t}\n\n\t// TODO lengthSquared?\n\tlengthSq() {\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\n\t}\n\n\tmanhattanLength() {\n\t\treturn Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z);\n\t}\n\n\tsetLength(length) {\n\t\treturn this.normalize().multiplyScalar(length);\n\t}\n\n\tlerp(v, alpha) {\n\t\tthis.x += (v.x - this.x) * alpha;\n\t\tthis.y += (v.y - this.y) * alpha;\n\t\tthis.z += (v.z - this.z) * alpha;\n\t\treturn this;\n\t}\n\n\tlerpVectors(v1, v2, alpha) {\n\t\treturn this.subVectors(v2, v1).multiplyScalar(alpha).add(v1);\n\t}\n\n\tcross(v, w) {\n\t\tif (w !== undefined) {\n\t\t\treturn this.crossVectors(v, w);\n\t\t}\n\t\treturn this.crossVectors(this, v);\n\t}\n\n\tprojectOnVector(v) {\n\t\tvar denominator = v.lengthSq();\n\t\tif (denominator === 0) return this.set(0, 0, 0);\n\t\tvar scalar = v.dot(this) / denominator;\n\t\treturn this.copy(v).multiplyScalar(scalar);\n\t}\n\n\tprojectOnPlane(planeNormal) {\n\t\tconst v = new Vector3();\n\t\tv.copy(this).projectOnVector(planeNormal);\n\t\treturn this.sub(v);\n\t}\n\n\treflect(normal) {\n\t\tconst v = new Vector3();\n\t\treturn this.sub(v.copy(normal).multiplyScalar(2 * this.dot(normal)));\n\t}\n\n\tangleTo(v) {\n\t\tvar denominator = Math.sqrt(this.lengthSq() * v.lengthSq());\n\t\tif (denominator === 0) return Math.PI / 2;\n\t\tvar theta = this.dot(v) / denominator;\n\t\t// clamp, to handle numerical problems\n\t\treturn Math.acos(MathUtils.clamp(theta, - 1, 1));\n\t}\n\n\tdistanceTo(v) {\n\t\treturn Math.sqrt(this.distanceToSquared(v));\n\t}\n\n\tdistanceToSquared(v) {\n\t\tvar dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\n\t\treturn dx * dx + dy * dy + dz * dz;\n\t}\n\n\tmanhattanDistanceTo(v) {\n\t\treturn Math.abs(this.x - v.x) + Math.abs(this.y - v.y) + Math.abs(this.z - v.z);\n\t}\n\n\tsetFromSpherical(s) {\n\t\treturn this.setFromSphericalCoords(s.radius, s.phi, s.theta);\n\t}\n\n\tsetFromSphericalCoords(radius, phi, theta) {\n\t\tvar sinPhiRadius = Math.sin(phi) * radius;\n\t\tthis.x = sinPhiRadius * Math.sin(theta);\n\t\tthis.y = Math.cos(phi) * radius;\n\t\tthis.z = sinPhiRadius * Math.cos(theta);\n\t\treturn this;\n\t}\n\n\tsetFromCylindrical(c) {\n\t\treturn this.setFromCylindricalCoords(c.radius, c.theta, c.y);\n\t}\n\n\tsetFromCylindricalCoords(radius, theta, y) {\n\t\tthis.x = radius * Math.sin(theta);\n\t\tthis.y = y;\n\t\tthis.z = radius * Math.cos(theta);\n\t\treturn this;\n\t}\n\n\tsetFromMatrixPosition(m) {\n\t\tvar e = m.elements;\n\t\tthis.x = e[12];\n\t\tthis.y = e[13];\n\t\tthis.z = e[14];\n\t\treturn this;\n\t}\n\n\tsetFromMatrixScale(m) {\n\t\tvar sx = this.setFromMatrixColumn(m, 0).length();\n\t\tvar sy = this.setFromMatrixColumn(m, 1).length();\n\t\tvar sz = this.setFromMatrixColumn(m, 2).length();\n\t\tthis.x = sx;\n\t\tthis.y = sy;\n\t\tthis.z = sz;\n\t\treturn this;\n\t}\n\n\tsetFromMatrixColumn(m, index) {\n\t\treturn this.fromArray(m.elements, index * 4);\n\t}\n\n\tsetFromMatrix3Column(m, index) {\n\t\treturn this.fromArray(m.elements, index * 3);\n\t}\n\n\tequals(v) {\n\t\treturn ((v.x === this.x) && (v.y === this.y) && (v.z === this.z));\n\t}\n\n\tfromArray(array, offset) {\n\t\tif (offset === undefined) offset = 0;\n\t\tthis.x = array[offset];\n\t\tthis.y = array[offset + 1];\n\t\tthis.z = array[offset + 2];\n\t\treturn this;\n\t}\n\n\ttoArray(array, offset) {\n\t\tif (array === undefined) array = [];\n\t\tif (offset === undefined) offset = 0;\n\t\tarray[offset] = this.x;\n\t\tarray[offset + 1] = this.y;\n\t\tarray[offset + 2] = this.z;\n\t\treturn array;\n\t}\n\n\tfromBufferAttribute(attribute, index) {\n\t\tthis.x = attribute.getX(index);\n\t\tthis.y = attribute.getY(index);\n\t\tthis.z = attribute.getZ(index);\n\t\treturn this;\n\t}\n\n\trandom() {\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\t\tthis.z = Math.random();\n\t\treturn this;\n\t}\n\t*/\n\n}\n\n","\nimport Vector2 from '../math/vector2';\nimport Vector3 from '../math/vector3';\n\nconst PI = Math.PI;\nconst RAD = PI / 180;\n\nexport default class OrbitCamera extends Vector3 {\n\n\ttheta: number;\n\tphi: number;\n\tradius: number;\n\tposition: Vector3 = new Vector3();\n\tvalue: Float32Array = new Float32Array([0, 0, 0]);\n\tmouse: Vector2 = null;\n\tdirty: boolean = false;\n\n\tconstructor(theta?: number, phi?: number, radius?: number) {\n\t\tsuper();\n\t\tthis.theta = (theta || 0) * RAD;\n\t\tthis.phi = (phi || 0) * RAD;\n\t\tthis.radius = radius || 6.0;\n\t\t// this.update();\n\t}\n\n\tdown(x: number, y: number) {\n\t\tthis.mouse = new Vector2(x, y);\n\t}\n\n\tmove(x: number, y: number) {\n\t\tconst mouse = this.mouse;\n\t\tif (mouse && (mouse.x !== x || mouse.y !== y)) {\n\t\t\tconst theta = (x - mouse.x) * 180 * RAD;\n\t\t\tconst phi = (y - mouse.y) * 180 * RAD;\n\t\t\tmouse.x = x;\n\t\t\tmouse.y = y;\n\t\t\tthis.theta += theta;\n\t\t\tthis.phi = Math.max(-60 * RAD, Math.min(60 * RAD, this.phi + phi));\n\t\t\t// this.update();\n\t\t}\n\t}\n\n\tup() {\n\t\tthis.mouse = null;\n\t}\n\n\twheel(d: number) {\n\t\tthis.radius = Math.max(4.0, Math.min(10.0, this.radius + d * 0.02));\n\t}\n\n\tstatic fromVector(vector: Vector3) {\n\t\tconst radius = vector.length();\n\t\tconst theta = Math.acos(vector.y / radius); //theta\n\t\tconst phi = Math.atan(vector.x / vector.z); //phi\n\t\treturn new OrbitCamera(theta, phi, radius);\n\t}\n\n\tstatic toArray(camera: OrbitCamera): number[] {\n        const spr = Math.sin(camera.phi) * camera.radius;\n        const x = spr * Math.sin(camera.theta);\n        const y = Math.cos(camera.phi) * camera.radius;\n        const z = spr * Math.cos(camera.theta);\n        return [x, y, z];\n    }\n}\n","/**\r\n * Common utilities\r\n * @module glMatrix\r\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\r\n * Sets the type of array used when creating new vectors and matrices\r\n *\r\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\r\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\r\n * Convert Degree To Radian\r\n *\r\n * @param {Number} a Angle in Degrees\r\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\r\n * Tests whether or not the arguments have approximately the same value, within an absolute\r\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\r\n * than or equal to 1.0, and a relative tolerance is used for larger values)\r\n *\r\n * @param {Number} a The first number to test.\r\n * @param {Number} b The second number to test.\r\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","import * as glMatrix from \"./common.js\";\n/**\r\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\r\n * @module mat4\r\n */\n\n/**\r\n * Creates a new identity mat4\r\n *\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 initialized with values from an existing matrix\r\n *\r\n * @param {ReadonlyMat4} a matrix to clone\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Copy the values from one mat4 to another\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Create a new mat4 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} A new mat4\r\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set the components of a mat4 to the given values\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} out\r\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set a mat4 to the identity matrix\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @returns {mat4} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat4\r\n *\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\r\n * Multiplies two mat4s\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\r\n * Translate a mat4 by the given vector\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to translate\r\n * @param {ReadonlyVec3} v vector to translate by\r\n * @returns {mat4} out\r\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\r\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to scale\r\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\r\n * @returns {mat4} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Rotates a mat4 by the given angle around the given axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {ReadonlyVec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the X axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Y axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Z axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.scale(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyVec3} v Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle around a given axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotate(dest, dest, rad, axis);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {ReadonlyVec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the X axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateX(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Y axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateY(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Z axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateZ(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation and vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 from a dual quat.\r\n *\r\n * @param {mat4} out Matrix\r\n * @param {ReadonlyQuat2} a Dual Quaternion\r\n * @returns {mat4} mat4 receiving operation result\r\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\r\n * Returns the translation vector component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslation,\r\n *  the returned vector will be the same as the translation vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive translation component\r\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\r\n * Returns the scaling factor component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslationScale\r\n *  with a normalized Quaternion paramter, the returned vector will be\r\n *  the same as the scaling vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive scaling factor component\r\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\r\n * Returns a quaternion representing the rotational component\r\n *  of a transformation matrix. If a matrix is built with\r\n *  fromRotationTranslation, the returned quaternion will be the\r\n *  same as the quaternion originally supplied.\r\n * @param {quat} out Quaternion to receive the rotation component\r\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {quat} out\r\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @param {ReadonlyVec3} s Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     mat4.translate(dest, origin);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *     mat4.translate(dest, negativeOrigin);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @param {ReadonlyVec3} s Scaling vector\r\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Calculates a 4x4 matrix from the given quaternion\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyQuat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat4} out\r\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a frustum matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Number} left Left bound of the frustum\r\n * @param {Number} right Right bound of the frustum\r\n * @param {Number} bottom Bottom bound of the frustum\r\n * @param {Number} top Top bound of the frustum\r\n * @param {Number} near Near bound of the frustum\r\n * @param {Number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given bounds.\r\n * Passing null/undefined/no value for far will generate infinite projection matrix.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} fovy Vertical field of view in radians\r\n * @param {number} aspect Aspect ratio. typically viewport width/height\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum, can be null or Infinity\r\n * @returns {mat4} out\r\n */\n\nexport function perspective(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given field of view.\r\n * This is primarily useful for generating projection matrices to be used\r\n * with the still experiemental WebVR API.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\r\n * Generates a orthogonal projection matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} left Left bound of the frustum\r\n * @param {number} right Right bound of the frustum\r\n * @param {number} bottom Bottom bound of the frustum\r\n * @param {number} top Top bound of the frustum\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function ortho(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\r\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {ReadonlyVec3} eye Position of the viewer\r\n * @param {ReadonlyVec3} center Point the viewer is looking at\r\n * @param {ReadonlyVec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a matrix that makes something look at something else.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {ReadonlyVec3} eye Position of the viewer\r\n * @param {ReadonlyVec3} center Point the viewer is looking at\r\n * @param {ReadonlyVec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Returns a string representation of a mat4\r\n *\r\n * @param {ReadonlyMat4} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\r\n * Returns Frobenius norm of a mat4\r\n *\r\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\r\n * Adds two mat4's\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\r\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat4} out the receiving vector\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyMat4} a The first matrix.\r\n * @param {ReadonlyMat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyMat4} a The first matrix.\r\n * @param {ReadonlyMat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\r\n * Alias for {@link mat4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","// import 'promise-polyfill';\nimport Common from '../core/common';\nimport IterableStringMap from '../core/iterable';\nimport Subscriber from '../core/subscriber';\nimport Logger from '../logger/logger';\n\nexport const TextureImageExtensions = ['jpg', 'jpeg', 'png'];\nexport const TextureVideoExtensions = ['ogv', 'webm', 'mp4'];\nexport const TextureExtensions = TextureImageExtensions.concat(TextureVideoExtensions);\n\nexport enum TextureSourceType {\n\tData = 0,\n\tElement = 1,\n\tUrl = 2,\n}\n\nexport enum TextureFilteringType {\n\tMipMap = 'mipmap',\n\tLinear = 'linear',\n\tNearest = 'nearest',\n}\n\nexport interface ITextureData {\n\tdata: Uint8Array;\n\twidth: number;\n\theight: number;\n}\n\nexport interface ITextureOptions {\n\turl?: string;\n\telement?: HTMLCanvasElement | HTMLImageElement | HTMLVideoElement | HTMLElement | Element;\n\tdata?: Uint8Array;\n\twidth?: number;\n\theight?: number;\n\tfiltering?: TextureFilteringType;\n\trepeat?: boolean;\n\tUNPACK_FLIP_Y_WEBGL?: boolean;\n\tUNPACK_PREMULTIPLY_ALPHA_WEBGL?: number;\n\tTEXTURE_WRAP_S?: number; // gl.REPEAT | gl.CLAMP_TO_EDGE | gl.MIRRORED_REPEAT;\n\tTEXTURE_WRAP_T?: number; // gl.REPEAT | gl.CLAMP_TO_EDGE | gl.MIRRORED_REPEAT;\n}\n\nexport interface ITextureInput {\n\tkey: string;\n\turl: string | HTMLCanvasElement | HTMLImageElement | HTMLVideoElement | Element | ITextureData;\n\toptions?: ITextureOptions;\n}\n\nexport function isTextureData(object: any): object is ITextureData {\n\treturn 'data' in object && 'width' in object && 'height' in object;\n}\n\n// GL texture wrapper object for keeping track of a global set of textures, keyed by a unique user-defined name\nexport class Texture extends Subscriber {\n\n\tkey: string;\n\tindex: number;\n\toptions: ITextureOptions;\n\tworkpath: string;\n\twidth: number;\n\theight: number;\n\n\ttexture: WebGLTexture;\n\tsource: string | HTMLCanvasElement | HTMLImageElement | HTMLVideoElement | Element | Uint8Array;\n\tsourceType: TextureSourceType;\n\tfiltering: TextureFilteringType;\n\turl: string;\n\tvalid: boolean = false;\n\tdirty: boolean = false;\n\tanimated: boolean = false;\n\tpowerOf2: boolean = false;\n\n\tconstructor(\n\t\tgl: WebGLRenderingContext | WebGL2RenderingContext,\n\t\tkey: string,\n\t\tindex: number,\n\t\toptions: ITextureOptions = { filtering: TextureFilteringType.Linear },\n\t\tworkpath?: string,\n\t) {\n\t\tsuper();\n\t\tthis.key = key;\n\t\tthis.index = index;\n\t\tthis.options = options;\n\t\tthis.workpath = workpath;\n\t\tthis.create(gl);\n\t}\n\n\tstatic isPowerOf2(value: number): boolean {\n\t\treturn (value & (value - 1)) === 0;\n\t}\n\n\tstatic isSafari(): boolean {\n\t\treturn /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n\t}\n\n\tstatic isTextureUrl(text: string): boolean {\n\t\treturn text && (/\\.(jpg|jpeg|png|ogv|webm|mp4)$/i).test(text.split('?')[0]);\n\t}\n\n\tstatic isTexture(\n\t\turlElementOrData: string | HTMLCanvasElement | HTMLImageElement | HTMLVideoElement | Element | ITextureData,\n\t): boolean {\n\t\tconst options = Texture.getTextureOptions(urlElementOrData);\n\t\treturn options !== undefined;\n\t}\n\n\tstatic getMaxTextureSize(gl: WebGLRenderingContext | WebGL2RenderingContext): number {\n\t\treturn gl.getParameter(gl.MAX_TEXTURE_SIZE);\n\t};\n\n\tstatic getTextureOptions(\n\t\turlElementOrData: string | HTMLCanvasElement | HTMLImageElement | HTMLVideoElement | Element | ITextureData,\n\t\toptions: ITextureOptions = {}\n\t): ITextureOptions {\n\t\tif (typeof urlElementOrData === 'string' && urlElementOrData !== '') {\n\t\t\tif (Texture.isTextureUrl(urlElementOrData)) {\n\t\t\t\toptions.url = urlElementOrData;\n\t\t\t\tif (urlElementOrData.indexOf('?') !== -1) {\n\t\t\t\t\toptions = urlElementOrData.split('?')[1].split('&').reduce(function (prev: ITextureOptions, curr) {\n\t\t\t\t\t\tconst params = curr.split('=');\n\t\t\t\t\t\tconst key = decodeURIComponent(params[0]);\n\t\t\t\t\t\tconst value = decodeURIComponent(params[1]);\n\t\t\t\t\t\tswitch (key) {\n\t\t\t\t\t\t\tcase 'filtering':\n\t\t\t\t\t\t\t\tprev[key] = value as TextureFilteringType;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'repeat':\n\t\t\t\t\t\t\tcase 'UNPACK_FLIP_Y_WEBGL':\n\t\t\t\t\t\t\t\tprev[key] = Boolean(value);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'UNPACK_PREMULTIPLY_ALPHA_WEBGL':\n\t\t\t\t\t\t\tcase 'TEXTURE_WRAP_S':\n\t\t\t\t\t\t\tcase 'TEXTURE_WRAP_T':\n\t\t\t\t\t\t\t\tprev[key] = Number(value);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn prev;\n\t\t\t\t\t}, options);\n\t\t\t\t}\n\t\t\t\treturn options;\n\t\t\t}\n\t\t\tif (document) {\n\t\t\t\turlElementOrData = document.querySelector(urlElementOrData);\n\t\t\t\t// Logger.log(urlElementOrData);\n\t\t\t}\n\t\t}\n\t\tif (urlElementOrData instanceof HTMLCanvasElement || urlElementOrData instanceof HTMLImageElement || urlElementOrData instanceof HTMLVideoElement) {\n\t\t\toptions.element = urlElementOrData;\n\t\t\treturn options;\n\t\t} else if (isTextureData(urlElementOrData)) {\n\t\t\toptions.data = urlElementOrData.data;\n\t\t\toptions.width = urlElementOrData.width;\n\t\t\toptions.height = urlElementOrData.height;\n\t\t\treturn options;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tcreate(\n\t\tgl: WebGLRenderingContext | WebGL2RenderingContext\n\t): void {\n\t\tthis.texture = gl.createTexture();\n\t\tif (this.texture) {\n\t\t\tthis.valid = true;\n\t\t}\n\t\t// Default to a 1-pixel black texture so we can safely render while we wait for an image to load\n\t\t// See: http://stackoverflow.com/questions/19722247/webgl-wait-for-texture-to-load\n\t\t// [255, 255, 255, 255]\n\t\tthis.setData(gl, 1, 1, new Uint8Array([0, 0, 0, 0]), this.options);\n\t\t// this.bindTexture();\n\t\t// this.load(options);\n\t}\n\n\tload(\n\t\tgl: WebGLRenderingContext | WebGL2RenderingContext,\n\t\toptions: ITextureOptions = {}\n\t): Promise<Texture> {\n\t\tthis.options = options;\n\t\tif (typeof options.url === 'string') {\n\t\t\tif (this.url === undefined || options.url !== this.url) {\n\t\t\t\treturn this.setUrl(gl, options.url, options);\n\t\t\t} else {\n\t\t\t\treturn Promise.resolve(this);\n\t\t\t}\n\t\t} else if (options.element) {\n\t\t\treturn this.setElement(gl, options.element, options);\n\t\t} else if (options.data && options.width && options.height) {\n\t\t\treturn this.setData(gl, options.width, options.height, options.data, options);\n\t\t} else {\n\t\t\treturn Promise.reject(this);\n\t\t}\n\t}\n\n\tsetUrl(\n\t\tgl: WebGLRenderingContext | WebGL2RenderingContext,\n\t\turl: string,\n\t\toptions: ITextureOptions = {}\n\t): Promise<Texture> {\n\t\tif (!this.valid) {\n\t\t\treturn Promise.reject(this);\n\t\t}\n\t\tthis.url = url; // save URL reference (will be overwritten when element is loaded below)\n\t\tthis.source = url;\n\t\tthis.sourceType = TextureSourceType.Url;\n\t\tthis.options = Object.assign(this.options, options);\n\t\tconst ext = url.split('?')[0].split('.').pop().toLowerCase();\n\t\tconst isVideo = TextureVideoExtensions.indexOf(ext) !== -1;\n\t\tconst src = Common.getResource(url, this.workpath);\n\t\tlet element: HTMLVideoElement | HTMLImageElement;\n\t\tlet promise: Promise<Texture>;\n\t\tif (isVideo) {\n\t\t\tLogger.log('GlslCanvas.setUrl video', src);\n\t\t\telement = document.createElement('video'); // new HTMLVideoElement();\n\t\t\telement.setAttribute('preload', 'auto');\n\t\t\t// element.setAttribute('autoplay', 'true');\n\t\t\telement.setAttribute('loop', 'true');\n\t\t\telement.setAttribute('muted', 'true');\n\t\t\telement.setAttribute('playsinline', 'true');\n\t\t\t// element.autoplay = true;\n\t\t\telement.loop = true;\n\t\t\telement.muted = true;\n\t\t\t/*\n\t\t\tif (!(Texture.isSafari() && /(?<!http|https):\\//.test(url))) {\n\t\t\t\telement.crossOrigin = 'anonymous';\n\t\t\t}\n\t\t\t*/\n\t\t\tpromise = this.setElement(gl, element, options);\n\t\t\telement.src = src;\n\t\t\telement.addEventListener('canplay', () => {\n\t\t\t\t(element as HTMLVideoElement).play();\n\t\t\t});\n\t\t} else {\n\t\t\tLogger.log('GlslCanvas.setUrl image', src);\n\t\t\telement = document.createElement('img'); // new HTMLImageElement();\n\t\t\tpromise = this.setElement(gl, element, options);\n\t\t\tif (!(Texture.isSafari() && url.slice(0, 5) === 'data:')) {\n\t\t\t\telement.crossOrigin = 'anonymous';\n\t\t\t}\n\t\t\telement.src = src;\n\t\t}\n\t\treturn promise;\n\t}\n\n\tsetElement(\n\t\tgl: WebGLRenderingContext | WebGL2RenderingContext,\n\t\telement: HTMLCanvasElement | HTMLImageElement | HTMLVideoElement | HTMLElement | Element,\n\t\toptions: ITextureOptions = {}\n\t): Promise<Texture> {\n\t\toptions = this.options = Object.assign(this.options, options);\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst originalElement = element;\n\t\t\t// a string element is interpeted as a CSS selector\n\t\t\tif (typeof element === 'string') {\n\t\t\t\telement = document.querySelector(element);\n\t\t\t}\n\t\t\tif (element instanceof HTMLCanvasElement ||\n\t\t\t\telement instanceof HTMLImageElement ||\n\t\t\t\telement instanceof HTMLVideoElement) {\n\t\t\t\tthis.source = element;\n\t\t\t\tthis.sourceType = TextureSourceType.Element;\n\t\t\t\tif (element instanceof HTMLVideoElement) {\n\t\t\t\t\tconst video = element as HTMLVideoElement;\n\t\t\t\t\tvideo.addEventListener('loadeddata', (event) => {\n\t\t\t\t\t\tthis.update(gl, options);\n\t\t\t\t\t\tthis.setFiltering(gl, options);\n\t\t\t\t\t\tresolve(this);\n\t\t\t\t\t});\n\t\t\t\t\tvideo.addEventListener('error', (error) => {\n\t\t\t\t\t\treject(error);\n\t\t\t\t\t});\n\t\t\t\t\tvideo.load();\n\t\t\t\t} else if (element instanceof HTMLImageElement) {\n\t\t\t\t\telement.addEventListener('load', () => {\n\t\t\t\t\t\tthis.update(gl, options);\n\t\t\t\t\t\tthis.setFiltering(gl, options);\n\t\t\t\t\t\tresolve(this);\n\t\t\t\t\t});\n\t\t\t\t\telement.addEventListener('error', (error) => {\n\t\t\t\t\t\treject(error);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthis.update(gl, options);\n\t\t\t\t\tthis.setFiltering(gl, options);\n\t\t\t\t\tresolve(this);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet message = `the 'element' parameter (\\`element: ${JSON.stringify(originalElement)}\\`) must be a CSS selector string, or a <canvas>, <image> or <video> object`;\n\t\t\t\tLogger.log(`Texture '${this.key}': ${message}`, options);\n\t\t\t\treject(message);\n\t\t\t}\n\t\t});\n\t}\n\n\tsetData(\n\t\tgl: WebGLRenderingContext | WebGL2RenderingContext,\n\t\twidth: number,\n\t\theight: number,\n\t\tdata: Uint8Array,\n\t\toptions: ITextureOptions = {}\n\t): Promise<Texture> {\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.options = Object.assign(this.options, options);\n\t\tthis.source = data;\n\t\tthis.sourceType = TextureSourceType.Data;\n\t\tthis.update(gl, options);\n\t\tthis.setFiltering(gl, options);\n\t\treturn Promise.resolve(this);\n\t}\n\n\t// Uploads current image or buffer to the GPU (can be used to update animated textures on the fly)\n\tupdate(\n\t\tgl: WebGLRenderingContext | WebGL2RenderingContext,\n\t\toptions: ITextureOptions\n\t): void {\n\t\tif (!this.valid) {\n\t\t\treturn;\n\t\t}\n\t\tgl.activeTexture(gl.TEXTURE0 + this.index);\n\t\tgl.bindTexture(gl.TEXTURE_2D, this.texture);\n\t\tgl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, (options.UNPACK_FLIP_Y_WEBGL === false ? 0 : 1));\n\t\tgl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, options.UNPACK_PREMULTIPLY_ALPHA_WEBGL || 0);\n\t\tif (this.sourceType === TextureSourceType.Element) {\n\t\t\tif (this.source instanceof HTMLImageElement && this.source.naturalWidth && this.source.naturalHeight) {\n\t\t\t\tthis.width = this.source.naturalWidth;\n\t\t\t\tthis.height = this.source.naturalHeight;\n\t\t\t\tgl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.source);\n\t\t\t} else if (this.source instanceof HTMLVideoElement && this.source.videoWidth && this.source.videoHeight) {\n\t\t\t\tthis.width = this.source.videoWidth;\n\t\t\t\tthis.height = this.source.videoHeight;\n\t\t\t\tgl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.source);\n\t\t\t} else if (this.source instanceof HTMLCanvasElement) {\n\t\t\t\tthis.width = this.source.width;\n\t\t\t\tthis.height = this.source.height;\n\t\t\t\tgl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.source);\n\t\t\t}\n\t\t} else if (this.sourceType === TextureSourceType.Data) {\n\t\t\tconst imageBuffer: ArrayBufferView = this.source as ArrayBufferView;\n\t\t\tgl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.width, this.height, 0, gl.RGBA, gl.UNSIGNED_BYTE, imageBuffer);\n\t\t}\n\t\tthis.trigger('loaded', this);\n\t}\n\n\ttryUpdate(gl: WebGLRenderingContext | WebGL2RenderingContext): boolean {\n\t\tlet dirty = false;\n\t\tif (this.animated) {\n\t\t\tdirty = true;\n\t\t\tthis.update(gl, this.options);\n\t\t}\n\t\treturn dirty;\n\t}\n\n\tdestroy(gl: WebGLRenderingContext | WebGL2RenderingContext): void {\n\t\tif (!this.valid) {\n\t\t\treturn;\n\t\t}\n\t\tgl.deleteTexture(this.texture);\n\t\tthis.texture = null;\n\t\tdelete this.source;\n\t\tthis.source = null;\n\t\tthis.valid = false;\n\t}\n\n\tsetFiltering(\n\t\tgl: WebGLRenderingContext | WebGL2RenderingContext,\n\t\toptions: ITextureOptions\n\t): void {\n\t\tif (!this.valid) {\n\t\t\treturn;\n\t\t}\n\t\tconst powerOf2 = Texture.isPowerOf2(this.width) && Texture.isPowerOf2(this.height);\n\t\tlet filtering = options.filtering || TextureFilteringType.MipMap;\n\t\tlet wrapS = options.TEXTURE_WRAP_S || (options.repeat ? gl.REPEAT : gl.CLAMP_TO_EDGE);\n\t\tlet wrapT = options.TEXTURE_WRAP_T || (options.repeat ? gl.REPEAT : gl.CLAMP_TO_EDGE);\n\t\tif (!powerOf2) {\n\t\t\tfiltering = filtering === TextureFilteringType.MipMap ? TextureFilteringType.Linear : filtering;\n\t\t\twrapS = wrapT = gl.CLAMP_TO_EDGE;\n\t\t\tif (options.repeat || options.TEXTURE_WRAP_S || options.TEXTURE_WRAP_T) {\n\t\t\t\tLogger.warn(`GlslCanvas: cannot repeat texture ${options.url} cause is not power of 2.`);\n\t\t\t}\n\t\t}\n\t\tthis.powerOf2 = powerOf2;\n\t\tthis.filtering = filtering;\n\t\t// this.bindTexture();\n\t\t// WebGL has strict requirements on non-power-of-2 textures:\n\t\t// No mipmaps and must clamp to edge\n\t\t// For power-of-2 textures, the following presets are available:\n\t\t// mipmap: linear blend from nearest mip\n\t\t// linear: linear blend from original image (no mips)\n\t\t// nearest: nearest pixel from original image (no mips, 'blocky' look)\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, wrapS);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, wrapT);\n\t\tif (this.filtering === TextureFilteringType.MipMap) {\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_LINEAR); // TODO: use trilinear filtering by defualt instead?\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\t\t\tgl.generateMipmap(gl.TEXTURE_2D);\n\t\t} else if (this.filtering === TextureFilteringType.Nearest) {\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n\t\t} else if (this.filtering === TextureFilteringType.Linear) {\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\t\t}\n\t}\n}\n\nexport default class Textures extends IterableStringMap<Texture> {\n\n\tcount: number = 0;\n\tdirty: boolean = false;\n\tanimated: boolean = false;\n\n\tclean() {\n\t\tObject.keys(this.values).forEach((key) => {\n\t\t\tthis.values[key].dirty = false;\n\t\t});\n\t\tthis.dirty = false;\n\t}\n\n\tcreateOrUpdate(\n\t\tgl: WebGLRenderingContext | WebGL2RenderingContext,\n\t\tkey: string,\n\t\turlElementOrData: string | HTMLCanvasElement | HTMLImageElement | HTMLVideoElement | Element | ITextureData,\n\t\tindex: number = 0,\n\t\toptions: ITextureOptions = {},\n\t\tworkpath: string,\n\t): Promise<Texture> {\n\t\tlet texture;\n\t\tconst textureOptions = Texture.getTextureOptions(urlElementOrData, options);\n\t\ttexture = this.get(key);\n\t\tif (!texture) {\n\t\t\ttexture = new Texture(gl, key, index + this.count, textureOptions, workpath);\n\t\t\tthis.count++;\n\t\t\tthis.set(key, texture);\n\t\t}\n\t\tif (textureOptions !== undefined) {\n\t\t\treturn texture.load(gl, textureOptions).then(\n\t\t\t\t(texture) => {\n\t\t\t\t\tif (texture.source instanceof HTMLVideoElement) {\n\t\t\t\t\t\tconst video = texture.source as HTMLVideoElement;\n\t\t\t\t\t\t// Logger.log('video', video);\n\t\t\t\t\t\tvideo.addEventListener('play', () => {\n\t\t\t\t\t\t\t// Logger.log('play', texture.key);\n\t\t\t\t\t\t\ttexture.animated = true;\n\t\t\t\t\t\t\tthis.animated = true;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvideo.addEventListener('pause', () => {\n\t\t\t\t\t\t\t// Logger.log('pause', texture.key);\n\t\t\t\t\t\t\ttexture.animated = false;\n\t\t\t\t\t\t\tthis.animated = this.reduce((flag: boolean, texture: Texture) => {\n\t\t\t\t\t\t\t\treturn flag || texture.animated;\n\t\t\t\t\t\t\t}, false);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvideo.addEventListener('seeked', () => {\n\t\t\t\t\t\t\t// Logger.log('seeked');\n\t\t\t\t\t\t\ttexture.update(gl, texture.options);\n\t\t\t\t\t\t\tthis.dirty = true;\n\t\t\t\t\t\t});\n\t\t\t\t\t\t// Logger.log('video');\n\t\t\t\t\t\t/*\n\t\t\t\t\t\tvideo.addEventListener('canplaythrough', () => {\n\t\t\t\t\t\t\t// !!!\n\t\t\t\t\t\t\tthis.intervalID = setInterval(() => {\n\t\t\t\t\t\t\t\tthis.update(gl, options);\n\t\t\t\t\t\t\t}, 15);\n\t\t\t\t\t\t}, true);\n\t\t\t\t\t\tvideo.addEventListener('ended', () => {\n\t\t\t\t\t\t\tvideo.currentTime = 0;\n\t\t\t\t\t\t\tvideo.play();\n\t\t\t\t\t\t}, true);\n\t\t\t\t\t\t*/\n\t\t\t\t\t}\n\t\t\t\t\treturn texture;\n\t\t\t\t}\n\t\t\t);\n\t\t} else {\n\t\t\treturn Promise.resolve(texture);\n\t\t}\n\t}\n}\n","export default class CanvasTimer {\n\n\tstart: number;\n\tprevious: number;\n\tdelay: number = 0.0;\n\tcurrent: number = 0.0;\n\tdelta: number = 0.0;\n\tpaused: boolean = false;\n\n\tconstructor() {\n\t\tthis.start = this.previous = this.now();\n\t}\n\n\tnow() {\n\t\treturn performance.now();\n\t}\n\n\tplay() {\n\t\tif (this.previous) {\n\t\t\tconst now = this.now();\n\t\t\tthis.delay += (now - this.previous);\n\t\t\tthis.previous = now;\n\t\t}\n\t\t// Logger.log(this.delay);\n\t\tthis.paused = false;\n\t}\n\n\tpause() {\n\t\tthis.paused = true;\n\t}\n\n\tnext(): CanvasTimer {\n\t\tconst now = this.now();\n\t\tthis.delta = now - this.previous;\n\t\tthis.current = now - this.start - this.delay;\n\t\tthis.previous = now;\n\t\treturn this;\n\t}\n\n}\n","import Logger from '../logger/logger';\n\nexport class Listener {\n\tevent: string;\n\tcallback: Function;\n\n\tconstructor(\n\t\tevent: string,\n\t\tcallback: Function\n\t) {\n\t\tthis.event = event;\n\t\tthis.callback = callback;\n\t}\n}\n\nexport default class Subscriber {\n\tprivate listeners: Set<Listener> = new Set<Listener>();\n\n\tlogListeners() {\n\t\tthis.listeners.forEach(x => Logger.log(x));\n\t}\n\n\tsubscribe(listener: Listener) {\n\t\tthis.listeners.add(listener);\n\t}\n\n\tunsubscribe(listener: Listener) {\n\t\tthis.listeners.delete(listener);\n\t}\n\n\tunsubscribeAll() {\n\t\tthis.listeners.clear();\n\t}\n\n\ton(event: string, callback: Function) {\n\t\tthis.listeners.add(new Listener(event, callback));\n\t\treturn this;\n\t}\n\n\toff(event: string, callback?: Function) {\n\t\tif (callback) {\n\t\t\tthis.listeners.delete(new Listener(event, callback));\n\t\t} else {\n\t\t\tthis.listeners.forEach(x => {\n\t\t\t\tif (x.event === event) {\n\t\t\t\t\tthis.listeners.delete(x);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn this;\n\t}\n\n\ttrigger(event: string, ...data: any[]) {\n\t\tthis.listeners.forEach(x => {\n\t\t\tif (x.event === event && typeof x.callback === 'function') {\n\t\t\t\tx.callback(...data);\n\t\t\t}\n\t\t});\n\t\treturn this;\n\t}\n\n}\n","import Geometry from './geometry';\n\nexport default class BoxGeometry extends Geometry {\n\n\tprotected createData_() {\n\t\tthis.size = 36;\n\t\t// Now create an array of positions for the cube.\n\t\tthis.positions = [\n\t\t\t// Front face\n\t\t\t-1.0, -1.0, 1.0, 1.0, -1.0, 1.0, 1.0, 1.0, 1.0,\n\t\t\t-1.0, -1.0, 1.0, 1.0, 1.0, 1.0, -1.0, 1.0, 1.0,\n\t\t\t// Back face\n\t\t\t-1.0, -1.0, -1.0, -1.0, 1.0, -1.0, 1.0, 1.0, -1.0,\n\t\t\t-1.0, -1.0, -1.0, 1.0, 1.0, -1.0, 1.0, -1.0, -1.0,\n\t\t\t// Top face\n\t\t\t-1.0, 1.0, -1.0, -1.0, 1.0, 1.0, 1.0, 1.0, 1.0,\n\t\t\t-1.0, 1.0, -1.0, 1.0, 1.0, 1.0, 1.0, 1.0, -1.0,\n\t\t\t// Bottom face\n\t\t\t-1.0, -1.0, -1.0, 1.0, -1.0, -1.0, 1.0, -1.0, 1.0,\n\t\t\t-1.0, -1.0, -1.0, 1.0, -1.0, 1.0, -1.0, -1.0, 1.0,\n\t\t\t// Right face\n\t\t\t1.0, -1.0, -1.0, 1.0, 1.0, -1.0, 1.0, 1.0, 1.0,\n\t\t\t1.0, -1.0, -1.0, 1.0, 1.0, 1.0, 1.0, -1.0, 1.0,\n\t\t\t// Left face\n\t\t\t-1.0, -1.0, -1.0, -1.0, -1.0, 1.0, -1.0, 1.0, 1.0,\n\t\t\t-1.0, -1.0, -1.0, -1.0, 1.0, 1.0, -1.0, 1.0, -1.0,\n\t\t];\n\t\tthis.texcoords = [\n\t\t\t// Front\n\t\t\t0.0, 0.0, 1.0, 0.0, 1.0, 1.0,\n\t\t\t0.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n\t\t\t// Back\n\t\t\t0.0, 0.0, 1.0, 0.0, 1.0, 1.0,\n\t\t\t0.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n\t\t\t// Top\n\t\t\t0.0, 0.0, 1.0, 0.0, 1.0, 1.0,\n\t\t\t0.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n\t\t\t// Bottom\n\t\t\t0.0, 0.0, 1.0, 0.0, 1.0, 1.0,\n\t\t\t0.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n\t\t\t// Right\n\t\t\t0.0, 0.0, 1.0, 0.0, 1.0, 1.0,\n\t\t\t0.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n\t\t\t// Left\n\t\t\t0.0, 0.0, 1.0, 0.0, 1.0, 1.0,\n\t\t\t0.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n\t\t];\n\t\tthis.normals = [\n\t\t\t// Front\n\t\t\t0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0,\n\t\t\t0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0,\n\t\t\t// Back\n\t\t\t0.0, 0.0, -1.0, 0.0, 0.0, -1.0, 0.0, 0.0, -1.0,\n\t\t\t0.0, 0.0, -1.0, 0.0, 0.0, -1.0, 0.0, 0.0, -1.0,\n\t\t\t// Top\n\t\t\t0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0,\n\t\t\t0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0,\n\t\t\t// Bottom\n\t\t\t0.0, -1.0, 0.0, 0.0, -1.0, 0.0, 0.0, -1.0, 0.0,\n\t\t\t0.0, -1.0, 0.0, 0.0, -1.0, 0.0, 0.0, -1.0, 0.0,\n\t\t\t// Right\n\t\t\t1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0,\n\t\t\t1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0,\n\t\t\t// Left\n\t\t\t-1.0, 0.0, 0.0, -1.0, 0.0, 0.0, -1.0, 0.0, 0.0,\n\t\t\t-1.0, 0.0, 0.0, -1.0, 0.0, 0.0, -1.0, 0.0, 0.0,\n\t\t];\n\t\t// Now set up the colors for the faces. We'll use solid colors\n\t\t// for each face.\n\t\tconst faceColors = [\n\t\t\t[1.0, 1.0, 1.0, 1.0],    // Front face: white\n\t\t\t[1.0, 0.0, 0.0, 1.0],    // Back face: red\n\t\t\t[0.0, 1.0, 0.0, 1.0],    // Top face: green\n\t\t\t[0.0, 0.0, 1.0, 1.0],    // Bottom face: blue\n\t\t\t[1.0, 1.0, 0.0, 1.0],    // Right face: yellow\n\t\t\t[1.0, 0.0, 1.0, 1.0],    // Left face: purple\n\t\t];\n\t\t// Convert the array of colors into a table for all the vertices.\n\t\tlet colors: number[] = [];\n\t\tfor (var j = 0; j < faceColors.length; ++j) {\n\t\t\tconst c = faceColors[j];\n\t\t\t// Repeat each color four times for the four vertices of the face\n\t\t\tcolors = colors.concat(c, c, c, c, c, c);\n\t\t}\n\t\tthis.colors = colors;\n\t\t// console.log('positions', this.positions.length);\n\t\t// console.log('normals', this.normals.length);\n\t\t// console.log('texcoords', this.texcoords.length);\n\t\t// console.log('colors', this.colors.length);\n\t}\n\n}\n","import Vector3 from '../math/vector3';\nimport Geometry from './geometry';\n\nexport default class SphereGeometry extends Geometry {\n\n\tprotected createData_() {\n\t\tconst radius = 1.4;\n\t\tconst widthDivisions = 80;\n\t\tconst heightDivisions = 60;\n\t\tconst phiStart = 0;\n\t\tconst phiLength = Math.PI * 2;\n\t\tconst thetaStart = 0;\n\t\tconst thetaLength = Math.PI;\n\t\tconst p = new Vector3();\n\t\tconst n = new Vector3();\n\t\t// buffers\n\t\tconst indices = [];\n\t\tconst positions = [];\n\t\tconst normals = [];\n\t\tconst texcoords = [];\n\t\tconst colors = [];\n\t\t//\n\t\tlet thetaEnd = Math.min(thetaStart + thetaLength, Math.PI);\n\t\tlet ix, iy;\n\t\tlet index = 0;\n\t\tlet grid = [];\n\t\t// generate positions, normals and uvs\n\t\tfor (iy = 0; iy <= heightDivisions; iy++) {\n\t\t\tlet positionRow = [];\n\t\t\tlet v = iy / heightDivisions;\n\t\t\t// special case for the poles\n\t\t\tlet uOffset = 0;\n\t\t\tif (iy == 0 && thetaStart == 0) {\n\t\t\t\tuOffset = 0.5 / widthDivisions;\n\t\t\t} else if (iy == heightDivisions && thetaEnd == Math.PI) {\n\t\t\t\tuOffset = -0.5 / widthDivisions;\n\t\t\t}\n\t\t\tfor (ix = 0; ix <= widthDivisions; ix++) {\n\t\t\t\tlet u = ix / widthDivisions;\n\t\t\t\t// position\n\t\t\t\tp.x = -radius * Math.cos(phiStart + u * phiLength) * Math.sin(thetaStart + v * thetaLength);\n\t\t\t\tp.y = radius * Math.cos(thetaStart + v * thetaLength);\n\t\t\t\tp.z = radius * Math.sin(phiStart + u * phiLength) * Math.sin(thetaStart + v * thetaLength);\n\t\t\t\tpositions.push(p.x, p.y, p.z);\n\t\t\t\t// normal\n\t\t\t\tn.copy(p).normalize();\n\t\t\t\tnormals.push(n.x, n.y, n.z);\n\t\t\t\t// uv\n\t\t\t\tconst uvx = (u + uOffset);\n\t\t\t\tconst uvy = (1 - v);\n\t\t\t\ttexcoords.push(uvx, uvy);\n\t\t\t\tcolors.push(1.0, 1.0, 1.0, 1.0);\n\t\t\t\tpositionRow.push(index++);\n\t\t\t}\n\t\t\tgrid.push(positionRow);\n\t\t}\n\t\t// indices\n\t\tfor (iy = 0; iy < heightDivisions; iy++) {\n\t\t\tfor (ix = 0; ix < widthDivisions; ix++) {\n\t\t\t\tconst a = grid[iy][ix + 1];\n\t\t\t\tconst b = grid[iy][ix];\n\t\t\t\tconst c = grid[iy + 1][ix];\n\t\t\t\tconst d = grid[iy + 1][ix + 1];\n\t\t\t\tif (iy !== 0 || thetaStart > 0) indices.push(a, b, d);\n\t\t\t\tif (iy !== heightDivisions - 1 || thetaEnd < Math.PI) indices.push(b, c, d);\n\t\t\t}\n\t\t}\n\t\t// build geometry\n\t\tthis.size = indices.length;\n\t\t// Now create an array of positions for the cube.\n\t\tthis.positions = Geometry.fromIndices(indices, positions, 3);\n\t\tthis.texcoords = Geometry.fromIndices(indices, texcoords, 2);\n\t\tthis.normals = Geometry.fromIndices(indices, normals, 3);\n\t\t// Now set up the colors for the faces. We'll use solid colors\n\t\t// for each face.\n\t\tthis.colors = Geometry.fromIndices(indices, colors, 4);\n\t\t// this.unrapUvw(this.positions);\n\t\t// console.log('positions', this.positions.length);\n\t\t// console.log('normals', this.normals.length);\n\t\t// console.log('texcoords', this.texcoords.length);\n\t\t// console.log('colors', this.colors.length);\n\t}\n\n\t/*\n\tunrapUvw(positions: number[]): void {\n\t\tconst texcoords: number[] = this.texcoords = [];\n\t\tfor (let i = 0; i < positions.length; i += 3) {\n\t\t\tconst v = new Vector3(positions[i], positions[i + 1], positions[i + 2]);\n\t\t\tv.normalize();\n\t\t\tconst pitch = Math.asin(-v.y);\n\t\t\tconst yaw = Math.atan2(v.x, v.z);\n\t\t\tconst tx = 0.5 + pitch / Math.PI; // * 360;\n\t\t\tconst ty = 0.5 + yaw / (Math.PI * 2); // * 180;\n\t\t\ttexcoords.push(tx, ty);\n\t\t}\n\t}\n\t*/\n\n}\n","import Vector3 from '../math/vector3';\nimport Geometry from './geometry';\n\nexport default class TorusGeometry extends Geometry {\n\n\tprotected createData_() {\n\t\tconst radius: number = 1;\n\t\tconst tube: number = 0.25;\n\t\tconst tubularDivisions: number = 200;\n\t\tconst radialDivisions: number = 40;\n\t\tconst p: number = 2;\n\t\tconst q: number = 3;\n\t\tconst indices: number[] = [];\n\t\tconst positions: number[] = [];\n\t\tconst normals: number[] = [];\n\t\tconst texcoords: number[] = [];\n\t\tconst colors: number[] = [];\n\t\tconst vertex = new Vector3();\n\t\tconst normal = new Vector3();\n\t\tconst p1 = new Vector3();\n\t\tconst p2 = new Vector3();\n\t\tconst B = new Vector3();\n\t\tconst T = new Vector3();\n\t\tconst N = new Vector3();\n\t\tfor (let i: number = 0; i <= tubularDivisions; ++i) {\n\t\t\tconst u = i / tubularDivisions * p * Math.PI * 2;\n\t\t\tthis.calculatePositionOnCurve(u, p, q, radius, p1);\n\t\t\tthis.calculatePositionOnCurve(u + 0.01, p, q, radius, p2);\n\t\t\tT.subVectors(p2, p1);\n\t\t\tN.addVectors(p2, p1);\n\t\t\tB.crossVectors(T, N);\n\t\t\tN.crossVectors(B, T);\n\t\t\tB.normalize();\n\t\t\tN.normalize();\n\t\t\tfor (let j: number = 0; j <= radialDivisions; ++j) {\n\t\t\t\tconst v: number = j / radialDivisions * Math.PI * 2;\n\t\t\t\tconst cx: number = - tube * Math.cos(v);\n\t\t\t\tconst cy: number = tube * Math.sin(v);\n\t\t\t\tvertex.x = p1.x + (cx * N.x + cy * B.x);\n\t\t\t\tvertex.y = p1.y + (cx * N.y + cy * B.y);\n\t\t\t\tvertex.z = p1.z + (cx * N.z + cy * B.z);\n\t\t\t\tpositions.push(vertex.x, vertex.y, vertex.z);\n\t\t\t\tnormal.subVectors(vertex, p1).normalize();\n\t\t\t\tnormals.push(normal.x, normal.y, normal.z);\n\t\t\t\ttexcoords.push(i / tubularDivisions * 2.0 * Math.round(q));\n\t\t\t\ttexcoords.push(j / radialDivisions);\n\t\t\t\tcolors.push(1.0, 1.0, 1.0, 1.0);\n\t\t\t}\n\t\t}\n\t\tfor (let j: number = 1; j <= tubularDivisions; j++) {\n\t\t\tfor (let i: number = 1; i <= radialDivisions; i++) {\n\t\t\t\tconst a: number = (radialDivisions + 1) * (j - 1) + (i - 1);\n\t\t\t\tconst b: number = (radialDivisions + 1) * j + (i - 1);\n\t\t\t\tconst c: number = (radialDivisions + 1) * j + i;\n\t\t\t\tconst d: number = (radialDivisions + 1) * (j - 1) + i;\n\t\t\t\tindices.push(a, b, d);\n\t\t\t\tindices.push(b, c, d);\n\t\t\t}\n\t\t}\n\t\tthis.size = indices.length;\n\t\tthis.positions = Geometry.fromIndices(indices, positions, 3);\n\t\tthis.texcoords = Geometry.fromIndices(indices, texcoords, 2);\n\t\tthis.normals = Geometry.fromIndices(indices, normals, 3);\n\t\tthis.colors = Geometry.fromIndices(indices, colors, 4);\n\t\t// console.log('positions', this.positions.length);\n\t\t// console.log('normals', this.normals.length);\n\t\t// console.log('texcoords', this.texcoords.length);\n\t\t// console.log('colors', this.colors.length);\n\t}\n\n\tprotected calculatePositionOnCurve(u: number, p: number, q: number, radius: number, position: Vector3): void {\n\t\tconst cu: number = Math.cos(u);\n\t\tconst su: number = Math.sin(u);\n\t\tconst quOverP: number = q / p * u;\n\t\tconst cs: number = Math.cos(quOverP);\n\t\tposition.x = radius * (2 + cs) * 0.5 * cu;\n\t\tposition.y = radius * (2 + cs) * su * 0.5;\n\t\tposition.z = radius * Math.sin(quOverP) * 0.5;\n\t}\n\n}\n","import Common from '../core/common';\nimport Geometry, { IGeometry } from '../geometry/geometry';\nimport Vector3 from '../math/vector3';\n\nconst COLORS = [\n\t[1, 1, 1],\n\t[1, 0, 0],\n\t[0, 1, 0],\n\t[0, 0, 1],\n\t[1, 1, 0],\n\t[0, 1, 1],\n];\n\nlet CI: number = 0;\n\nexport default class ObjLoader {\n\n\tload(url: string): Promise<Geometry> {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tCommon.fetch(url)\n\t\t\t\t// .then((response) => response.text())\n\t\t\t\t.then((text) => {\n\t\t\t\t\t// console.log(text);\n\t\t\t\t\tconst data = this.parse(text);\n\t\t\t\t\tif (data.positions.length) {\n\t\t\t\t\t\tconst geometry = new Geometry(data as IGeometry);\n\t\t\t\t\t\tresolve(geometry);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject(`ObjLoader error: empty positions ${url}`);\n\t\t\t\t\t}\n\t\t\t\t}, error => {\n\t\t\t\t\tconsole.log('ObjLoader error:', error, url);\n\t\t\t\t\treject(error);\n\t\t\t\t});\n\t\t});\n\t}\n\n\tparseIndices(faceIndices: number[][], k: number, l: number, source: number[][], output: number[], name: string) {\n\t\tlet i = 0;\n\t\twhile (i <= faceIndices.length - 3) {\n\t\t\tlet a, b, c;\n\t\t\tif (i === 0) {\n\t\t\t\ta = i;\n\t\t\t\tb = i + 1;\n\t\t\t\tc = i + 2;\n\t\t\t} else {\n\t\t\t\ta = i - 1;\n\t\t\t\tb = i + 1;\n\t\t\t\tc = i + 2;\n\t\t\t}\n\t\t\ti++;\n\t\t\tconst indices = [a, b, c];\n\t\t\tfor (let j = 0; j < indices.length; j++) {\n\t\t\t\tconst index = faceIndices[indices[j]][k];\n\t\t\t\tlet values;\n\t\t\t\tif (index && index !== NaN) {\n\t\t\t\t\tvalues = source[index - 1];\n\t\t\t\t\tif (values) {\n\t\t\t\t\t\tvalues = values.slice(0, l);\n\t\t\t\t\t\toutput.push.apply(output, values);\n\t\t\t\t\t}\n\t\t\t\t\t/*\n\t\t\t\t\telse {\n\t\t\t\t\t\t// console.log('error', name, source.length, index - 1);\n\t\t\t\t\t}\n\t\t\t\t\t*/\n\t\t\t\t}\n\t\t\t\t/*\n\t\t\t\telse {\n\t\t\t\t\tvalues = new Array(l).fill(0);\n\t\t\t\t\toutput.push.apply(output, values);\n\t\t\t\t}\n\t\t\t\t*/\n\t\t\t}\n\t\t}\n\t}\n\n\tparseFaces(F: number[][][], V: number[][], VN: number[][], VT: number[][], positions: number[], normals: number[], texcoords: number[], colors: number[]) {\n\t\tconst si: number = positions.length;\n\t\tF.forEach(faceIndices => {\n\t\t\t// console.log(faceIndices);\n\t\t\tthis.parseIndices(faceIndices, 0, 3, V, positions, 'positions');\n\t\t\tthis.parseIndices(faceIndices, 2, 3, VN, normals, 'normals');\n\t\t\tthis.parseIndices(faceIndices, 1, 2, VT, texcoords, 'texcoords');\n\t\t});\n\t\tconst vl: number = positions.length - si;\n\t\tif (vl > 0) {\n\t\t\t// console.log(faceIndices.length - 2);\n\t\t\tconst c = new Array(vl / 3).fill(0);\n\t\t\tc.forEach(() => {\n\t\t\t\tconst rgb = COLORS[CI % COLORS.length];\n\t\t\t\tcolors.push(rgb[0], rgb[1], rgb[2], 1.0);\n\t\t\t});\n\t\t\tCI++;\n\t\t\t// console.log(positions.length, normals.length, texcoords.length, colors.length, positions.length / 3 * 2 === texcoords.length, positions.length / 3 * 4 === colors.length);\n\t\t}\n\t}\n\n\tparse(text: string): IGeometry {\n\t\tlet positions: number[] = [], normals: number[] = [], texcoords: number[] = [], colors: number[] = [];\n\t\tCI = 0;\n\t\tlet V: number[][] = [], VN: number[][] = [], VT: number[][] = [], F: number[][][] = [];\n\t\tif (text.indexOf('\\r\\n') !== - 1) {\n\t\t\ttext = text.replace(/\\r\\n/g, '\\n');\n\t\t}\n\t\t/*\n\t\tif (text.indexOf('\\\\\\n') !== - 1) {\n\t\t\ttext = text.replace(/\\\\\\n/g, '');\n\t\t}\n\t\t*/\n\t\ttext = text.replace(/  /g, ' ');\n\t\tconst lines = text.split('\\n');\n\t\tlines.forEach((line, i) => {\n\t\t\tif (line.indexOf('v ') === 0) {\n\t\t\t\tif (F.length) {\n\t\t\t\t\tthis.parseFaces(F, V, VN, VT, positions, normals, texcoords, colors);\n\t\t\t\t\tF = [];\n\t\t\t\t\t// V = [];\n\t\t\t\t\t// VN = [];\n\t\t\t\t\t// VT = [];\n\t\t\t\t}\n\t\t\t\t// v  0.0012 -0.0055 0.0090\n\t\t\t\tconst a = line.replace('v', '').trim().split(' ');\n\t\t\t\tconst v = a.map(x => parseFloat(x));\n\t\t\t\tV.push(v);\n\t\t\t} else if (line.indexOf('vn ') === 0) {\n\t\t\t\t// vn 0.0128 0.9896 0.1431\n\t\t\t\tconst a = line.replace('vn', '').trim().split(' ');\n\t\t\t\tconst v = a.map(x => parseFloat(x));\n\t\t\t\tconst n = new Vector3(v[0], v[1], v[2]).normalize();\n\t\t\t\tVN.push([n.x, n.y, n.z]);\n\t\t\t} else if (line.indexOf('vt ') === 0) {\n\t\t\t\t// vt 0.5955 0.0054 0.0000\n\t\t\t\tconst a = line.replace('vt', '').trim().split(' ');\n\t\t\t\tconst v = a.map(x => parseFloat(x));\n\t\t\t\tVT.push(v);\n\t\t\t} else if (line.indexOf('f ') === 0) {\n\t\t\t\t// f 1//1 2//2 3//3 4//4\n\t\t\t\tconst a = line.replace('f', '').trim().split(' ');\n\t\t\t\tconst f = a.map((x: string) => {\n\t\t\t\t\tconst indices = x.split('/').map(y => parseInt(y));\n\t\t\t\t\tif (indices.length === 2) {\n\t\t\t\t\t\tindices.push(null);\n\t\t\t\t\t}\n\t\t\t\t\treturn indices;\n\t\t\t\t});\n\t\t\t\tF[F.length] = f;\n\t\t\t}\n\t\t});\n\t\tif (F.length) {\n\t\t\tthis.parseFaces(F, V, VN, VT, positions, normals, texcoords, colors);\n\t\t}\n\t\tconst boundingBox = { min: new Vector3(Number.POSITIVE_INFINITY), max: new Vector3(Number.NEGATIVE_INFINITY) };\n\t\tfor (let i = 0; i < positions.length; i += 3) {\n\t\t\tboundingBox.min.x = Math.min(boundingBox.min.x, positions[i]);\n\t\t\tboundingBox.min.y = Math.min(boundingBox.min.y, positions[i + 1]);\n\t\t\tboundingBox.min.z = Math.min(boundingBox.min.z, positions[i + 2]);\n\t\t\tboundingBox.max.x = Math.max(boundingBox.max.x, positions[i]);\n\t\t\tboundingBox.max.y = Math.max(boundingBox.max.y, positions[i + 1]);\n\t\t\tboundingBox.max.z = Math.max(boundingBox.max.z, positions[i + 2]);\n\t\t}\n\t\tconst centerX = true, centerY = true, centerZ = true;\n\t\tconst dx = -(boundingBox.min.x + boundingBox.max.x) / 2;\n\t\tconst dy = -(boundingBox.min.y + boundingBox.max.y) / 2;\n\t\tconst dz = -(boundingBox.min.z + boundingBox.max.z) / 2;\n\t\t// console.log(dx, dy, dz);\n\t\tfor (let i = 0; i < positions.length; i += 3) {\n\t\t\tpositions[i] += centerX ? dx : 0;\n\t\t\tpositions[i + 1] += centerY ? dy : 0;\n\t\t\tpositions[i + 2] += centerZ ? dz : 0;\n\t\t}\n\t\tconst radius = positions.reduce((p: number, c: number) => {\n\t\t\treturn Math.max(p, c);\n\t\t}, 0);\n\t\tpositions.forEach((x: number, i: number) => positions[i] = x / radius * 2.0);\n\t\tif (!normals.length) {\n\t\t\tnormals = positions.slice();\n\t\t}\n\t\tif (!texcoords.length) {\n\t\t\ttexcoords = this.unrapUvw(positions);\n\t\t}\n\t\t/*\n\t\t// console.log(positions.length, normals.length, texcoords.length, colors.length,\n\t\t//\tpositions.length / 3 * 2 === texcoords.length,\n\t\t//\tpositions.length / 3 * 4 === colors.length);\n\t\t*/\n\t\treturn {\n\t\t\tpositions, normals, texcoords, colors\n\t\t};\n\t}\n\n\tunrapUvw(positions: number[]): number[] {\n\t\tconst texcoords: number[] = [];\n\t\tfor (let i = 0; i < positions.length; i += 3) {\n\t\t\tconst v = new Vector3(positions[i], positions[i + 1], positions[i + 2]);\n\t\t\tv.normalize();\n\t\t\tconst pitch = Math.asin(-v.y);\n\t\t\tconst yaw = Math.atan2(v.x, v.z);\n\t\t\tconst tx = 0.5 + pitch / Math.PI; // * 360;\n\t\t\tconst ty = 0.5 + yaw / (Math.PI * 2); // * 180;\n\t\t\ttexcoords.push(tx, ty);\n\t\t}\n\t\treturn texcoords;\n\t}\n}\n","\nimport IterableStringMap from '../core/iterable';\nimport Logger from '../logger/logger';\nimport { Texture } from '../textures/textures';\n\nexport enum UniformMethod {\n\tUnknown = 0,\n\tUniform1i = 'uniform1i', // (intUniformLoc,   v);                 // for int\n\t// Uniform1i  = 'uniform1i', // (boolUniformLoc,   v);                // for bool\n\t// Uniform1i  = 'uniform1i', // (sampler2DUniformLoc,   v);           // for sampler2D\n\t// Uniform1i  = 'uniform1i', // (samplerCubeUniformLoc,   v);         // for samplerCube\n\tUniform2i = 'uniform2i', // (ivec2UniformLoc, v0, v1);            // for ivec2\n\tUniform3i = 'uniform3i', // (ivec3UniformLoc, v0, v1, v2);        // for ivec3\n\tUniform4i = 'uniform4i', // (ivec4UniformLoc, v0, v1, v2, v4);    // for ivec4\n\tUniform1f = 'uniform1f', // (floatUniformLoc, v);                 // for float\n\tUniform2f = 'uniform2f', // (vec2UniformLoc,  v0, v1);            // for vec2\n\tUniform3f = 'uniform3f', // (vec3UniformLoc,  v0, v1, v2);        // for vec3\n\tUniform4f = 'uniform4f', // (vec4UniformLoc,  v0, v1, v2, v4);    // for vec4\n\t//\n\tUniform1iv = 'uniform1iv', // (intUniformLoc, [v]);                 // for int or int array\n\t// Uniform1iv = 'uniform1iv', // (boolUniformLoc, [v]);                // for bool or bool array\n\t// Uniform1iv = 'uniform1iv', // (sampler2DUniformLoc, [v]);           // for sampler2D or sampler2D array\n\t// Uniform1iv = 'uniform1iv', // (samplerCubeUniformLoc, [v]);         // for samplerCube or samplerCube array\n\tUniform2iv = 'uniform2iv', // (ivec2UniformLoc, [v0, v1]);          // for ivec2 or ivec2 array\n\tUniform3iv = 'uniform3iv', // (ivec3UniformLoc, [v0, v1, v2]);      // for ivec3 or ivec3 array\n\tUniform4iv = 'uniform4iv', // (ivec4UniformLoc, [v0, v1, v2, v4]);  // for ivec4 or ivec4 array\n\t//\n\tUniform1fv = 'uniform1fv', // (floatUniformLoc, [v]);               // for float or float array\n\tUniform2fv = 'uniform2fv', // (vec2UniformLoc,  [v0, v1]);          // for vec2 or vec2 array\n\tUniform3fv = 'uniform3fv', // (vec3UniformLoc,  [v0, v1, v2]);      // for vec3 or vec3 array\n\tUniform4fv = 'uniform4fv', // (vec4UniformLoc,  [v0, v1, v2, v4]);  // for vec4 or vec4 array\n\t//\n\tUniformMatrix2fv = 'uniformMatrix2fv', // (mat2UniformLoc, false, [  4x element array ])  // for mat2 or mat2 array\n\tUniformMatrix3fv = 'uniformMatrix3fv', // (mat3UniformLoc, false, [  9x element array ])  // for mat3 or mat3 array\n\tUniformMatrix4fv = 'uniformMatrix4fv', // (mat4UniformLoc, false, [ 16x element array ])  // for mat4 or mat4 array\n}\n\nexport enum UniformType {\n\tUnknown = 0,\n\tFloat,\n\tInt,\n\tBool,\n\tSampler2D,\n\tSamplerCube,\n\tMatrix2fv,\n\tMatrix3fv,\n\tMatrix4fv,\n}\n\nexport const METHODS_INT = [UniformMethod.Uniform1i, UniformMethod.Uniform2i, UniformMethod.Uniform3i, UniformMethod.Uniform4i];\nexport const METHODS_FLOAT = [UniformMethod.Uniform1f, UniformMethod.Uniform2f, UniformMethod.Uniform3f, UniformMethod.Uniform4f];\nexport const METHODS_INTV = [UniformMethod.Uniform1iv, UniformMethod.Uniform2iv, UniformMethod.Uniform3iv, UniformMethod.Uniform4iv];\nexport const METHODS_FLOATV = [UniformMethod.Uniform1fv, UniformMethod.Uniform2fv, UniformMethod.Uniform3fv, UniformMethod.Uniform4fv];\n\nexport interface IUniformOption { [key: string]: any[]; }\n\nexport class Uniform {\n\tmethod: UniformMethod;\n\ttype: UniformType;\n\tkey: string;\n\tvalues: any[];\n\tlocation?: WebGLUniformLocation;\n\tdirty?: boolean = true;\n\tapply?: Function;\n\n\tconstructor(options?: Uniform) {\n\t\tif (options) {\n\t\t\tObject.assign(this, options);\n\t\t}\n\t\tswitch (this.method) {\n\t\t\tcase UniformMethod.UniformMatrix2fv:\n\t\t\tcase UniformMethod.UniformMatrix3fv:\n\t\t\tcase UniformMethod.UniformMatrix4fv:\n\t\t\t\tthis.apply = (gl: WebGLRenderingContext | WebGL2RenderingContext, program: WebGLProgram) => {\n\t\t\t\t\tif (this.dirty) {\n\t\t\t\t\t\tgl.useProgram(program);\n\t\t\t\t\t\tconst location = gl.getUniformLocation(program, this.key);\n\t\t\t\t\t\t// Logger.log(this.key, this.method, this.values);\n\t\t\t\t\t\t// (gl as any)[this.method].apply(gl, [location].concat(this.values));\n\t\t\t\t\t\t(gl as any)[this.method].apply(gl, [location, false].concat(this.values));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.apply = (gl: WebGLRenderingContext | WebGL2RenderingContext, program: WebGLProgram) => {\n\t\t\t\t\tif (this.dirty) {\n\t\t\t\t\t\tgl.useProgram(program);\n\t\t\t\t\t\tconst location = gl.getUniformLocation(program, this.key);\n\t\t\t\t\t\t// Logger.log(this.key, this.method, this.values);\n\t\t\t\t\t\t// (gl as any)[this.method].apply(gl, [location].concat(this.values));\n\t\t\t\t\t\t(gl as any)[this.method].apply(gl, [location].concat(this.values));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t}\n\t}\n\n}\n\nexport class UniformTexture extends Uniform {\n\n\ttexture: Texture;\n\n\tconstructor(options?: Uniform) {\n\t\tsuper(options);\n\t}\n\n}\n\nexport default class Uniforms extends IterableStringMap<Uniform> {\n\n\tdirty: boolean = false;\n\n\tstatic isArrayOfInteger(array: any[]): boolean {\n\t\treturn array.reduce((flag: boolean, value: any) => {\n\t\t\treturn flag && Number.isInteger(value);\n\t\t}, true);\n\t}\n\n\tstatic isArrayOfNumber(array: any[]): boolean {\n\t\treturn array.reduce((flag: boolean, value: any) => {\n\t\t\treturn flag && typeof value === 'number';\n\t\t}, true);\n\t}\n\n\tstatic isArrayOfBoolean(array: any[]): boolean {\n\t\treturn array.reduce((flag: boolean, value: any) => {\n\t\t\treturn flag && typeof value === 'boolean';\n\t\t}, true);\n\t}\n\n\tstatic isArrayOfTexture(array: any[]): boolean {\n\t\treturn array.reduce((flag: boolean, value: any) => {\n\t\t\treturn flag && Texture.isTexture(value);\n\t\t}, true);\n\t}\n\n\tstatic isArrayOfSampler2D(array: Uniform[]): boolean {\n\t\treturn array.reduce((flag: boolean, value: Uniform) => {\n\t\t\treturn flag && value.type === UniformType.Sampler2D;\n\t\t}, true);\n\t}\n\n\tprivate static getType_(\n\t\tvalues: any[],\n\t): UniformType {\n\t\tlet type = UniformType.Unknown;\n\t\tconst isVector = values.length === 1 && Array.isArray(values[0]);\n\t\tconst subject = isVector ? values[0] : values;\n\t\tif (Uniforms.isArrayOfNumber(subject)) {\n\t\t\ttype = UniformType.Float;\n\t\t} else if (Uniforms.isArrayOfBoolean(subject)) {\n\t\t\ttype = UniformType.Bool;\n\t\t} else if (Uniforms.isArrayOfTexture(subject)) {\n\t\t\ttype = UniformType.Sampler2D;\n\t\t}\n\t\treturn type;\n\t}\n\n\tprivate static getMethod_(\n\t\ttype: UniformType,\n\t\tvalues: any[],\n\t): UniformMethod {\n\t\tlet method = UniformMethod.Unknown;\n\t\tconst isVector = values.length === 1 && Array.isArray(values[0]);\n\t\tconst subject = isVector ? values[0] : values;\n\t\tconst length = subject.length;\n\t\tconst i = length - 1;\n\t\tswitch (type) {\n\t\t\tcase UniformType.Float:\n\t\t\t\tif (isVector) {\n\t\t\t\t\tmethod = i < METHODS_FLOATV.length ? METHODS_FLOATV[i] : UniformMethod.Unknown;\n\t\t\t\t} else {\n\t\t\t\t\tmethod = i < METHODS_FLOAT.length ? METHODS_FLOAT[i] : UniformMethod.Uniform1fv;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase UniformType.Int:\n\t\t\tcase UniformType.Bool:\n\t\t\t\tif (isVector) {\n\t\t\t\t\tmethod = i < METHODS_INTV.length ? METHODS_INTV[i] : UniformMethod.Unknown;\n\t\t\t\t} else {\n\t\t\t\t\tmethod = i < METHODS_INT.length ? METHODS_INT[i] : UniformMethod.Uniform1iv;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase UniformType.Sampler2D:\n\t\t\t\tif (isVector) {\n\t\t\t\t\tmethod = UniformMethod.Uniform1iv;\n\t\t\t\t} else {\n\t\t\t\t\tmethod = length === 1 ? UniformMethod.Uniform1i : UniformMethod.Uniform1iv;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\treturn method;\n\t}\n\n\tstatic parseUniform(\n\t\tkey: string,\n\t\tvalues: any[],\n\t\ttype: UniformType = null\n\t): Uniform | Uniform[] {\n\t\tlet uniform: Uniform;\n\t\ttype = type || Uniforms.getType_(values);\n\t\tconst method = Uniforms.getMethod_(type, values);\n\t\tif (type !== UniformType.Unknown && method !== UniformMethod.Unknown) {\n\t\t\t// Logger.log('Uniforms.parseUniform', key, UniformType[type], method, values);\n\t\t\tif (type === UniformType.Sampler2D && method === UniformMethod.Uniform1iv) {\n\t\t\t\treturn values[0].map((texture: any, index: number) => {\n\t\t\t\t\treturn new Uniform({\n\t\t\t\t\t\tmethod: method,\n\t\t\t\t\t\ttype: type,\n\t\t\t\t\t\tkey: `${key}[${index}]`, // `${key.split('[')[0]}[${index}]`,\n\t\t\t\t\t\tvalues: [texture]\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tuniform = new Uniform({\n\t\t\t\t\tmethod: method,\n\t\t\t\t\ttype: type,\n\t\t\t\t\tkey: key,\n\t\t\t\t\tvalues: values\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tLogger.error('Uniforms.parseUniform.Unknown', key, values);\n\t\t}\n\t\t// return this.parseUniform__bak(key, values);\n\t\treturn uniform;\n\t}\n\n\tcreate(method: UniformMethod, type: UniformType, key: string, values: any[]): Uniform {\n\t\tconst uniform = new Uniform({\n\t\t\tmethod: method,\n\t\t\ttype: type,\n\t\t\tkey: key,\n\t\t\tvalues: values,\n\t\t});\n\t\tthis.set(key, uniform);\n\t\tthis.dirty = true;\n\t\treturn uniform;\n\t}\n\n\tcreateTexture(key: string, index: number): UniformTexture {\n\t\tlet uniform;\n\t\tif (key.indexOf(']') !== -1) {\n\t\t\tuniform = new UniformTexture({\n\t\t\t\tmethod: UniformMethod.Uniform1iv,\n\t\t\t\ttype: UniformType.Sampler2D,\n\t\t\t\tkey: key,\n\t\t\t\tvalues: [[index]],\n\t\t\t});\n\t\t} else {\n\t\t\tuniform = new UniformTexture({\n\t\t\t\tmethod: UniformMethod.Uniform1i,\n\t\t\t\ttype: UniformType.Sampler2D,\n\t\t\t\tkey: key,\n\t\t\t\tvalues: [index],\n\t\t\t});\n\t\t}\n\t\tthis.set(key, uniform);\n\t\tthis.dirty = true;\n\t\treturn uniform;\n\t}\n\n\tupdate(method: UniformMethod, type: UniformType, key: string, values: any[]) {\n\t\tconst uniform = this.get(key);\n\t\tif (uniform) {\n\t\t\t// !!! consider performance\n\t\t\t// && (uniform.method !== method || uniform.type !== type || Uniforms.isDifferent(uniform.values, values))) {\n\t\t\tuniform.method = method;\n\t\t\tuniform.type = type;\n\t\t\tuniform.values = values;\n\t\t\tuniform.dirty = true;\n\t\t\tthis.dirty = true;\n\t\t}\n\t}\n\n\tcreateOrUpdate(method: UniformMethod, type: UniformType, key: string, values: any[]) {\n\t\tif (this.has(key)) {\n\t\t\tthis.update(method, type, key, values);\n\t\t} else {\n\t\t\tthis.create(method, type, key, values);\n\t\t}\n\t}\n\n\tapply(gl: WebGLRenderingContext | WebGL2RenderingContext, program: WebGLProgram) {\n\t\tgl.useProgram(program);\n\t\tObject.keys(this.values).forEach((key) => {\n\t\t\t// if (typeof this.values[key].apply === 'function') {\n\t\t\tthis.values[key].apply(gl, program);\n\t\t\t// }\n\t\t});\n\t\t// this.forEach(uniform => uniform.apply(gl, program));\n\t}\n\n\tclean() {\n\t\tObject.keys(this.values).forEach((key) => {\n\t\t\tthis.values[key].dirty = false;\n\t\t});\n\t\tthis.dirty = false;\n\t}\n\n\t/*\n\t// slow\n\tstatic isDifferent(a: any, b: any): boolean {\n        return JSON.stringify(a) !== JSON.stringify(b);\n    }\n\t*/\n\n\tstatic isDifferent(a: any[], b: any[]) {\n\t\treturn a.length !== b.length || a.reduce((f: boolean, v: any, i: number) => {\n\t\t\treturn f || v !== b[i];\n\t\t}, false);\n\t}\n\n}\n","import { mat4 } from 'gl-matrix';\nimport Buffers, { IOBuffer } from '../buffers/buffers';\nimport OrbitCamera from '../camera/orbit-camera';\nimport CanvasTimer from '../canvas/canvas-timer';\nimport { ContextMode, ContextVertexBuffers } from '../context/context';\nimport Common from '../core/common';\nimport Subscriber from '../core/subscriber';\nimport BoxGeometry from '../geometry/box-geometry';\nimport FlatGeometry from '../geometry/flat-geometry';\nimport Geometry from '../geometry/geometry';\nimport SphereGeometry from '../geometry/sphere-geometry';\nimport TorusGeometry from '../geometry/torus-geometry';\nimport ObjLoader from '../loaders/obj-loader';\nimport Logger from '../logger/logger';\nimport Vector2 from '../math/vector2';\nimport Textures, { ITextureInput } from '../textures/textures';\nimport Uniforms, { UniformMethod, UniformType } from '../uniforms/uniforms';\n\nexport default class Renderer extends Subscriber {\n\n\tgl: WebGLRenderingContext | WebGL2RenderingContext;\n\tprogram: WebGLProgram;\n\ttimer: CanvasTimer;\n\tuniforms: Uniforms = new Uniforms();\n\tbuffers: Buffers = new Buffers();\n\ttextures: Textures = new Textures();\n\ttextureList: ITextureInput[] = [];\n\n\tW: number = 0;\n\tH: number = 0;\n\tmouse: Vector2 = new Vector2();\n\tradians: number = 0;\n\tdirty: boolean = true;\n\tanimated: boolean = false;\n\tdrawFunc_: (deltaTime: number) => void;\n\n\tvertexString: string;\n\tfragmentString: string;\n\n\tcamera: OrbitCamera = new OrbitCamera();\n\tgeometry: Geometry;\n\n\tvertexBuffers: ContextVertexBuffers;\n\n\tprojectionMatrix: mat4;\n\tmodelViewMatrix: mat4;\n\tnormalMatrix: mat4;\n\n\tmode: ContextMode;\n\tmesh: string;\n\tdefaultMesh: string;\n\tdoubleSided: boolean;\n\tcache: { [key: string]: Geometry } = {};\n\tworkpath: string;\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis.drawFunc_ = this.drawArrays_;\n\t}\n\n\tprotected render(): void {\n\t\tconst gl = this.gl;\n\t\tif (!gl) {\n\t\t\treturn;\n\t\t}\n\t\tconst BW = gl.drawingBufferWidth;\n\t\tconst BH = gl.drawingBufferHeight;\n\t\tthis.update_();\n\t\tgl.viewport(0, 0, BW, BH);\n\t\tconst uniforms = this.uniforms;\n\t\tObject.keys(this.buffers.values).forEach((key) => {\n\t\t\tconst buffer: IOBuffer = this.buffers.values[key];\n\t\t\tbuffer.geometry.attachAttributes_(gl, buffer.program);\n\t\t\t// uniforms.get('u_resolution').values = [1024, 1024];\n\t\t\tuniforms.apply(gl, buffer.program);\n\t\t\t/*\n\t\t\t// console.log('uniforms');\n\t\t\tObject.keys(uniforms.values).forEach((key) => {\n\t\t\t\tif (key.indexOf('u_buff') === 0) {\n\t\t\t\t\t// console.log(key);\n\t\t\t\t}\n\t\t\t});\n\t\t\t*/\n\t\t\tbuffer.render(gl, BW, BH);\n\t\t});\n\t\t// uniforms.get('u_resolution').values = [BW, BH];\n\t\tthis.geometry.attachAttributes_(gl, this.program);\n\t\tuniforms.apply(gl, this.program);\n\t\t// gl.viewport(0, 0, BW, BH);\n\t\tthis.drawFunc_(this.timer.delta);\n\t\tuniforms.clean();\n\t\tthis.textures.clean();\n\t\tthis.dirty = false;\n\t\tthis.trigger('render', this);\n\t}\n\n\tprotected drawArrays_(deltaTime: number) {\n\t\tconst gl = this.gl;\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\t\t// Clear\n\t\tgl.viewport(0, 0, this.W, this.H);\n\t\tgl.clearColor(0.0, 0.0, 0.0, 1.0);\n\t\tgl.clearDepth(1.0);\n\t\t// Clear the canvas before we start drawing on it.\n\t\t// gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\t\tgl.enable(gl.DEPTH_TEST);\n\t\tgl.depthFunc(gl.LEQUAL);\n\t\tgl.enable(gl.CULL_FACE);\n\t\tif (this.doubleSided && this.mode !== ContextMode.Flat) {\n\t\t\t// back\n\t\t\t// gl.frontFace(gl.CW);\n\t\t\tgl.cullFace(gl.FRONT);\n\t\t\tgl.drawArrays(gl.TRIANGLES, 0, this.geometry.size);\n\t\t\t// front\n\t\t\tgl.enable(gl.BLEND);\n\t\t\tgl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n\t\t}\n\t\t// gl.frontFace(gl.CCW);\n\t\tgl.cullFace(gl.BACK);\n\t\tgl.drawArrays(gl.TRIANGLES, 0, this.geometry.size);\n\t\t// gl.drawElements(gl.TRIANGLES, this.geometry.size, gl.UNSIGNED_SHORT, 0);\n\t}\n\n\tprotected create_(): void {\n\t\tthis.createGeometry_();\n\t\tthis.createUniforms_();\n\t}\n\n\tprotected createGeometry_() {\n\t\t// console.log('Geometry', Geometry);\n\t\t// console.log('FlatGeometry', FlatGeometry);\n\t\t// console.log('BoxGeometry', BoxGeometry);\n\t\tthis.parseGeometry_();\n\t\tthis.setMode(this.mode);\n\t}\n\n\tprotected parseGeometry_() {\n\t\tconst regexp = /^attribute\\s+vec4\\s+a_position\\s*;\\s*\\/\\/\\s*([\\w|\\:\\/\\/|\\.|\\-|\\_|\\?|\\&|\\=]+)/gm;\n\t\tconst match = regexp.exec(this.vertexString);\n\t\tif (match && match.length > 1) {\n\t\t\tthis.mesh = match[1];\n\t\t} else {\n\t\t\tthis.mesh = this.defaultMesh;\n\t\t}\n\t}\n\n\tprotected createUniforms_(): void {\n\t\tconst gl = this.gl;\n\t\tconst fragmentString = this.fragmentString;\n\t\tconst BW = gl.drawingBufferWidth;\n\t\tconst BH = gl.drawingBufferHeight;\n\t\tconst timer = this.timer = new CanvasTimer();\n\t\tconst hasDelta = (fragmentString.match(/u_delta/g) || []).length > 1;\n\t\tconst hasTime = (fragmentString.match(/u_time/g) || []).length > 1;\n\t\tconst hasDate = (fragmentString.match(/u_date/g) || []).length > 1;\n\t\tconst hasMouse = (fragmentString.match(/u_mouse/g) || []).length > 1;\n\t\tconst hasCamera = (fragmentString.match(/u_camera/g) || []).length > 1;\n\t\t// this.animated = hasTime || hasDate || hasMouse;\n\t\tthis.animated = true; // !!!\n\t\tconst uniforms = this.uniforms;\n\t\tuniforms.create(UniformMethod.Uniform2f, UniformType.Float, 'u_resolution', [BW, BH]);\n\t\tif (hasDelta) {\n\t\t\tuniforms.create(UniformMethod.Uniform1f, UniformType.Float, 'u_delta', [timer.delta / 1000.0]);\n\t\t\tthis.updateUniformDelta_ = this.updateUniformDelta__;\n\t\t} else {\n\t\t\tthis.updateUniformDelta_ = this.updateUniformNoop_;\n\t\t}\n\t\tif (hasTime) {\n\t\t\tuniforms.create(UniformMethod.Uniform1f, UniformType.Float, 'u_time', [timer.current / 1000.0]);\n\t\t\tthis.updateUniformTime_ = this.updateUniformTime__;\n\t\t} else {\n\t\t\tthis.updateUniformTime_ = this.updateUniformNoop_;\n\t\t}\n\t\tif (hasDate) {\n\t\t\tconst date = new Date();\n\t\t\tuniforms.create(UniformMethod.Uniform4f, UniformType.Float, 'u_date', [date.getFullYear(), date.getMonth(), date.getDate(), date.getHours() * 3600 + date.getMinutes() * 60 + date.getSeconds() + date.getMilliseconds() * 0.001]);\n\t\t\tthis.updateUniformDate_ = this.updateUniformDate__;\n\t\t} else {\n\t\t\tthis.updateUniformDate_ = this.updateUniformNoop_;\n\t\t}\n\t\tif (hasMouse) {\n\t\t\tuniforms.create(UniformMethod.Uniform2f, UniformType.Float, 'u_mouse', [0, 0]);\n\t\t\tthis.updateUniformMouse_ = this.updateUniformMouse__;\n\t\t} else {\n\t\t\tthis.updateUniformMouse_ = this.updateUniformNoop_;\n\t\t}\n\t\tif (hasCamera) {\n\t\t\tuniforms.create(UniformMethod.Uniform3f, UniformType.Float, 'u_camera', [0, 0, 0]);\n\t\t\tthis.updateUniformCamera_ = this.updateUniformCamera__;\n\t\t} else {\n\t\t\tthis.updateUniformCamera_ = this.updateUniformNoop_;\n\t\t}\n\t\t// if (this.mode !== ContextMode.Flat) {\n\t\tthis.projectionMatrix = mat4.create();\n\t\tuniforms.create(UniformMethod.UniformMatrix4fv, UniformType.Float, 'u_projectionMatrix', this.projectionMatrix as number[]);\n\t\tthis.modelViewMatrix = mat4.create();\n\t\tuniforms.create(UniformMethod.UniformMatrix4fv, UniformType.Float, 'u_modelViewMatrix', this.modelViewMatrix as number[]);\n\t\tthis.normalMatrix = mat4.create();\n\t\tuniforms.create(UniformMethod.UniformMatrix4fv, UniformType.Float, 'u_normalMatrix', this.normalMatrix as number[]);\n\t\t// }\n\t}\n\n\tprotected update_(): void {\n\t\tconst gl = this.gl;\n\t\tconst BW = gl.drawingBufferWidth;\n\t\tconst BH = gl.drawingBufferHeight;\n\t\tif (!this.timer) {\n\t\t\treturn;\n\t\t}\n\t\tconst timer = this.timer.next();\n\t\tconst uniforms = this.uniforms;\n\t\tuniforms.update(UniformMethod.Uniform2f, UniformType.Float, 'u_resolution', [BW, BH]);\n\t\tthis.updateUniformDelta_(timer);\n\t\tthis.updateUniformTime_(timer);\n\t\tthis.updateUniformDate_();\n\t\tthis.updateUniformMouse_();\n\t\tthis.updateUniformCamera_();\n\t\tthis.updateUniformMesh_();\n\t}\n\n\tupdateUniformNoop_(): void {};\n\tupdateUniformDelta_: (timer:CanvasTimer) => void;\n\tupdateUniformTime_: (timer:CanvasTimer) => void;\n\tupdateUniformDate_: () => void;\n\tupdateUniformMouse_: () => void;\n\tupdateUniformCamera_: () => void;\n\tupdateUniformMesh_: () => void;\n\n\tprotected updateUniformDelta__(timer:CanvasTimer):void {\n\t\tconst uniforms = this.uniforms;\n\t\tuniforms.update(UniformMethod.Uniform1f, UniformType.Float, 'u_delta', [timer.delta / 1000.0]);\n\t};\n\tprotected updateUniformTime__(timer:CanvasTimer):void {\n\t\tconst uniforms = this.uniforms;\n\t\tuniforms.update(UniformMethod.Uniform1f, UniformType.Float, 'u_time', [timer.current / 1000.0]);\n\t};\n\tprotected updateUniformDate__():void {\n\t\tconst uniforms = this.uniforms;\n\t\tconst date = new Date();\n\t\tuniforms.update(UniformMethod.Uniform4f, UniformType.Float, 'u_date', [date.getFullYear(), date.getMonth(), date.getDate(), date.getHours() * 3600 + date.getMinutes() * 60 + date.getSeconds() + date.getMilliseconds() * 0.001]);\n\t};\n\tprotected updateUniformMouse__():void {\n\t\tconst uniforms = this.uniforms;\n\t\tconst mouse = this.mouse;\n\t\tuniforms.update(UniformMethod.Uniform2f, UniformType.Float, 'u_mouse', [mouse.x, mouse.y]);\n\t\t/*\n\t\tconst rect = this.rect;\n\t\tif (mouse.x >= rect.left && mouse.x <= rect.right &&\n\t\t\tmouse.y >= rect.top && mouse.y <= rect.bottom) {\n\t\t\tconst MX = (mouse.x - rect.left) * this.devicePixelRatio;\n\t\t\tconst MY = (this.canvas.height - (mouse.y - rect.top) * this.devicePixelRatio);\n\t\t\tuniforms.update(UniformMethod.Uniform2f, UniformType.Float, 'u_mouse', [MX, MY]);\n\t\t}\n\t\t*/\n\t};\n\tprotected updateUniformCamera__():void {\n\t\tconst uniforms = this.uniforms;\n\t\tconst array = OrbitCamera.toArray(this.camera);\n\t\tuniforms.update(UniformMethod.Uniform3f, UniformType.Float, 'u_camera', array);\n\t};\n\tprotected updateUniformMesh__():void {\n\t\tconst uniforms = this.uniforms;\n\t\tuniforms.update(UniformMethod.UniformMatrix4fv, UniformType.Float, 'u_projectionMatrix', this.updateProjectionMatrix_() as number[]);\n\t\tuniforms.update(UniformMethod.UniformMatrix4fv, UniformType.Float, 'u_modelViewMatrix', this.updateModelViewMatrix_(this.timer.delta) as number[]);\n\t\tuniforms.update(UniformMethod.UniformMatrix4fv, UniformType.Float, 'u_normalMatrix', this.updateNormalMatrix_(this.modelViewMatrix) as number[]);\n\t};\n\tprotected updateUniformFlat__():void {\n\t\tconst uniforms = this.uniforms;\n\t\tuniforms.update(UniformMethod.UniformMatrix4fv, UniformType.Float, 'u_projectionMatrix', mat4.create() as number[]);\n\t\tuniforms.update(UniformMethod.UniformMatrix4fv, UniformType.Float, 'u_modelViewMatrix', mat4.create() as number[]);\n\t\tuniforms.update(UniformMethod.UniformMatrix4fv, UniformType.Float, 'u_normalMatrix', mat4.create() as number[]);\n\t}\n\n\tprotected updateProjectionMatrix_(): mat4 {\n\t\tconst gl = this.gl;\n\t\tconst fieldOfView = 45 * Math.PI / 180;\n\t\tconst aspect = gl.drawingBufferWidth / gl.drawingBufferHeight;\n\t\tconst zNear = 0.1;\n\t\tconst zFar = 100.0;\n\t\tmat4.perspective(this.projectionMatrix, fieldOfView, aspect, zNear, zFar);\n\t\treturn this.projectionMatrix;\n\t}\n\n\tprotected updateModelViewMatrix_(deltaTime: number): mat4 {\n\t\tconst camera = this.camera;\n\t\tlet modelViewMatrix = this.modelViewMatrix;\n\t\tmodelViewMatrix = mat4.identity(modelViewMatrix);\n\t\tmat4.translate(modelViewMatrix, modelViewMatrix, [0.0, 0.0, -camera.radius]); // amount to translate\n\t\tmat4.rotate(modelViewMatrix, modelViewMatrix, camera.theta + this.radians, [0, 1, 0]); // axis to rotate around (Y)\n\t\tmat4.rotate(modelViewMatrix, modelViewMatrix, camera.phi, [1, 0, 0]); // axis to rotate around (X)\n\t\tif (!camera.mouse) {\n\t\t\tcamera.theta += (0 - camera.theta) / 20;\n\t\t\tcamera.phi += (0 - camera.phi) / 20;\n\t\t\tthis.radians += deltaTime * 0.0005;\n\t\t}\n\t\treturn modelViewMatrix;\n\t}\n\n\tprotected updateNormalMatrix_(modelViewMatrix: mat4): mat4 {\n\t\t// this.normalMatrix = mat4.create();\n\t\tlet normalMatrix = this.normalMatrix;\n\t\tnormalMatrix = mat4.identity(normalMatrix);\n\t\tmat4.invert(normalMatrix, modelViewMatrix);\n\t\tmat4.transpose(normalMatrix, normalMatrix);\n\t\treturn normalMatrix;\n\t}\n\n\tpublic setMode(mode: ContextMode) {\n\t\tlet geometry: Geometry;\n\t\tif (mode === ContextMode.Mesh) {\n\t\t\tgeometry = this.cache[this.mesh];\n\t\t\tif (geometry) {\n\t\t\t\tthis.geometry = geometry;\n\t\t\t\tthis.mode = ContextMode.Mesh;\n\t\t\t\tthis.updateUniformMesh_ = this.updateUniformMesh__;\n\t\t\t\tthis.dirty = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tlet loader: ObjLoader;\n\t\tswitch (mode) {\n\t\t\tcase ContextMode.Flat:\n\t\t\t\tgeometry = new FlatGeometry();\n\t\t\t\tthis.updateUniformMesh_ = this.updateUniformNoop_;\n\t\t\t\tthis.updateUniformFlat__();\n\t\t\t\tbreak;\n\t\t\tcase ContextMode.Box:\n\t\t\t\tgeometry = new BoxGeometry();\n\t\t\t\tthis.updateUniformMesh_ = this.updateUniformMesh__;\n\t\t\t\tbreak;\n\t\t\tcase ContextMode.Sphere:\n\t\t\t\tgeometry = new SphereGeometry();\n\t\t\t\tthis.updateUniformMesh_ = this.updateUniformMesh__;\n\t\t\t\tbreak;\n\t\t\tcase ContextMode.Torus:\n\t\t\t\tgeometry = new TorusGeometry();\n\t\t\t\tthis.updateUniformMesh_ = this.updateUniformMesh__;\n\t\t\t\tbreak;\n\t\t\tcase ContextMode.Mesh:\n\t\t\t\tgeometry = new FlatGeometry();\n\t\t\t\tif (this.mesh) {\n\t\t\t\t\tloader = new ObjLoader();\n\t\t\t\t\tloader.load(Common.getResource(this.mesh, this.workpath)).then(geometry => {\n\t\t\t\t\t\tgeometry.createAttributes_(this.gl, this.program);\n\t\t\t\t\t\tconst cache: { [key: string]: Geometry } = {};\n\t\t\t\t\t\tcache[this.mesh] = geometry;\n\t\t\t\t\t\tthis.cache = cache;\n\t\t\t\t\t\tthis.geometry = geometry;\n\t\t\t\t\t\tthis.dirty = true;\n\t\t\t\t\t}, error => {\n\t\t\t\t\t\tLogger.warn('GlslCanvas', error);\n\t\t\t\t\t\tthis.mode = ContextMode.Flat;\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tmode = ContextMode.Flat;\n\t\t\t\t}\n\t\t\t\tthis.updateUniformMesh_ = this.updateUniformMesh__;\n\t\t\t\tbreak;\n\t\t}\n\t\tgeometry.create(this.gl, this.program);\n\t\tthis.geometry = geometry;\n\t\tthis.mode = mode;\n\t\tthis.dirty = true;\n\t}\n\n\tpublic setMesh(mesh: string) {\n\t\tthis.mesh = mesh;\n\t}\n}\n","import 'promise-polyfill';\nimport Buffers, { IOBuffer } from '../buffers/buffers';\nimport Context, { ContextMode } from '../context/context';\nimport Common from '../core/common';\nimport Logger from '../logger/logger';\nimport Vector2 from '../math/vector2';\nimport Renderer from '../renderer/renderer';\nimport Textures, { ITextureData, ITextureOptions, Texture } from '../textures/textures';\nimport Uniforms, { IUniformOption, Uniform, UniformMethod, UniformType } from '../uniforms/uniforms';\n\nexport interface ICanvasOptions extends WebGLContextAttributes {\n\tvertexString?: string;\n\tfragmentString?: string;\n\tbackgroundColor?: string;\n\tworkpath?: string;\n\tonError?: Function;\n\textensions?: string[];\n\tmode?: ContextMode;\n\tmesh?: string;\n\tdoubleSided?: boolean;\n}\n\nexport default class Canvas extends Renderer {\n\n\toptions: ICanvasOptions;\n\tcanvas: HTMLCanvasElement;\n\trect: ClientRect | DOMRect;\n\twidth: number;\n\theight: number;\n\tdevicePixelRatio: number;\n\tvalid: boolean = false;\n\tvisible: boolean = false;\n\tcontrols: boolean = false;\n\trafId: number;\n\tvertexPath: string = '';\n\tfragmentPath: string = '';\n\n\tstatic items: Canvas[] = [];\n\n\tconstructor(\n\t\tcanvas: HTMLCanvasElement,\n\t\toptions: ICanvasOptions = {\n\t\t\t// alpha: true,\n\t\t\t// antialias: true,\n\t\t\t// premultipliedAlpha: true\n\t\t}\n\t) {\n\t\tsuper();\n\t\tif (!canvas) {\n\t\t\treturn;\n\t\t}\n\t\tthis.options = options;\n\t\tthis.canvas = canvas;\n\t\tthis.width = 0;\n\t\tthis.height = 0;\n\t\tthis.rect = canvas.getBoundingClientRect();\n\t\tthis.devicePixelRatio = window.devicePixelRatio || 1;\n\t\tthis.mode = options.mode || ContextMode.Flat;\n\t\tthis.mesh = options.mesh || undefined;\n\t\tthis.doubleSided = options.doubleSided || false;\n\t\tthis.defaultMesh = this.mesh;\n\t\tthis.workpath = options.workpath;\n\t\tcanvas.style.backgroundColor = options.backgroundColor || 'rgba(0,0,0,0)';\n\t\tthis.getShaders_().then((_) => {\n\t\t\tthis.load().then(_ => {\n\t\t\t\tif (!this.program) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.addListeners_();\n\t\t\t\tthis.onLoop();\n\t\t\t});\n\t\t}, (error) => {\n\t\t\tLogger.error('GlslCanvas.getShaders_.error', error);\n\t\t});\n\t\tCanvas.items.push(this);\n\t}\n\n\tprivate getShaders_(): Promise<string[]> {\n\t\treturn new Promise((resolve) => {\n\t\t\tthis.vertexString = this.options.vertexString || this.vertexString;\n\t\t\tthis.fragmentString = this.options.fragmentString || this.fragmentString;\n\t\t\tconst canvas = this.canvas;\n\t\t\tconst urls: any = {};\n\t\t\tif (canvas.hasAttribute('data-vertex-url')) {\n\t\t\t\turls.vertex = canvas.getAttribute('data-vertex-url');\n\t\t\t}\n\t\t\tif (canvas.hasAttribute('data-fragment-url')) {\n\t\t\t\turls.fragment = canvas.getAttribute('data-fragment-url');\n\t\t\t}\n\t\t\tif (canvas.hasAttribute('data-vertex')) {\n\t\t\t\tthis.vertexString = canvas.getAttribute('data-vertex');\n\t\t\t}\n\t\t\tif (canvas.hasAttribute('data-fragment')) {\n\t\t\t\tthis.fragmentString = canvas.getAttribute('data-fragment');\n\t\t\t}\n\t\t\tif (Object.keys(urls).length) {\n\t\t\t\tPromise.all(Object.keys(urls).map((key) => {\n\t\t\t\t\tconst url = Common.getResource(urls[key], this.workpath);\n\t\t\t\t\treturn Common.fetch(url)\n\t\t\t\t\t\t// .then((response) => response.text())\n\t\t\t\t\t\t.then((body) => {\n\t\t\t\t\t\t\tconst path = Common.dirname(urls[key]);\n\t\t\t\t\t\t\tif (key === 'vertex') {\n\t\t\t\t\t\t\t\tthis.vertexPath = path;\n\t\t\t\t\t\t\t\treturn this.vertexString = body;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.fragmentPath = path;\n\t\t\t\t\t\t\t\treturn this.fragmentString = body;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t})).then(_ => {\n\t\t\t\t\tresolve([this.vertexString, this.fragmentString]);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tresolve([this.vertexString, this.fragmentString]);\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate addListeners_(): void {\n\t\t/*\n\t\tconst resize = (e: Event) => {\n\t\t\tthis.rect = this.canvas.getBoundingClientRect();\n\t\t\tthis.trigger('resize', e);\n\t\t};\n\t\t*/\n\t\tthis.onScroll = this.onScroll.bind(this);\n\t\tthis.onWheel = this.onWheel.bind(this);\n\t\tthis.onClick = this.onClick.bind(this);\n\t\tthis.onMove = this.onMove.bind(this);\n\t\tthis.onMouseDown = this.onMouseDown.bind(this);\n\t\tthis.onMouseMove = this.onMouseMove.bind(this);\n\t\tthis.onMouseOver = this.onMouseOver.bind(this);\n\t\tthis.onMouseOut = this.onMouseOut.bind(this);\n\t\tthis.onMouseUp = this.onMouseUp.bind(this);\n\t\tthis.onTouchMove = this.onTouchMove.bind(this);\n\t\tthis.onTouchEnd = this.onTouchEnd.bind(this);\n\t\tthis.onTouchStart = this.onTouchStart.bind(this);\n\t\tthis.onLoop = this.onLoop.bind(this);\n\t\t// window.addEventListener('resize', this.onResize);\n\t\twindow.addEventListener('scroll', this.onScroll);\n\t\tdocument.addEventListener('mousemove', this.onMouseMove, false);\n\t\tdocument.addEventListener('touchmove', this.onTouchMove);\n\t\tthis.addCanvasListeners_();\n\t}\n\n\tprivate addCanvasListeners_() {\n\t\tthis.controls = this.canvas.hasAttribute('controls');\n\t\tthis.canvas.addEventListener('wheel', this.onWheel);\n\t\tthis.canvas.addEventListener('click', this.onClick);\n\t\tthis.canvas.addEventListener('mousedown', this.onMouseDown);\n\t\tthis.canvas.addEventListener('touchstart', this.onTouchStart);\n\t\tif (this.controls) {\n\t\t\tthis.canvas.addEventListener('mouseover', this.onMouseOver);\n\t\t\tthis.canvas.addEventListener('mouseout', this.onMouseOut);\n\t\t\tif (!this.canvas.hasAttribute('data-autoplay')) {\n\t\t\t\tthis.pause();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate removeCanvasListeners_() {\n\t\tthis.canvas.removeEventListener('wheel', this.onWheel);\n\t\tthis.canvas.removeEventListener('click', this.onClick);\n\t\tthis.canvas.removeEventListener('mousedown', this.onMouseDown);\n\t\tthis.canvas.removeEventListener('mouseup', this.onMouseUp);\n\t\tthis.canvas.removeEventListener('touchstart', this.onTouchStart);\n\t\tthis.canvas.removeEventListener('touchend', this.onTouchEnd);\n\t\tif (this.controls) {\n\t\t\tthis.canvas.removeEventListener('mouseover', this.onMouseOver);\n\t\t\tthis.canvas.removeEventListener('mouseout', this.onMouseOut);\n\t\t}\n\t}\n\n\tprivate removeListeners_() {\n\t\twindow.cancelAnimationFrame(this.rafId);\n\t\t// window.removeEventListener('resize', this.onResize);\n\t\twindow.removeEventListener('scroll', this.onScroll);\n\t\tdocument.removeEventListener('mousemove', this.onMouseMove);\n\t\tdocument.removeEventListener('touchmove', this.onTouchMove);\n\t\tthis.removeCanvasListeners_();\n\t}\n\n\tprivate onScroll(_: Event) {\n\t\tthis.rect = this.canvas.getBoundingClientRect();\n\t}\n\n\tprivate onWheel(e: WheelEvent) {\n\t\tthis.camera.wheel(e.deltaY);\n\t\tthis.dirty = this.mode !== ContextMode.Flat;\n\t\tthis.trigger('wheel', e);\n\t}\n\n\tprivate onClick(e: MouseEvent) {\n\t\tif (this.controls) {\n\t\t\tthis.toggle();\n\t\t}\n\t\tthis.trigger('click', e);\n\t}\n\n\tprivate onDown(mx: number, my: number) {\n\t\tconst rect = this.rect;\n\t\tmx = (mx - rect.left);\n\t\tmy = (rect.height - (my - rect.top));\n\t\tconst x = mx * this.devicePixelRatio;\n\t\tconst y = my * this.devicePixelRatio;\n\t\tthis.mouse.x = x;\n\t\tthis.mouse.y = y;\n\t\tconst min = Math.min(rect.width, rect.height);\n\t\tthis.camera.down(mx / min, my / min);\n\t\tthis.trigger('down', this.mouse);\n\t}\n\n\tprivate onMove(mx: number, my: number) {\n\t\tconst rect = this.rect;\n\t\tmx = (mx - rect.left);\n\t\tmy = (rect.height - (my - rect.top));\n\t\tconst x = mx * this.devicePixelRatio;\n\t\tconst y = my * this.devicePixelRatio;\n\t\tif (x !== this.mouse.x ||\n\t\t\ty !== this.mouse.y) {\n\t\t\tthis.mouse.x = x;\n\t\t\tthis.mouse.y = y;\n\t\t\tconst min = Math.min(rect.width, rect.height);\n\t\t\tthis.camera.move(mx / min, my / min);\n\t\t\tthis.dirty = this.mode !== ContextMode.Flat && this.camera.mouse !== null;\n\t\t\tthis.trigger('move', this.mouse);\n\t\t}\n\t}\n\n\tprivate onUp(e: Event) {\n\t\tthis.camera.up();\n\t\tif (this.controls) {\n\t\t\tthis.pause();\n\t\t}\n\t\tthis.trigger('out', e);\n\t}\n\n\tprivate onMouseDown(e: MouseEvent) {\n\t\tthis.onDown(e.clientX, e.clientY);\n\t\tdocument.addEventListener('mouseup', this.onMouseUp);\n\t\tdocument.removeEventListener('touchstart', this.onTouchStart);\n\t\tdocument.removeEventListener('touchmove', this.onTouchMove);\n\t}\n\n\tprivate onMouseMove(e: MouseEvent) {\n\t\tthis.onMove(e.clientX, e.clientY);\n\t}\n\n\tprivate onMouseUp(e: MouseEvent) {\n\t\tthis.onUp(e);\n\t}\n\n\tprivate onMouseOver(e: MouseEvent) {\n\t\tthis.play();\n\t\tthis.trigger('over', e);\n\t}\n\n\tprivate onMouseOut(e: MouseEvent) {\n\t\tthis.pause();\n\t\tthis.trigger('out', e);\n\t}\n\n\tprivate onTouchStart(e: TouchEvent) {\n\t\tconst touch = [].slice.call(e.touches).reduce((p: Vector2, touch: Touch) => {\n\t\t\tp = p || new Vector2();\n\t\t\tp.x += touch.clientX;\n\t\t\tp.y += touch.clientY;\n\t\t\treturn p;\n\t\t}, null);\n\t\tif (touch) {\n\t\t\tthis.onDown(touch.x / e.touches.length, touch.y / e.touches.length);\n\t\t}\n\t\tif (this.controls) {\n\t\t\tthis.play();\n\t\t}\n\t\tthis.trigger('over', e);\n\t\tdocument.addEventListener('touchend', this.onTouchEnd);\n\t\tdocument.removeEventListener('mousedown', this.onMouseDown);\n\t\tdocument.removeEventListener('mousemove', this.onMouseMove);\n\t\tif (this.controls) {\n\t\t\tthis.canvas.removeEventListener('mouseover', this.onMouseOver);\n\t\t\tthis.canvas.removeEventListener('mouseout', this.onMouseOut);\n\t\t}\n\t}\n\n\tprivate onTouchMove(e: TouchEvent) {\n\t\tconst touch = [].slice.call(e.touches).reduce((p: Vector2, touch: Touch) => {\n\t\t\tp = p || new Vector2();\n\t\t\tp.x += touch.clientX;\n\t\t\tp.y += touch.clientY;\n\t\t\treturn p;\n\t\t}, null);\n\t\tif (touch) {\n\t\t\tthis.onMove(touch.x / e.touches.length, touch.y / e.touches.length);\n\t\t}\n\t}\n\n\tprivate onTouchEnd(e: TouchEvent) {\n\t\tthis.onUp(e);\n\t\tdocument.removeEventListener('touchend', this.onTouchEnd);\n\t}\n\n\tprivate onLoop(_?: number) {\n\t\tthis.checkRender();\n\t\tthis.rafId = window.requestAnimationFrame(this.onLoop);\n\t}\n\n\tprivate setUniform_(\n\t\tkey: string,\n\t\tvalues: any[],\n\t\toptions: ITextureOptions = {},\n\t\ttype: UniformType = null\n\t): void {\n\t\tconst uniform: Uniform | Uniform[] = Uniforms.parseUniform(key, values, type);\n\t\tif (Array.isArray(uniform)) {\n\t\t\tif (Uniforms.isArrayOfSampler2D(uniform)) {\n\t\t\t\tuniform.forEach((x) => this.loadTexture(x.key, x.values[0], options));\n\t\t\t} else {\n\t\t\t\tuniform.forEach((x) => this.uniforms.set(x.key, x.values[0]));\n\t\t\t}\n\t\t} else if (uniform) {\n\t\t\tswitch (uniform.type) {\n\t\t\t\tcase UniformType.Sampler2D:\n\t\t\t\t\tthis.loadTexture(key, values[0], options);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.uniforms.set(key, uniform);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate isVisible_(): boolean {\n\t\tconst rect = this.rect;\n\t\treturn (rect.top + rect.height) > 0 && rect.top < (window.innerHeight || document.documentElement.clientHeight);\n\t}\n\n\tprivate isAnimated_(): boolean {\n\t\treturn (this.animated || this.textures.animated || this.mode !== ContextMode.Flat) && !this.timer.paused;\n\t}\n\n\tprivate isDirty_(): boolean {\n\t\treturn this.dirty || this.uniforms.dirty || this.textures.dirty;\n\t}\n\n\t// check size change at start of requestFrame\n\tprivate sizeDidChanged_(): boolean {\n\t\tconst gl = this.gl;\n\t\tconst CW = Math.ceil(this.canvas.clientWidth),\n\t\t\tCH = Math.ceil(this.canvas.clientHeight);\n\t\tif (this.width !== CW ||\n\t\t\tthis.height !== CH) {\n\t\t\tthis.width = CW;\n\t\t\tthis.height = CH;\n\t\t\t// Lookup the size the browser is displaying the canvas in CSS pixels\n\t\t\t// and compute a size needed to make our drawingbuffer match it in\n\t\t\t// device pixels.\n\t\t\tconst W = Math.ceil(CW * this.devicePixelRatio);\n\t\t\tconst H = Math.ceil(CH * this.devicePixelRatio);\n\t\t\tthis.W = W;\n\t\t\tthis.H = H;\n\t\t\tthis.canvas.width = W;\n\t\t\tthis.canvas.height = H;\n\t\t\t/*\n\t\t\tif (gl.canvas.width !== W ||\n\t\t\t\tgl.canvas.height !== H) {\n\t\t\t\tgl.canvas.width = W;\n\t\t\t\tgl.canvas.height = H;\n\t\t\t\t// Set the viewport to match\n\t\t\t\t// gl.viewport(0, 0, W, H);\n\t\t\t}\n\t\t\t*/\n\t\t\tObject.keys(this.buffers.values).forEach((key) => {\n\t\t\t\tconst buffer: IOBuffer = this.buffers.values[key];\n\t\t\t\tbuffer.resize(gl, W, H);\n\t\t\t});\n\t\t\tthis.rect = this.canvas.getBoundingClientRect();\n\t\t\tthis.trigger('resize');\n\t\t\t// gl.useProgram(this.program);\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tprivate parseTextures_(fragmentString: string): boolean {\n\t\tconst regexp = /uniform\\s*sampler2D\\s*([\\w]*);(\\s*\\/\\/\\s*([\\w|\\:\\/\\/|\\.|\\-|\\_|\\?|\\&|\\=]*)|\\s*)/gm;\n\t\tlet matches;\n\t\twhile ((matches = regexp.exec(fragmentString)) !== null) {\n\t\t\tconst key = matches[1];\n\t\t\tconst url = matches[3];\n\t\t\tif (Texture.isTextureUrl(url)) {\n\t\t\t\tthis.textureList.push({ key, url });\n\t\t\t} else if (!this.buffers.has(key)) {\n\t\t\t\t// create empty texture\n\t\t\t\tthis.textureList.push({ key, url: null });\n\t\t\t}\n\t\t}\n\t\tif (this.canvas.hasAttribute('data-textures')) {\n\t\t\tconst urls = this.canvas.getAttribute('data-textures').split(',');\n\t\t\turls.forEach((url: string, i: number) => {\n\t\t\t\tconst key = 'u_texture' + i;\n\t\t\t\tthis.textureList.push({ key, url });\n\t\t\t});\n\t\t}\n\t\treturn this.textureList.length > 0;\n\t}\n\n\tload(\n\t\tfragmentString?: string,\n\t\tvertexString?: string\n\t): Promise<boolean> {\n\t\tconst fragmentVertexString: string = Context.getFragmentVertex(this.gl, fragmentString || this.fragmentString);\n\t\treturn Promise.all([\n\t\t\tContext.getIncludes(fragmentString || this.fragmentString, this.fragmentPath === '' ? this.workpath : this.fragmentPath),\n\t\t\tContext.getIncludes(fragmentVertexString || vertexString || this.vertexString, this.vertexPath === '' ? this.workpath : this.vertexPath)\n\t\t]).then(array => {\n\t\t\tthis.fragmentString = array[0];\n\t\t\tthis.vertexString = array[1];\n\t\t\treturn this.createContext_();\n\t\t});\n\t}\n\n\tprivate getContext_(): WebGLRenderingContext | WebGL2RenderingContext {\n\t\tconst vertexString = this.vertexString;\n\t\tconst fragmentString = this.fragmentString;\n\t\tthis.vertexString = Context.getVertex(vertexString, fragmentString, this.mode);\n\t\tthis.fragmentString = Context.getFragment(vertexString, fragmentString, this.mode);\n\t\tif (Context.versionDiffers(this.gl, vertexString, fragmentString)) {\n\t\t\tthis.destroyContext_();\n\t\t\tthis.swapCanvas_();\n\t\t\tthis.uniforms = new Uniforms();\n\t\t\tthis.buffers = new Buffers();\n\t\t\tthis.textures = new Textures();\n\t\t\tthis.textureList = [];\n\t\t}\n\t\tif (!this.gl) {\n\t\t\tconst gl = Context.tryInferContext(vertexString, fragmentString, this.canvas, this.options, this.options.extensions, this.options.onError);\n\t\t\tif (!gl) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tthis.gl = gl;\n\t\t}\n\t\treturn this.gl;\n\t}\n\n\tprivate createContext_(): boolean {\n\t\tconst gl = this.getContext_();\n\t\tif (!gl) {\n\t\t\treturn false;\n\t\t}\n\t\tlet vertexShader, fragmentShader;\n\t\ttry {\n\t\t\tContext.inferPrecision(this.fragmentString);\n\t\t\tvertexShader = Context.createShader(gl, this.vertexString, gl.VERTEX_SHADER);\n\t\t\tfragmentShader = Context.createShader(gl, this.fragmentString, gl.FRAGMENT_SHADER);\n\t\t\t// If Fragment shader fails load a empty one to sign the error\n\t\t\tif (!fragmentShader) {\n\t\t\t\tconst defaultFragment = Context.getFragment(null, null, this.mode);\n\t\t\t\tfragmentShader = Context.createShader(gl, defaultFragment, gl.FRAGMENT_SHADER);\n\t\t\t\tthis.valid = false;\n\t\t\t} else {\n\t\t\t\tthis.valid = true;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t// !!!\n\t\t\t// console.error(e);\n\t\t\tthis.trigger('error', e);\n\t\t\treturn false;\n\t\t}\n\t\t// Create and use program\n\t\tconst program = Context.createProgram(gl, [vertexShader, fragmentShader]); //, [0,1],['a_texcoord','a_position']);\n\t\tif (!program) {\n\t\t\tthis.trigger('error', Context.lastError);\n\t\t\treturn false;\n\t\t}\n\t\t// console.log(this.vertexString, this.fragmentString, program);\n\t\t// Delete shaders\n\t\t// gl.detachShader(program, vertexShader);\n\t\t// gl.detachShader(program, fragmentShader);\n\t\tgl.deleteShader(vertexShader);\n\t\tgl.deleteShader(fragmentShader);\n\t\tthis.program = program;\n\t\tif (this.valid) {\n\t\t\ttry {\n\t\t\t\tthis.buffers = Buffers.getBuffers(gl, this.fragmentString, Context.getBufferVertex(gl));\n\t\t\t} catch (e) {\n\t\t\t\t// console.error('load', e);\n\t\t\t\tthis.valid = false;\n\t\t\t\tthis.trigger('error', e);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.create_();\n\t\t\tif (this.animated) {\n\t\t\t\tthis.canvas.classList.add('animated');\n\t\t\t} else {\n\t\t\t\tthis.canvas.classList.remove('animated');\n\t\t\t}\n\t\t}\n\t\t// Trigger event\n\t\tthis.trigger('load', this);\n\t\treturn this.valid;\n\t}\n\n\tprotected create_(): void {\n\t\tthis.parseMode_();\n\t\tthis.parseMesh_();\n\t\tsuper.create_();\n\t\tthis.createBuffers_();\n\t\tthis.createTextures_();\n\t}\n\n\tprotected parseMode_() {\n\t\tif (this.canvas.hasAttribute('data-mode')) {\n\t\t\tconst data = this.canvas.getAttribute('data-mode');\n\t\t\tif (['flat', 'box', 'sphere', 'torus', 'mesh'].indexOf(data) !== -1) {\n\t\t\t\tthis.mode = data as ContextMode;\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected parseMesh_() {\n\t\tif (this.canvas.hasAttribute('data-mesh')) {\n\t\t\tconst data = this.canvas.getAttribute('data-mesh');\n\t\t\tif (data.indexOf('.obj') !== -1) {\n\t\t\t\tthis.mesh = this.defaultMesh = data;\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected createBuffers_() {\n\t\tObject.keys(this.buffers.values).forEach((key) => {\n\t\t\tconst buffer: IOBuffer = this.buffers.values[key];\n\t\t\tthis.uniforms.create(UniformMethod.Uniform1i, UniformType.Sampler2D, buffer.key, [buffer.input.index]);\n\t\t});\n\t}\n\n\tprotected createTextures_() {\n\t\tconst hasTextures = this.parseTextures_(this.fragmentString);\n\t\tif (hasTextures) {\n\t\t\tthis.textureList.filter(x => x.url).forEach(x => {\n\t\t\t\tthis.setTexture(x.key, x.url, x.options);\n\t\t\t});\n\t\t\tthis.textureList = [];\n\t\t}\n\t}\n\n\tprotected update_(): void {\n\t\tsuper.update_();\n\t\tthis.updateBuffers_();\n\t\tthis.updateTextures_();\n\t}\n\n\tprotected updateBuffers_(): void {\n\t\tObject.keys(this.buffers.values).forEach((key) => {\n\t\t\tconst buffer: IOBuffer = this.buffers.values[key];\n\t\t\tthis.uniforms.update(UniformMethod.Uniform1i, UniformType.Sampler2D, buffer.key, [buffer.input.index]);\n\t\t});\n\t}\n\n\tprotected updateTextures_(): void {\n\t\tconst gl = this.gl;\n\t\tObject.keys(this.textures.values).forEach((key) => {\n\t\t\tconst texture: Texture = this.textures.values[key];\n\t\t\ttexture.tryUpdate(gl);\n\t\t\tthis.uniforms.update(UniformMethod.Uniform1i, UniformType.Sampler2D, texture.key, [texture.index]);\n\t\t});\n\t}\n\n\tprivate destroyContext_(): void {\n\t\tconst gl = this.gl;\n\t\tgl.useProgram(null);\n\t\tif (this.program) {\n\t\t\tgl.deleteProgram(this.program);\n\t\t}\n\t\tObject.keys(this.buffers.values).forEach((key) => {\n\t\t\tconst buffer: IOBuffer = this.buffers.values[key];\n\t\t\tbuffer.destroy(gl);\n\t\t});\n\t\tObject.keys(this.textures.values).forEach((key) => {\n\t\t\tconst texture: Texture = this.textures.values[key];\n\t\t\ttexture.destroy(gl);\n\t\t});\n\t\tthis.buffers = null;\n\t\tthis.textures = null;\n\t\tthis.uniforms = null;\n\t\tthis.program = null;\n\t\tthis.gl = null;\n\t}\n\n\tprivate swapCanvas_(): void {\n\t\tconst canvas = this.canvas;\n\t\tconst canvas_ = canvas.cloneNode() as HTMLCanvasElement;\n\t\tcanvas.parentNode.replaceChild(canvas_, canvas);\n\t\tthis.canvas = canvas_;\n\t\tthis.addCanvasListeners_();\n\t}\n\n\tdestroy(): void {\n\t\tthis.removeListeners_();\n\t\tthis.destroyContext_();\n\t\tthis.animated = false;\n\t\tthis.valid = false;\n\t\tconst index = Canvas.items.indexOf(this);\n\t\tif (index !== -1) {\n\t\t\tCanvas.items.splice(index, 1);\n\t\t}\n\t}\n\n\tloadTexture(\n\t\tkey: string,\n\t\turlElementOrData: string | HTMLCanvasElement | HTMLImageElement | HTMLVideoElement | Element | ITextureData,\n\t\toptions: ITextureOptions = {}\n\t) {\n\t\tif (this.valid) {\n\t\t\t// Logger.log('GlslCanvas.loadTexture', key, urlElementOrData);\n\t\t\tthis.textures.createOrUpdate(this.gl, key, urlElementOrData, this.buffers.count, options, this.options.workpath).then(\n\t\t\t\ttexture => {\n\t\t\t\t\tconst index = texture.index;\n\t\t\t\t\tconst uniform = this.uniforms.createTexture(key, index);\n\t\t\t\t\tuniform.texture = texture;\n\t\t\t\t\tconst keyResolution = key.indexOf('[') !== -1 ? key.replace('[', 'Resolution[') : key + 'Resolution';\n\t\t\t\t\t// const uniformResolution = ;\n\t\t\t\t\tthis.uniforms.create(UniformMethod.Uniform2f, UniformType.Float, keyResolution, [texture.width, texture.height]);\n\t\t\t\t\t// Logger.log('loadTexture', key, url, index, texture.width, texture.height);\n\t\t\t\t\treturn texture;\n\t\t\t\t},\n\t\t\t\terror => {\n\t\t\t\t\tconst message = Array.isArray(error.path) ? error.path.map((x: any) => x.error ? x.error.message : '').join(', ') : error.message;\n\t\t\t\t\tLogger.error('GlslCanvas.loadTexture.error', key, urlElementOrData, message);\n\t\t\t\t\tthis.trigger('textureError', { key, urlElementOrData, message });\n\t\t\t\t});\n\t\t} else {\n\t\t\tthis.textureList.push({ key, url: urlElementOrData, options });\n\t\t}\n\t}\n\n\tsetTexture(\n\t\tkey: string,\n\t\turlElementOrData: string | HTMLCanvasElement | HTMLImageElement | HTMLVideoElement | Element | ITextureData,\n\t\toptions: ITextureOptions = {}\n\t): void {\n\t\treturn this.setUniform_(key, [urlElementOrData], options);\n\t}\n\n\tsetUniform(key: string, ...values: any[]): void {\n\t\treturn this.setUniform_(key, values);\n\t}\n\n\tsetUniformOfInt(key: string, values: any[]): void {\n\t\treturn this.setUniform_(key, values, null, UniformType.Int);\n\t}\n\n\tsetUniforms(values: IUniformOption): void {\n\t\tObject.keys(values).forEach((key) => {\n\t\t\tthis.setUniform(key, values[key]);\n\t\t});\n\t}\n\n\tpause(): void {\n\t\tif (this.valid) {\n\t\t\tthis.timer.pause();\n\t\t\tthis.canvas.classList.add('paused');\n\t\t\tthis.trigger('pause');\n\t\t}\n\t}\n\n\tplay(): void {\n\t\tif (this.valid) {\n\t\t\tthis.timer.play();\n\t\t\tthis.canvas.classList.remove('paused');\n\t\t\tthis.trigger('play');\n\t\t}\n\t}\n\n\ttoggle(): void {\n\t\tif (this.valid) {\n\t\t\tif (this.timer.paused) {\n\t\t\t\tthis.play();\n\t\t\t} else {\n\t\t\t\tthis.pause();\n\t\t\t}\n\t\t}\n\t}\n\n\tcheckRender(): void {\n\t\tif (this.isVisible_() && (this.sizeDidChanged_() || this.isDirty_() || this.isAnimated_())) {\n\t\t\tthis.render();\n\t\t\tthis.canvas.classList.add('playing');\n\t\t} else {\n\t\t\tthis.canvas.classList.remove('playing');\n\t\t}\n\t}\n\n\t/*\n\ttest(\n\t\tfragmentString?: string,\n\t\tvertexString?: string\n\t): Promise<any> {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst vertex = this.vertexString;\n\t\t\tconst fragment = this.fragmentString;\n\t\t\tconst paused = this.timer.paused;\n\t\t\t// Thanks to @thespite for the help here\n\t\t\t// https://www.khronos.org/registry/webgl/extensions/EXT_disjoint_timer_query/\n\t\t\tconst extension = this.gl.getExtension('EXT_disjoint_timer_query');\n\t\t\tconst query = extension.createQueryEXT();\n\t\t\tlet wasValid = this.valid;\n\t\t\tif (fragmentString || vertexString) {\n\t\t\t\tthis.load(fragmentString, vertexString);\n\t\t\t\twasValid = this.valid;\n\t\t\t\tthis.render();\n\t\t\t}\n\t\t\tthis.timer.paused = true;\n\t\t\textension.beginQueryEXT(extension.TIME_ELAPSED_EXT, query);\n\t\t\tthis.render();\n\t\t\textension.endQueryEXT(extension.TIME_ELAPSED_EXT);\n\t\t\tconst waitForTest = () => {\n\t\t\t\tthis.render();\n\t\t\t\tconst available = extension.getQueryObjectEXT(query, extension.QUERY_RESULT_AVAILABLE_EXT);\n\t\t\t\tconst disjoint = this.gl.getParameter(extension.GPU_DISJOINT_EXT);\n\t\t\t\tif (available && !disjoint) {\n\t\t\t\t\tconst result = {\n\t\t\t\t\t\twasValid: wasValid,\n\t\t\t\t\t\tfragment: fragmentString || this.fragmentString,\n\t\t\t\t\t\tvertex: vertexString || this.vertexString,\n\t\t\t\t\t\ttimeElapsedMs: extension.getQueryObjectEXT(query, extension.QUERY_RESULT_EXT) / 1000000.0\n\t\t\t\t\t};\n\t\t\t\t\tthis.timer.paused = paused;\n\t\t\t\t\tif (fragmentString || vertexString) {\n\t\t\t\t\t\tthis.load(fragment, vertex);\n\t\t\t\t\t}\n\t\t\t\t\tresolve(result);\n\t\t\t\t} else {\n\t\t\t\t\twindow.requestAnimationFrame(waitForTest);\n\t\t\t\t}\n\t\t\t}\n\t\t\twaitForTest();\n\t\t});\n\t}\n\t*/\n\n}\n\n","export { Buffer, BufferFloatType, default as Buffers, IOBuffer } from './buffers/buffers';\nexport { default as OrbitCamera } from './camera/orbit-camera';\nexport { default as Canvas, ICanvasOptions } from './canvas/canvas';\nexport { default as CanvasTimer } from './canvas/canvas-timer';\nexport { DefaultWebGL2BufferFragment, DefaultWebGL2BufferVertex, DefaultWebGL2FlatFragment, DefaultWebGL2MeshFragment, DefaultWebGL2MeshVertex, DefaultWebGLBufferFragment, DefaultWebGLBufferVertex, DefaultWebGLFlatFragment, DefaultWebGLMeshFragment, DefaultWebGLMeshVertex } from './context/chunks';\nexport { ContextError, ContextVersion, ContextVertexBuffers, default as Context } from './context/context';\nexport { default as Common } from './core/common';\nexport { default as IterableStringMap } from './core/iterable';\nexport { default as Subscriber, Listener } from './core/subscriber';\nexport { default as BoxGeometry } from './geometry/box-geometry';\nexport { default as FlatGeometry } from './geometry/flat-geometry';\nexport { default as Geometry } from './geometry/geometry';\nexport { default as SphereGeometry } from './geometry/sphere-geometry';\nexport { default as TorusGeometry } from './geometry/torus-geometry';\nexport { default as ObjLoader } from './loaders/obj-loader';\nexport { default as Logger } from './logger/logger';\nexport { default as Vector2 } from './math/vector2';\nexport { default as Vector3 } from './math/vector3';\nexport { default as Renderer } from './renderer/renderer';\nexport { default as Textures, isTextureData, ITextureData, ITextureInput, ITextureOptions, Texture, TextureExtensions, TextureFilteringType, TextureImageExtensions, TextureSourceType, TextureVideoExtensions } from './textures/textures';\nexport { default as Uniforms, IUniformOption, METHODS_FLOAT, METHODS_FLOATV, METHODS_INT, METHODS_INTV, Uniform, UniformMethod, UniformTexture, UniformType } from './uniforms/uniforms';\n\nimport Canvas, { ICanvasOptions } from './canvas/canvas';\n\nexport function of(canvas: HTMLCanvasElement, options?: ICanvasOptions): Canvas {\n\treturn Canvas.items.find(x => x.canvas === canvas) || new Canvas(canvas, options);\n}\n\nexport function loadAll(): Canvas[] {\n\tconst canvases: HTMLCanvasElement[] = <HTMLCanvasElement[]>[].slice.call(document.getElementsByClassName('glsl-canvas')).filter((x: HTMLElement) => x instanceof HTMLCanvasElement);\n\treturn canvases.map(x => of(x));\n}\n\nif (document) {\n\tdocument.addEventListener('DOMContentLoaded', () => {\n\t\tloadAll();\n\t});\n}\n"]}