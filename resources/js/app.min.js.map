{"version":3,"sources":["src/app/services/vector/vector.js","src/app/services/camera/camera.service.js","src/app/services/capture/capture.service.js","src/app/services/gui/gui.service.js","src/app/services/trails/trails.service.js","src/app/app.js"],"names":["Vector","x","y","z","this","prototype","negative","add","v","subtract","multiply","divide","equals","dot","cross","length","Math","sqrt","unit","min","max","toAngles","theta","atan2","phi","asin","angleTo","a","acos","toArray","n","slice","clone","init","b","c","fromAngles","cos","sin","randomDirection","random","PI","lerp","fraction","fromArray","angleBetween","window","CameraService","RAD","radius","service","down","mouse","move","up","wheel","d","render","glsl","vector","toVector","array","Float32Array","update","method","type","name","value","u","uniforms","location","gl","getUniformLocation","program","apply","concat","e","console","log","fromVector","atan","camera","spr","CaptureService","set","canvas","snapshot","queue","promise","Promise","resolve","reject","snapshotRender","url","toDataURL","bytes","atob","buffer","Uint8Array","i","charCodeAt","blob","Blob","extension","record","MediaRecorder","captureStream","capture","chunks","stream","options","mimeType","recorder","ondataavailable","data","size","push","getTracks","forEach","track","stop","removeTrack","start","Parser","tuple","keys","2","3","4","r","filter","enumerate","prefix","getter","key","obj","p","Array","isArray","get","Object","map","GuiService","callback","closed","hidden","pool","copy","JSON","parse","stringify","loop","params","onChange","addFolder","load","gui","locals","changed","destroy","dat","GUI","hide","show","_merge","hasOwnProperty","merge","_callback","randomize","_randomize","f","__controllers","initialValue","__min","__max","property","updateDisplay","__folders","domElement","style","display","TrailsService","history","trails","fill","t","tx","friction","shift","func","wait","context","args","result","timeout","previous","later","leading","getNow","now","remaining","arguments","clearTimeout","trailing","setTimeout","throttle","Date","getTime","vscode","acquireVsCodeApi","getState","onGlslError","message","errors","document","querySelector","errorLines","warningLines","lines","error","replace","m","l","Number","offset","li","uri","output","join","innerHTML","classList","call","querySelectorAll","node","index","parseInt","getAttribute","addEventListener","event","postMessage","command","preventDefault","stopPropagation","setAttribute","onGlslTextureError","stats","statsdom","body","content","welcome","missing","buttons","pause","export","create","mode","modes","flags","toggle","resize","glslCanvas","Canvas","backgroundColor","alpha","antialias","premultipliedAlpha","preserveDrawingBuffer","workpath","mesh","resources","extensions","doubleSided","on","o","setUniforms","remove","play","canvas_","removeEventListener","togglePause","onMove","addCanvasListeners_","onUpdateUniforms","end","begin","ri","vertex","trim","fragment","removeStats","textures","setTexture","filtering","repeat","then","success","String","onGlslLoadError","w","offsetWidth","h","offsetHeight","width","height","toggleRecord","forceRender","video","URL","createObjectURL","link","createElement","href","download","click","revokeObjectURL","toggleStats","visibility","Stats","showPanel","dom","appendChild","onExport","createShader","onMessage","setState","onResize","firstElementChild","setMode"],"mappings":"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","file":"resources/js/app.min.js","sourcesContent":["(function () {\n    'use strict';\n\n    var Vector = function () {\n\n        function Vector(x, y, z) {\n            this.x = x || 0;\n            this.y = y || 0;\n            this.z = z || 0;\n        }\n\n        // Instance Methods\n        // The methods add(), subtract(), multiply(), and divide() can all take either a vector or a number as an argument.\n\n        Vector.prototype = {\n            negative: function () {\n                return new Vector(-this.x, -this.y, -this.z);\n            },\n            add: function (v) {\n                if (v instanceof Vector) return new Vector(this.x + v.x, this.y + v.y, this.z + v.z);\n                else return new Vector(this.x + v, this.y + v, this.z + v);\n            },\n            subtract: function (v) {\n                if (v instanceof Vector) return new Vector(this.x - v.x, this.y - v.y, this.z - v.z);\n                else return new Vector(this.x - v, this.y - v, this.z - v);\n            },\n            multiply: function (v) {\n                if (v instanceof Vector) return new Vector(this.x * v.x, this.y * v.y, this.z * v.z);\n                else return new Vector(this.x * v, this.y * v, this.z * v);\n            },\n            divide: function (v) {\n                if (v instanceof Vector) return new Vector(this.x / v.x, this.y / v.y, this.z / v.z);\n                else return new Vector(this.x / v, this.y / v, this.z / v);\n            },\n            equals: function (v) {\n                return this.x === v.x && this.y === v.y && this.z === v.z;\n            },\n            dot: function (v) {\n                return this.x * v.x + this.y * v.y + this.z * v.z;\n            },\n            cross: function (v) {\n                return new Vector(\n                    this.y * v.z - this.z * v.y,\n                    this.z * v.x - this.x * v.z,\n                    this.x * v.y - this.y * v.x\n                );\n            },\n            length: function () {\n                return Math.sqrt(this.dot(this));\n            },\n            unit: function () {\n                return this.divide(this.length());\n            },\n            min: function () {\n                return Math.min(Math.min(this.x, this.y), this.z);\n            },\n            max: function () {\n                return Math.max(Math.max(this.x, this.y), this.z);\n            },\n            toAngles: function () {\n                return {\n                    theta: Math.atan2(this.z, this.x),\n                    phi: Math.asin(this.y / this.length())\n                };\n            },\n            angleTo: function (a) {\n                return Math.acos(this.dot(a) / (this.length() * a.length()));\n            },\n            toArray: function (n) {\n                return [this.x, this.y, this.z].slice(0, n || 3);\n            },\n            clone: function () {\n                return new Vector(this.x, this.y, this.z);\n            },\n            init: function (x, y, z) {\n                this.x = x;\n                this.y = y;\n                this.z = z;\n                return this;\n            }\n        };\n\n        // Static Methods\n        // Vector.randomDirection() returns a vector with a length of 1 and a statistically uniform direction. Vector.lerp() performs linear interpolation between two vectors.\n\n        Vector.negative = function (a, b) {\n            b.x = -a.x;\n            b.y = -a.y;\n            b.z = -a.z;\n            return b;\n        };\n        Vector.add = function (a, b, c) {\n            if (b instanceof Vector) {\n                c.x = a.x + b.x;\n                c.y = a.y + b.y;\n                c.z = a.z + b.z;\n            } else {\n                c.x = a.x + b;\n                c.y = a.y + b;\n                c.z = a.z + b;\n            }\n            return c;\n        };\n        Vector.subtract = function (a, b, c) {\n            if (b instanceof Vector) {\n                c.x = a.x - b.x;\n                c.y = a.y - b.y;\n                c.z = a.z - b.z;\n            } else {\n                c.x = a.x - b;\n                c.y = a.y - b;\n                c.z = a.z - b;\n            }\n            return c;\n        };\n        Vector.multiply = function (a, b, c) {\n            if (b instanceof Vector) {\n                c.x = a.x * b.x;\n                c.y = a.y * b.y;\n                c.z = a.z * b.z;\n            } else {\n                c.x = a.x * b;\n                c.y = a.y * b;\n                c.z = a.z * b;\n            }\n            return c;\n        };\n        Vector.divide = function (a, b, c) {\n            if (b instanceof Vector) {\n                c.x = a.x / b.x;\n                c.y = a.y / b.y;\n                c.z = a.z / b.z;\n            } else {\n                c.x = a.x / b;\n                c.y = a.y / b;\n                c.z = a.z / b;\n            }\n            return c;\n        };\n        Vector.cross = function (a, b, c) {\n            c.x = a.y * b.z - a.z * b.y;\n            c.y = a.z * b.x - a.x * b.z;\n            c.z = a.x * b.y - a.y * b.x;\n            return c;\n        };\n        Vector.unit = function (a, b) {\n            var length = a.length();\n            b.x = a.x / length;\n            b.y = a.y / length;\n            b.z = a.z / length;\n            return b;\n        };\n        Vector.fromAngles = function (theta, phi) {\n            return new Vector(Math.cos(theta) * Math.cos(phi), Math.sin(phi), Math.sin(theta) * Math.cos(phi));\n        };\n        Vector.randomDirection = function () {\n            return Vector.fromAngles(Math.random() * Math.PI * 2, Math.asin(Math.random() * 2 - 1));\n        };\n        Vector.min = function (a, b) {\n            return new Vector(Math.min(a.x, b.x), Math.min(a.y, b.y), Math.min(a.z, b.z));\n        };\n        Vector.max = function (a, b) {\n            return new Vector(Math.max(a.x, b.x), Math.max(a.y, b.y), Math.max(a.z, b.z));\n        };\n        Vector.lerp = function (a, b, fraction) {\n            return b.subtract(a).multiply(fraction).add(a);\n        };\n        Vector.fromArray = function (a) {\n            return new Vector(a[0], a[1], a[2]);\n        };\n        Vector.angleBetween = function (a, b) {\n            return a.angleTo(b);\n        };\n\n        return Vector;\n    }();\n\n    window.Vector = Vector;\n\n}());","/* global window, console, Vector */\n\n(function () {\n    'use strict';\n\n    var CameraService = function () {\n\n        var PI = Math.PI;\n        var RAD = PI / 180;\n\n        function CameraService(theta, phi, radius) {\n            var service = this;\n            service.theta = (theta || 45) * RAD;\n            service.phi = (phi || 45) * RAD;\n            service.radius = radius || 1.0;\n        }\n\n        CameraService.prototype = {\n            down: down,\n            move: move,\n            up: up,\n            wheel: wheel,\n            render: render,\n            update: update,\n        };\n\n        CameraService.fromVector = fromVector;\n        CameraService.toVector = toVector;\n\n        // publics\n\n        function down(x, y) {\n            var service = this;\n            service.mouse = {\n                x: x,\n                y: y,\n            };\n        }\n\n        function move(x, y) {\n            var service = this,\n                mouse = service.mouse;\n            if (mouse) {\n                var theta = (x - mouse.x) * 180 * RAD;\n                var phi = (mouse.y - y) * 180 * RAD;\n                mouse.x = x;\n                mouse.y = y;\n                service.theta += theta;\n                service.phi += phi;\n            }\n        }\n\n        function up(x, y) {\n            var service = this;\n            service.mouse = null;\n        }\n\n        function wheel(d) {\n            var service = this;\n            service.radius = Math.max(0.01, service.radius + d * 0.02);\n        }\n\n        function render(glsl) {\n            var service = this;\n            var vector = CameraService.toVector(service);\n            var array = new Float32Array([vector.x, vector.y, vector.z]);\n            service.update(glsl, '3fv', 'vec3', 'u_camera', array);\n        }\n\n        function update(glsl, method, type, name, value) {\n            try {\n                var u = glsl.uniforms[name] = glsl.uniforms[name] || {};\n                u.name = name;\n                u.value = value;\n                u.type = type;\n                u.method = 'uniform' + method;\n                u.location = glsl.gl.getUniformLocation(glsl.program, name);\n                glsl.gl[u.method].apply(glsl.gl, [u.location].concat(u.value));\n            } catch (e) {\n                console.log('fastUpdate', e);\n            }\n        }\n\n        // statics\n\n        function fromVector(vector) {\n            var radius = vector.length();\n            var theta = Math.acos(vector.y / radius); //theta\n            var phi = Math.atan(vector.x / vector.z); //phi\n            return new CameraService(theta, phi, radius);\n        }\n\n        function toVector(camera) {\n            var spr = Math.sin(camera.phi) * camera.radius;\n            var x = spr * Math.sin(camera.theta);\n            var y = Math.cos(camera.phi) * camera.radius;\n            var z = spr * Math.cos(camera.theta);\n            return new Vector(x, y, z);\n        }\n\n        return CameraService;\n\n    }();\n\n    window.CameraService = CameraService;\n\n}());\n","/* global window, document, console, GlslCanvas */\n/* \nAuthor: Brett Camper (@professorlemeza)\nURL: https://github.com/tangrams/tangram/blob/master/src/utils/media_capture.js\n*/\n\n(function () {\n    'use strict';\n\n    function CaptureService() {}\n\n    CaptureService.prototype = {\n        set: set,\n        snapshot: snapshot,\n        snapshotRender: snapshotRender,\n        record: record,\n        stop: stop,\n    };\n\n    function set(canvas) {\n        var service = this;\n        service.canvas = canvas;\n    }\n\n    /*\n    var mimeTypes = [\n        'video/webm\\;codecs=h264',\n        'video/webm\\;codecs=vp8',\n        'video/webm\\;codecs=daala',\n        'video/webm',\n        'audio/webm\\;codecs=opus',\n        'audio/webm',\n        'video/mpeg',\n    ];\n    var options = {\n        videoBitsPerSecond: 2500000,\n        audioBitsPerSecond: 128000,\n        mimeType: 'video/webm',\n        extension: '.webm',\n    };\n    // MediaRecorder.isTypeSupported(mimeTypes[0])\n    */\n\n    function record() {\n        var service = this;\n        if (typeof window.MediaRecorder !== 'function' || !service.canvas || typeof service.canvas.captureStream !== 'function') {\n            console.log('warn: Video capture (Canvas.captureStream and/or MediaRecorder APIs) not supported by browser');\n            return false;\n        } else if (service.capture) {\n            console.log('warn: Video capture already in progress, call Scene.stopVideoCapture() first');\n            return false;\n        }\n        try {\n            var capture = {};\n            var chunks = [];\n            var stream = service.canvas.captureStream();\n            var options = {\n                mimeType: 'video/webm', // 'video/webm\\;codecs=h264'\n            };\n            var recorder = new MediaRecorder(stream, options);\n            recorder.ondataavailable = function (e) {\n                if (e.data.size > 0) {\n                    chunks.push(e.data);\n                }\n                // Stopped recording? Create the final capture file blob\n                if (capture.resolve) {\n                    var blob = new Blob(chunks, {\n                        type: options.mimeType,\n                    });\n                    if (stream) {\n                        var tracks = stream.getTracks() || [];\n                        tracks.forEach(function (track) {\n                            track.stop();\n                            stream.removeTrack(track);\n                        });\n                    }\n                    stream = null;\n                    service.recorder = null;\n                    service.capture = null;\n                    capture.resolve({\n                        blob: blob,\n                        extension: '.webm',\n                    });\n                }\n            };\n            service.capture = capture;\n            service.recorder = recorder;\n            recorder.start();\n        } catch (e) {\n            service.capture = null;\n            service.recorder = null;\n            console.log('error: Scene video capture failed', e);\n            return false;\n        }\n        return true;\n    }\n\n    function stop() {\n        var service = this;\n        if (!service.capture) {\n            console.log('warn: No scene video capture in progress, call Scene.startVideoCapture() first');\n            return Promise.resolve({});\n        }\n        service.capture.promise = new Promise(function (resolve, reject) {\n            service.capture.resolve = resolve;\n            service.capture.reject = reject;\n        });\n        service.recorder.stop();\n        return service.capture.promise;\n    }\n\n    function snapshot() {\n        var service = this;\n        if (service.queue) {\n            return service.queue.promise;\n        }\n        service.queue = {};\n        service.queue.promise = new Promise(function (resolve, reject) {\n            service.queue.resolve = resolve;\n            service.queue.reject = reject;\n        });\n        return service.queue.promise;\n    }\n\n    function snapshotRender() {\n        var service = this;\n        if (service.queue) {\n            // Get data URL, convert to blob\n            // Strip host/mimetype/etc., convert base64 to binary without UTF-8 mangling\n            // Adapted from: https://gist.github.com/unconed/4370822\n            var url = service.canvas.toDataURL('image/png');\n            var bytes = atob(url.slice(22));\n            var buffer = new Uint8Array(bytes.length);\n            for (var i = 0; i < bytes.length; ++i) {\n                buffer[i] = bytes.charCodeAt(i);\n            }\n            var blob = new Blob([buffer], {\n                type: 'image/png',\n            });\n            service.queue.resolve({\n                blob: blob,\n                extension: '.png',\n            });\n            service.queue = null;\n        }\n    }\n\n    window.CaptureService = CaptureService;\n}());","/* global window, document, console */\n\n(function () {\n\t'use strict';\n\n\tvar Parser = function () {\n\n\t\tvar Parser = {\n\t\t\tset: set,\n\t\t\tget: get,\n\t\t};\n\n\t\tfunction tuple(array) {\n\t\t\tvar tuples = {\n\t\t\t\t2: ['x', 'y'],\n\t\t\t\t3: ['x', 'y', 'z'],\n\t\t\t\t4: ['r', 'g', 'b', 'a']\n\t\t\t};\n\t\t\tvar keys = tuples[array.length];\n\t\t\tvar r = {};\n\t\t\tarray.filter(function (v, i) {\n\t\t\t\tr[keys[i]] = v;\n\t\t\t});\n\t\t\treturn r;\n\t\t}\n\n\t\tfunction enumerate(array, prefix) {\n\t\t\tvar r = {};\n\t\t\tarray.filter(function (v, i) {\n\t\t\t\tr[prefix + i] = v;\n\t\t\t});\n\t\t\treturn r;\n\t\t}\n\n\t\tfunction getter(v) {\n\t\t\treturn function (key) {\n\t\t\t\treturn v[key];\n\t\t\t};\n\t\t}\n\n\t\tfunction set(obj) {\n\t\t\tvar data = {};\n\t\t\tfor (var p in obj) {\n\t\t\t\tvar v = obj[p];\n\t\t\t\tif (Array.isArray(v)) {\n\t\t\t\t\tif (v.length > 1) {\n\t\t\t\t\t\tswitch (typeof v[0]) {\n\t\t\t\t\t\t\tcase 'number':\n\t\t\t\t\t\t\t\tif (v.length < 5) {\n\t\t\t\t\t\t\t\t\tdata[p] = tuple(v);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'boolean':\n\t\t\t\t\t\t\t\tdata[p] = enumerate(v, 'bool_');\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'string':\n\t\t\t\t\t\t\t\tdata[p] = enumerate(v, 'texture_');\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'object':\n\t\t\t\t\t\t\t\tdata[p] = enumerate(v, 'struct_');\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (v.length) {\n\t\t\t\t\t\tdata[p] = v[0];\n\t\t\t\t\t}\n\t\t\t\t} else if (v !== undefined && v !== null) {\n\t\t\t\t\tdata[p] = v;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn data;\n\t\t}\n\n\t\tfunction get(obj) {\n\t\t\tvar data = {};\n\t\t\tfor (var p in obj) {\n\t\t\t\tvar v = obj[p];\n\t\t\t\tswitch (typeof v) {\n\t\t\t\t\tcase 'function':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'number':\n\t\t\t\t\tcase 'boolean':\n\t\t\t\t\tcase 'string':\n\t\t\t\t\t\tdata[p] = v;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tvar keys = Object.keys(v);\n\t\t\t\t\t\tdata[p] = keys.map(getter(v));\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// console.log('Parser.get', data);\n\t\t\treturn data;\n\t\t}\n\n        /*\n        float                                   <--- typeof U === 'number'\n        bool                                    <--- typeof U === 'boolean'\n        sampler2D                               <--- typeof U === 'string'\n        Structure                               <--- typeof U === 'object'\n        ARRAYS of                               <--- Array.isArray(U)\n            number                              <--- typeof U[0] === 'number'\n                float                           <--- U.length === 1\n                vec2, vec3, vec4                <--- U.length > 1 && U.length < 5\n                float[]                         <--- U.length > 4\n            sampler2D[]                         <--- typeof U[0] === 'string'\n            vec2[], vec3[], vec4[]              <--- Array.isArray(U[0]) && typeof U[0][0] === 'number'\n            Structure[]                         <--- typeof U[0] === 'object'\n\n            TODO: assume matrix for (typeof == Float32Array && length == 16)\n        TODO: support other non-float types? (int, etc.)\n        */\n\n\t\treturn Parser;\n\n\t}();\n\n\tvar GuiService = function () {\n\n\t\tfunction GuiService(callback) {\n\t\t\tthis.closed = true;\n\t\t\tthis.hidden = true;\n\t\t\tthis.callback = callback || function () {\n\t\t\t\tconsole.log('GuiService.onChange');\n\t\t\t};\n\t\t\tthis.pool = {};\n\t\t}\n\n\t\tGuiService.prototype = {\n\t\t\tload: load,\n\t\t\thide: hide,\n\t\t\tshow: show,\n\t\t\tuniforms: uniforms,\n\t\t};\n\n\t\t// statics\n\n\t\tfunction differs(a, b) {\n\t\t\t// console.log('differs', JSON.stringify(a), JSON.stringify(b));\n\t\t\treturn JSON.stringify(a) !== JSON.stringify(b);\n\t\t}\n\n\t\tfunction copy(obj) {\n\t\t\treturn JSON.parse(JSON.stringify(obj));\n\t\t}\n\n\t\tfunction merge(a, b) {\n\t\t\tfunction _merge(a, b) {\n\t\t\t\tfor (var key in a) {\n\t\t\t\t\tif (b.hasOwnProperty(key)) {\n\t\t\t\t\t\tif (typeof a[key] === 'number') {\n\t\t\t\t\t\t\ta[key] = b[key];\n\t\t\t\t\t\t} else if (typeof a[key] == 'object' && Object.keys(a[key]).length > 0) {\n\t\t\t\t\t\t\t_merge(a[key], b[key]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (a) {\n\t\t\t\ta = copy(a);\n\n\t\t\t\t_merge(a, b);\n\t\t\t}\n\t\t\treturn a;\n\t\t}\n\n\t\tfunction loop(obj, params, callback) {\n\t\t\tvar keys = [],\n\t\t\t\tp;\n\t\t\tfor (p in params) {\n\t\t\t\tkeys.push(p);\n\t\t\t}\n\t\t\tkeys.filter(function (key) {\n\t\t\t\tvar value = params[key];\n\t\t\t\tif (typeof value === 'number') {\n\t\t\t\t\tp = obj.add(params, key, 0.0, 1.0);\n\t\t\t\t\tp.onChange(callback);\n\t\t\t\t} else if (typeof value === 'object' && Object.keys(value).length > 0) {\n\t\t\t\t\tp = null;\n\t\t\t\t\tvar folder = obj.addFolder(key);\n\t\t\t\t\tloop(folder, value, callback);\n\t\t\t\t} else {\n\t\t\t\t\tp = obj.add(params, key);\n\t\t\t\t\tp.onChange(callback);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tfunction randomize(obj, params, callback) {\n\t\t\tfunction _randomize(obj, params) {\n\t\t\t\tobj.__controllers.filter(function (c) {\n\t\t\t\t\tif (typeof c.initialValue === 'number' && typeof c.__min === 'number' && typeof c.__max === 'number') {\n\t\t\t\t\t\tvar value = c.__min + (c.__max - c.__min) * Math.random();\n\t\t\t\t\t\tparams[c.property] = value;\n\t\t\t\t\t\tc.updateDisplay();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tfor (var f in obj.__folders) {\n\t\t\t\t\t_randomize(obj.__folders[f], params[f]);\n\t\t\t\t}\n\t\t\t}\n\t\t\t_randomize(obj, params);\n\t\t\tcallback();\n\t\t}\n\n\t\t// publics\n\n\t\tfunction load(params) {\n\t\t\tvar service = this;\n\t\t\tvar gui = service.gui;\n\t\t\tvar locals = service.locals;\n\t\t\tvar changed = differs(params, locals);\n\t\t\tif (gui && changed) {\n\t\t\t\tservice.closed = gui.closed;\n\t\t\t\tgui.destroy();\n\t\t\t\tgui = null;\n\t\t\t}\n\t\t\tif (!gui) {\n\t\t\t\tgui = new dat.GUI();\n\t\t\t\tgui.closed = service.closed;\n\t\t\t\tservice.gui = gui;\n\t\t\t\tif (service.hidden) {\n\t\t\t\t\tservice.hide();\n\t\t\t\t} else {\n\t\t\t\t\tservice.show();\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (changed) {\n\t\t\t\tlocals = copy(params);\n\t\t\t\tservice.locals = locals;\n\t\t\t\tvar pool = Parser.set(params);\n\t\t\t\tpool = merge(pool, service.pool);\n\t\t\t\tservice.pool = pool;\n\t\t\t\tvar _callback = function () {\n\t\t\t\t\tservice.callback(pool);\n\t\t\t\t};\n\t\t\t\tloop(gui, pool, _callback);\n\t\t\t\tpool.randomize = function () {\n\t\t\t\t\trandomize(gui, pool, _callback);\n\t\t\t\t};\n\t\t\t\tgui.add(pool, 'randomize');\n\t\t\t} else {\n\t\t\t\t// console.log('service.callback', service.pool);\n\t\t\t\tservice.callback(service.pool);\n\t\t\t}\n\t\t}\n\n\t\tfunction hide() {\n\t\t\tvar service = this;\n\t\t\tservice.hidden = true;\n\t\t\tvar gui = service.gui;\n\t\t\tif (gui) {\n\t\t\t\tgui.domElement.style.display = 'none';\n\t\t\t\t// dat.GUI.toggleHide();\n\t\t\t}\n\t\t}\n\n\t\tfunction show() {\n\t\t\tvar service = this;\n\t\t\tvar locals = service.locals;\n\t\t\tvar gui = service.gui;\n\t\t\tif (gui && Object.keys(locals).length) {\n\t\t\t\tgui.domElement.style.display = '';\n\t\t\t}\n\t\t\tservice.hidden = false;\n\t\t}\n\n\t\tfunction uniforms() {\n\t\t\tvar service = this;\n\t\t\tvar pool = service.pool;\n\t\t\treturn Parser.get(pool);\n\t\t}\n\n\t\treturn GuiService;\n\t}();\n\n\twindow.GuiService = GuiService;\n\n}());\n","/* global window, document, console */\n\n(function () {\n    'use strict';\n\n    var TrailsService = function () {\n\n        function TrailsService() {\n            var service = this;\n            service.mouse = new Float32Array([0.0, 0.0]);\n            service.history = [];\n            service.trails = new Array(10).fill(null).map(function () {\n                return new Float32Array([0.0, 0.0]);\n            });\n        }\n\n        TrailsService.prototype = {\n            render: render,\n            move: move,\n            push: throttle(_push, 1000 / 60),\n            update: update,\n        };\n\n        // statics\n\n        var getNow = Date.now || function () {\n            return new Date().getTime();\n        };\n\n        function throttle(func, wait, options) {\n            // Returns a function, that, when invoked, will only be triggered at most once\n            // during a given window of time. Normally, the throttled function will run\n            // as much as it can, without ever going more than once per `wait` duration;\n            // but if you'd like to disable the execution on the leading edge, pass\n            // `{leading: false}`. To disable execution on the trailing edge, ditto.\n            var context, args, result;\n            var timeout = null;\n            var previous = 0;\n            if (!options) options = {};\n            var later = function () {\n                previous = options.leading === false ? 0 : getNow();\n                timeout = null;\n                result = func.apply(context, args);\n                if (!timeout) context = args = null;\n            };\n            return function () {\n                var now = getNow();\n                if (!previous && options.leading === false) previous = now;\n                var remaining = wait - (now - previous);\n                context = this;\n                args = arguments;\n                if (remaining <= 0 || remaining > wait) {\n                    if (timeout) {\n                        clearTimeout(timeout);\n                        timeout = null;\n                    }\n                    previous = now;\n                    result = func.apply(context, args);\n                    if (!timeout) context = args = null;\n                } else if (!timeout && options.trailing !== false) {\n                    timeout = setTimeout(later, remaining);\n                }\n                return result;\n            };\n        }\n\n        // publics\n\n        var ti = 0;\n\n        function render(glsl) {\n            var service = this;\n            var trails = service.trails,\n                history = service.history,\n                mouse = service.mouse;\n\n            var i = 0,\n                t = trails.length;\n            var tx = history.length ? history[0] : mouse;\n            while (i < t) {\n                var e = (i > 0 ? trails[i - 1] : tx);\n                var v = trails[i];\n                var friction = 1.0 / (5.0 + i);\n                v[0] += (e[0] - v[0]) * friction;\n                v[1] += (e[1] - v[1]) * friction;\n                service.update(glsl, '2fv', 'vec2', 'u_trails[' + i + ']', v);\n                i++;\n            }\n            if (history.length) {\n                history.shift();\n            }\n        }\n\n        function move(x, y) {\n            var service = this,\n                mouse = service.mouse;\n            mouse[0] = x;\n            mouse[1] = y;\n            service.push();\n        }\n\n        function _push() {\n            var service = this;\n            service.history.push(new Float32Array(service.mouse));\n        }\n\n        function update(glsl, method, type, name, value) {\n            try {\n                var u = glsl.uniforms[name] = glsl.uniforms[name] || {};\n                u.name = name;\n                u.value = value;\n                u.type = type;\n                u.method = 'uniform' + method;\n                u.location = glsl.gl.getUniformLocation(glsl.program, name);\n                glsl.gl[u.method].apply(glsl.gl, [u.location].concat(u.value));\n            } catch (e) {\n                console.log('fastUpdate', e);\n            }\n        }\n\n        return TrailsService;\n    }();\n\n    window.TrailsService = TrailsService;\n\n}());","(function () {\n\t'use strict';\n\n\tvar vscode = acquireVsCodeApi();\n\tvar oldState = vscode.getState();\n\t// console.log('oldState', oldState);\n\n\tfunction onLoad() {\n\t\tvar stats, statsdom;\n\n\t\tvar body = document.querySelector('body');\n\t\tvar content = document.querySelector('.content');\n\t\tvar canvas = document.querySelector('.shader');\n\t\tvar errors = document.querySelector('.errors');\n\t\tvar welcome = document.querySelector('.welcome');\n\t\tvar missing = document.querySelector('.missing');\n\t\tvar buttons = {\n\t\t\tpause: document.querySelector('.btn-pause'),\n\t\t\trecord: document.querySelector('.btn-record'),\n\t\t\tstats: document.querySelector('.btn-stats'),\n\t\t\texport: document.querySelector('.btn-export'),\n\t\t\tcreate: document.querySelector('.btn-create'),\n\t\t\tmode: document.querySelector('.btn-mode'),\n\t\t};\n\t\tvar modes = Array.prototype.slice.call(buttons.mode.querySelectorAll('li'));\n\t\tvar flags = {\n\t\t\ttoggle: false,\n\t\t\trecord: false,\n\t\t\tstats: false,\n\t\t\tmode: 'flat',\n\t\t};\n\t\tresize(true);\n\n\t\t// console.log('app.js workpath', options.workpath);\n\t\t// console.log('app.js resources', options.resources);\n\n\t\tvar glslCanvas = new glsl.Canvas(canvas, {\n\t\t\tbackgroundColor: 'rgba(0.0, 0.0, 0.0, 0.0)',\n\t\t\talpha: true,\n\t\t\tantialias: true,\n\t\t\tpremultipliedAlpha: false,\n\t\t\tpreserveDrawingBuffer: false,\n\t\t\tworkpath: options.workpath,\n\t\t\t// mesh: options.resources + '/model/lego.obj',\n\t\t\tmesh: options.resources + '/model/duck-toy.obj',\n\t\t\textensions: options.extensions,\n\t\t\tdoubleSided: options.doubleSided,\n\t\t});\n\n\t\t// console.log('glslCanvas.init', glslCanvas.mode);\n\n\t\tglslCanvas.on('load', onGlslLoad);\n\t\tglslCanvas.on('error', onGlslError);\n\t\tglslCanvas.on('textureError', onGlslTextureError);\n\n\t\tvar capture = new CaptureService();\n\t\tcapture.set(canvas);\n\n\t\t// var camera = new CameraService();\n\t\tvar trails = new TrailsService();\n\n\t\tglslCanvas.on('render', function () {\n\t\t\tif (flags.stats) {\n\t\t\t\tstats.end();\n\t\t\t}\n\t\t\tcapture.snapshotRender();\n\t\t\t// camera.render(glslCanvas);\n\t\t\ttrails.render(glslCanvas);\n\t\t\tif (flags.stats) {\n\t\t\t\tstats.begin();\n\t\t\t}\n\t\t});\n\n\t\tfunction onUpdateUniforms(params) {\n\t\t\tvar uniforms = gui.uniforms();\n\t\t\tglslCanvas.setUniforms(uniforms);\n\t\t}\n\n\t\tvar gui = new GuiService(onUpdateUniforms);\n\n\t\tload();\n\n\t\tfunction load() {\n\t\t\tvar o = window.options;\n\t\t\to.vertex = o.vertex.trim().length > 0 ? o.vertex : null;\n\t\t\to.fragment = o.fragment.trim().length > 0 ? o.fragment : null;\n\t\t\tif (o.fragment || o.vertex) {\n\t\t\t\tbody.classList.remove('idle', 'empty');\n\t\t\t\tbody.classList.add('ready');\n\t\t\t} else {\n\t\t\t\tbody.classList.remove('idle', 'ready')\n\t\t\t\tbody.classList.add('empty');\n\t\t\t\tremoveStats();\n\t\t\t}\n\t\t\tfor (var t in o.textures) {\n\t\t\t\tglslCanvas.setTexture('u_texture_' + t, o.textures[t], {\n\t\t\t\t\tfiltering: 'mipmap',\n\t\t\t\t\trepeat: true,\n\t\t\t\t});\n\t\t\t}\n\t\t\tglslCanvas.load(o.fragment, o.vertex).then(success => {\n\t\t\t\tmissing.classList.remove('active');\n\t\t\t}, error => {\n\t\t\t\tmissing.classList.add('active');\n\t\t\t\tonGlslLoadError(error);\n\t\t\t\treturn;\n\t\t\t});\n\t\t}\n\n\t\tfunction onGlslLoad() {\n\t\t\tvar o = window.options;\n\t\t\tgui.load(o.uniforms);\n\t\t\tglslCanvas.setUniforms(gui.uniforms());\n\t\t\terrors.classList.remove('active');\n\t\t\tif (options.uri) {\n\t\t\t\twelcome.classList.remove('active');\n\t\t\t} else {\n\t\t\t\twelcome.classList.add('active');\n\t\t\t}\n\t\t\tif (flags.pause) {\n\t\t\t\tglslCanvas.pause();\n\t\t\t} else {\n\t\t\t\tglslCanvas.play();\n\t\t\t}\n\t\t\tswapCanvas_(glslCanvas.canvas);\n\t\t}\n\n\t\tfunction resize(init) {\n\t\t\tvar w = content.offsetWidth;\n\t\t\tvar h = content.offsetHeight;\n\t\t\tcanvas.style.width = w + 'px';\n\t\t\tcanvas.style.height = h + 'px';\n\t\t}\n\n\t\tfunction snapshot() {\n\t\t\tglslCanvas.forceRender = true;\n\t\t\tglslCanvas.render();\n\t\t\treturn capture.snapshot();\n\t\t}\n\n\t\tfunction record() {\n\t\t\tglslCanvas.forceRender = true;\n\t\t\tglslCanvas.render();\n\t\t\tif (capture.record()) {\n\t\t\t\t// flags.record = true;\n\t\t\t}\n\t\t}\n\n\t\tfunction stop() {\n\t\t\tcapture.stop().then(function (video) {\n\t\t\t\tvar url = URL.createObjectURL(video.blob);\n\t\t\t\tvar link = document.createElement('a');\n\t\t\t\tlink.href = url;\n\t\t\t\tlink.download = 'shader' + video.extension;\n\t\t\t\tlink.click();\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\twindow.URL.revokeObjectURL(output);\n\t\t\t\t}, 100);\n\t\t\t});\n\t\t}\n\n\t\tfunction togglePause() {\n\t\t\tif (flags.pause) {\n\t\t\t\tflags.pause = false;\n\t\t\t\t/*\n\t\t\t\tif (glslCanvas.timePause) {\n\t\t\t\t    glslCanvas.timePrev = new Date();\n\t\t\t\t    glslCanvas.timeLoad += (glslCanvas.timePrev - glslCanvas.timePause);\n\t\t\t\t}\n\t\t\t\t*/\n\t\t\t\tglslCanvas.play();\n\t\t\t\tbuttons.pause.querySelector('i').setAttribute('class', 'icon-pause');\n\t\t\t} else {\n\t\t\t\tflags.pause = true;\n\t\t\t\tglslCanvas.pause();\n\t\t\t\t/*\n\t\t\t\tglslCanvas.timePause = new Date();\n\t\t\t\t*/\n\t\t\t\tbuttons.pause.querySelector('i').setAttribute('class', 'icon-play');\n\t\t\t}\n\t\t}\n\n\t\tfunction toggleRecord() {\n\t\t\tflags.record = !flags.record;\n\t\t\tif (flags.record) {\n\t\t\t\tbuttons.record.setAttribute('class', 'btn btn-record active');\n\t\t\t\tbuttons.record.querySelector('i').setAttribute('class', 'icon-stop');\n\t\t\t\trecord();\n\t\t\t} else {\n\t\t\t\tbuttons.record.setAttribute('class', 'btn btn-record');\n\t\t\t\tbuttons.record.querySelector('i').setAttribute('class', 'icon-record');\n\t\t\t\tstop();\n\t\t\t}\n\t\t}\n\n\t\tfunction toggleStats() {\n\t\t\tflags.stats = !flags.stats;\n\t\t\t/*\n            function statsTick() {\n                stats.update();\n                if (flags.stats) {\n                    requestAnimationFrame(statsTick);\n                }\n\t\t\t}\n\t\t\t*/\n\t\t\tif (flags.stats) {\n\t\t\t\tif (!statsdom) {\n\t\t\t\t\tstats = new Stats();\n\t\t\t\t\tstats.showPanel(0); // 0: fps, 1: ms, 2: mb, 3+: custom\n\t\t\t\t\tstatsdom = stats.dom;\n\t\t\t\t\tstatsdom.setAttribute('class', 'stats');\n\t\t\t\t\t// statsdom.style.cssText = 'position:fixed;top:0;right:0;cursor:pointer;opacity:0.9;z-index:10000';\n\t\t\t\t\tdocument.body.appendChild(stats.dom);\n\t\t\t\t} else {\n\t\t\t\t\tstatsdom.style.visibility = 'visible';\n\t\t\t\t}\n\t\t\t\t// requestAnimationFrame(statsTick);\n\t\t\t\tgui.show();\n\t\t\t\tbuttons.stats.setAttribute('class', 'btn btn-stats active');\n\t\t\t} else {\n\t\t\t\tremoveStats();\n\t\t\t}\n\t\t}\n\n\t\tfunction removeStats() {\n\t\t\tif (statsdom) {\n\t\t\t\tstatsdom.style.visibility = 'hidden';\n\t\t\t}\n\t\t\tgui.hide();\n\t\t\tbuttons.stats.setAttribute('class', 'btn btn-stats');\n\t\t\tflags.stats = false;\n\t\t}\n\n\t\tfunction onExport(e) {\n\t\t\t// console.log('app.onExport');\n\t\t\twindow.options.mode = glslCanvas.mode;\n\t\t\tvscode.postMessage({\n\t\t\t\tcommand: 'onExport',\n\t\t\t\tdata: JSON.stringify(window.options),\n\t\t\t});\n\t\t}\n\n\t\tfunction createShader(e) {\n\t\t\tvscode.postMessage({\n\t\t\t\tcommand: 'createShader',\n\t\t\t\tdata: null,\n\t\t\t});\n\t\t}\n\n\t\tfunction onMessage(event) {\n\t\t\twindow.options = JSON.parse(event.data);\n\t\t\t// console.log('window.options', window.options);\n\t\t\tvscode.setState(window.options);\n\t\t\tload();\n\t\t}\n\n\t\tvar ri;\n\t\tfunction onResize() {\n\t\t\tif (ri) {\n\t\t\t\tclearTimeout(ri);\n\t\t\t}\n\t\t\tri = setTimeout(resize, 50);\n\t\t}\n\n\t\tvar ui;\n\t\tfunction updateUniforms(e) {\n\t\t\tif (ui) {\n\t\t\t\tclearTimeout(ui);\n\t\t\t}\n\t\t\tui = setTimeout(function () {\n\t\t\t\tonUpdateUniforms();\n\t\t\t}, 1000 / 25);\n\t\t}\n\n\t\t/*\n\t\tfunction onDown(e) {\n\t\t\tvar min = Math.min(content.offsetWidth, content.offsetHeight);\n\t\t\tcamera.down(e.x / min, e.y / min);\n\t\t}\n\t\t*/\n\n\t\tfunction onMove(e) {\n\t\t\t// var min = Math.min(content.offsetWidth, content.offsetHeight);\n\t\t\t// camera.move(e.x / min, e.y / min);\n\t\t\ttrails.move(e.x, content.offsetHeight - e.y);\n\t\t}\n\n\t\t/*\n\t\tfunction onUp(e) {\n\t\t\tvar min = Math.min(content.offsetWidth, content.offsetHeight);\n\t\t\tcamera.up(e.x / min, e.y / min);\n\t\t}\n\t\t*/\n\n\t\t/*\n\t\tfunction onWheel(e) {\n\t\t\tcamera.wheel(e.wheelDelta / Math.abs(e.wheelDelta));\n\t\t}\n\t\t*/\n\n\t\tfunction swapCanvas_(canvas_) {\n\t\t\tif (canvas !== canvas_) {\n\t\t\t\tremoveCanvasListeners_();\n\t\t\t\tcanvas = canvas_;\n\t\t\t\taddCanvasListeners_();\n\t\t\t\tcapture.set(canvas);\n\t\t\t}\n\t\t}\n\n\t\tfunction setMode(mode) {\n\t\t\t// console.log('mode', mode);\n\t\t\tbuttons.mode.firstElementChild.setAttribute('class', 'icon-' + mode);\n\t\t\tflags.mode = mode;\n\t\t\tglslCanvas.setMode(mode);\n\t\t}\n\n\t\tfunction addCanvasListeners_() {\n\t\t\tcanvas.addEventListener('dblclick', togglePause);\n\t\t\t// canvas.addEventListener('mousedown', onDown);\n\t\t\tcanvas.addEventListener('mousemove', onMove);\n\t\t}\n\n\t\tfunction removeCanvasListeners_() {\n\t\t\tcanvas.removeEventListener('dblclick', togglePause);\n\t\t\t// canvas.removeEventListener('mousedown', onDown);\n\t\t\tcanvas.removeEventListener('mousemove', onMove);\n\t\t}\n\n\t\tfunction addListeners_() {\n\t\t\t// window.addEventListener('mouseup', onUp);\n\t\t\t// window.addEventListener('wheel', onWheel);\n\t\t\tbuttons.pause.addEventListener('mousedown', togglePause);\n\t\t\tbuttons.record.addEventListener('mousedown', toggleRecord);\n\t\t\tbuttons.stats.addEventListener('mousedown', toggleStats);\n\t\t\tbuttons.export.addEventListener('mousedown', onExport);\n\t\t\tbuttons.create.addEventListener('click', createShader);\n\t\t\tbuttons.mode.addEventListener('mouseenter', function () {\n\t\t\t\tbuttons.mode.classList.add('hover');\n\t\t\t});\n\t\t\tbuttons.mode.addEventListener('mouseleave', function () {\n\t\t\t\tbuttons.mode.classList.remove('hover');\n\t\t\t});\n\t\t\tmodes.forEach(function (node) {\n\t\t\t\tnode.addEventListener('mousedown', function () {\n\t\t\t\t\tmodes.forEach(function (x) {\n\t\t\t\t\t\tx === node ? x.classList.add('active') : x.classList.remove('active');\n\t\t\t\t\t});\n\t\t\t\t\tvar value = node.getAttribute('value');\n\t\t\t\t\tsetMode(value);\n\t\t\t\t})\n\t\t\t});\n\t\t\twindow.addEventListener('message', onMessage, false);\n\t\t\twindow.addEventListener('resize', onResize);\n\t\t\terrors.addEventListener('click', function () {\n\t\t\t\tclearDiagnostic();\n\t\t\t});\n\t\t\taddCanvasListeners_();\n\t\t}\n\n\t\taddListeners_();\n\t\tresize();\n\t\tvscode.setState(options);\n\t}\n\n\tfunction clearDiagnostic() {\n\t\tvscode.postMessage({\n\t\t\tcommand: 'clearDiagnostic',\n\t\t\tdata: null,\n\t\t});\n\t}\n\n\tfunction revealGlslLine(data) {\n\t\tvscode.postMessage({\n\t\t\tcommand: 'revealGlslLine',\n\t\t\tdata: JSON.stringify(data),\n\t\t});\n\t}\n\n\tfunction onGlslError(message) {\n\t\t// console.log('onGlslError', message);\n\t\tvar options = window.options\n\t\tvar errors = document.querySelector('.errors');\n\t\tvar errorLines = [],\n\t\t\twarningLines = [],\n\t\t\tlines = [];\n\t\tmessage.error.replace(/ERROR: \\d+:(\\d+): \\'(.+)\\' : (.+)/g, function (m, l, v, t) {\n\t\t\tl = Number(l) - message.offset;\n\t\t\tvar li = '<li><span class=\"error\" unselectable reveal-line=\"' + lines.length + '\"><span class=\"line\">ERROR line ' + l + '</span> <span class=\"value\" title=\"' + v + '\">' + v + '</span> <span class=\"text\" title=\"' + t + '\">' + t + '</span></span></li>';\n\t\t\terrorLines.push(li);\n\t\t\tlines.push([options.uri, l, 'ERROR (' + v + ') ' + t]);\n\t\t\treturn li;\n\t\t});\n\t\tmessage.error.replace(/WARNING: \\d+:(\\d+): \\'(.*\\n*|.*|\\n*)\\' : (.+)/g, function (m, l, v, t) {\n\t\t\tl = Number(l) - message.offset;\n\t\t\tvar li = '<li><span class=\"warning\" unselectable reveal-line=\"' + lines.length + '\"><span class=\"line\">WARN line ' + l + '</span> <span class=\"text\" title=\"' + t + '\">' + t + '</span></span></li>';\n\t\t\twarningLines.push(li);\n\t\t\tlines.push([options.uri, l, 'ERROR (' + v + ') ' + t]);\n\t\t\treturn li;\n\t\t});\n\t\tvar output = '<div class=\"errors-content\"><div class=\"title\">glsl-canvas error</div><ul>';\n\t\toutput += errorLines.join('\\n');\n\t\toutput += warningLines.join('\\n');\n\t\toutput += '</ul></div>';\n\t\terrors.innerHTML = output;\n\t\terrors.classList.add('active');\n\t\t// console.log('onGlslError', 'errorLines', errorLines, 'warningLines', warningLines);\n\t\t[].slice.call(document.querySelectorAll('.errors [reveal-line]')).forEach(function (node) {\n\t\t\tvar index = parseInt(node.getAttribute('reveal-line'));\n\t\t\tnode.addEventListener('click', function (event) {\n\t\t\t\trevealGlslLine(lines[index]);\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t});\n\t\t});\n\t\tdocument.querySelector('body').setAttribute('class', 'idle');\n\t\t/*\n\t\tvar body = document.querySelector('body');\n\t\tbody.classList.remove('ready', 'empty');\n\t\tbody.classList.add('idle');\n\t\t*/\n\t}\n\n\tfunction onGlslTextureError(error) {\n\t\t// console.log('onGlslTextureError', error);\n\t\tvscode.postMessage({\n\t\t\tcommand: 'textureError',\n\t\t\tdata: JSON.stringify(error),\n\t\t});\n\t}\n\n\tfunction onGlslLoadError(error) {\n\t\tvscode.postMessage({\n\t\t\tcommand: 'loadError',\n\t\t\tdata: JSON.stringify({ message: String(error) }),\n\t\t});\n\t}\n\n\twindow.addEventListener('load', onLoad);\n\n}());\n"]}