!function(){"use strict";var t=function(){function t(t,n,e){this.x=t||0,this.y=n||0,this.z=e||0}return t.prototype={negative:function(){return new t(-this.x,-this.y,-this.z)},add:function(n){return n instanceof t?new t(this.x+n.x,this.y+n.y,this.z+n.z):new t(this.x+n,this.y+n,this.z+n)},subtract:function(n){return n instanceof t?new t(this.x-n.x,this.y-n.y,this.z-n.z):new t(this.x-n,this.y-n,this.z-n)},multiply:function(n){return n instanceof t?new t(this.x*n.x,this.y*n.y,this.z*n.z):new t(this.x*n,this.y*n,this.z*n)},divide:function(n){return n instanceof t?new t(this.x/n.x,this.y/n.y,this.z/n.z):new t(this.x/n,this.y/n,this.z/n)},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},cross:function(n){return new t(this.y*n.z-this.z*n.y,this.z*n.x-this.x*n.z,this.x*n.y-this.y*n.x)},length:function(){return Math.sqrt(this.dot(this))},unit:function(){return this.divide(this.length())},min:function(){return Math.min(Math.min(this.x,this.y),this.z)},max:function(){return Math.max(Math.max(this.x,this.y),this.z)},toAngles:function(){return{theta:Math.atan2(this.z,this.x),phi:Math.asin(this.y/this.length())}},angleTo:function(t){return Math.acos(this.dot(t)/(this.length()*t.length()))},toArray:function(t){return[this.x,this.y,this.z].slice(0,t||3)},clone:function(){return new t(this.x,this.y,this.z)},init:function(t,n,e){return this.x=t,this.y=n,this.z=e,this}},t.negative=function(t,n){return n.x=-t.x,n.y=-t.y,n.z=-t.z,n},t.add=function(n,e,i){return e instanceof t?(i.x=n.x+e.x,i.y=n.y+e.y,i.z=n.z+e.z):(i.x=n.x+e,i.y=n.y+e,i.z=n.z+e),i},t.subtract=function(n,e,i){return e instanceof t?(i.x=n.x-e.x,i.y=n.y-e.y,i.z=n.z-e.z):(i.x=n.x-e,i.y=n.y-e,i.z=n.z-e),i},t.multiply=function(n,e,i){return e instanceof t?(i.x=n.x*e.x,i.y=n.y*e.y,i.z=n.z*e.z):(i.x=n.x*e,i.y=n.y*e,i.z=n.z*e),i},t.divide=function(n,e,i){return e instanceof t?(i.x=n.x/e.x,i.y=n.y/e.y,i.z=n.z/e.z):(i.x=n.x/e,i.y=n.y/e,i.z=n.z/e),i},t.cross=function(t,n,e){return e.x=t.y*n.z-t.z*n.y,e.y=t.z*n.x-t.x*n.z,e.z=t.x*n.y-t.y*n.x,e},t.unit=function(t,n){var e=t.length();return n.x=t.x/e,n.y=t.y/e,n.z=t.z/e,n},t.fromAngles=function(n,e){return new t(Math.cos(n)*Math.cos(e),Math.sin(e),Math.sin(n)*Math.cos(e))},t.randomDirection=function(){return t.fromAngles(Math.random()*Math.PI*2,Math.asin(2*Math.random()-1))},t.min=function(n,e){return new t(Math.min(n.x,e.x),Math.min(n.y,e.y),Math.min(n.z,e.z))},t.max=function(n,e){return new t(Math.max(n.x,e.x),Math.max(n.y,e.y),Math.max(n.z,e.z))},t.lerp=function(t,n,e){return n.subtract(t).multiply(e).add(t)},t.fromArray=function(n){return new t(n[0],n[1],n[2])},t.angleBetween=function(t,n){return t.angleTo(n)},t}();window.Vector=t}(),function(){"use strict";var t=function(){var t=Math.PI/180;function n(n,e,i){var r=this;r.theta=(n||45)*t,r.phi=(e||45)*t,r.radius=i||1}return n.prototype={down:function(t,n){this.mouse={x:t,y:n}},move:function(n,e){var i=this,r=i.mouse;if(r){var a=180*(n-r.x)*t,o=180*(r.y-e)*t;r.x=n,r.y=e,i.theta+=a,i.phi+=o}},up:function(t,n){this.mouse=null},wheel:function(t){this.radius=Math.max(.01,this.radius+.02*t)},render:function(t){var e=n.toVector(this),i=new Float32Array([e.x,e.y,e.z]);this.update(t,"3fv","vec3","u_camera",i)},update:function(t,n,e,i,r){try{var a=t.uniforms[i]=t.uniforms[i]||{};a.name=i,a.value=r,a.type=e,a.method="uniform"+n,a.location=t.gl.getUniformLocation(t.program,i),t.gl[a.method].apply(t.gl,[a.location].concat(a.value))}catch(t){console.log("fastUpdate",t)}}},n.fromVector=function(t){var e=t.length(),i=Math.acos(t.y/e),r=Math.atan(t.x/t.z);return new n(i,r,e)},n.toVector=function(t){var n=Math.sin(t.phi)*t.radius,e=n*Math.sin(t.theta),i=Math.cos(t.phi)*t.radius,r=n*Math.cos(t.theta);return new Vector(e,i,r)},n}();window.CameraService=t}(),function(){"use strict";var t=function(){function t(){var t=this;t.mouse=new Float32Array([0,0]),t.history=[],t.trails=new Array(10).fill(null).map((function(){return new Float32Array([0,0])}))}t.prototype={render:function(t){var n=this,e=n.trails,i=n.history,r=n.mouse,a=0,o=e.length,s=i.length?i[0]:r;for(;a<o;){var u=a>0?e[a-1]:s,h=e[a],c=1/(5+a);h[0]+=(u[0]-h[0])*c,h[1]+=(u[1]-h[1])*c,n.update(t,"2fv","vec2","u_trails["+a+"]",h),a++}i.length&&i.shift()},move:function(t,n){var e=this.mouse;e[0]=t,e[1]=n,this.push()},push:function(t,e,i){var r,a,o,s=null,u=0;i||(i={});var h=function(){u=!1===i.leading?0:n(),s=null,o=t.apply(r,a),s||(r=a=null)};return function(){var c=n();u||!1!==i.leading||(u=c);var f=e-(c-u);return r=this,a=arguments,f<=0||f>e?(s&&(clearTimeout(s),s=null),u=c,o=t.apply(r,a),s||(r=a=null)):s||!1===i.trailing||(s=setTimeout(h,f)),o}}((function(){this.history.push(new Float32Array(this.mouse))}),1e3/60),update:function(t,n,e,i,r){try{var a=t.uniforms[i]=t.uniforms[i]||{};a.name=i,a.value=r,a.type=e,a.method="uniform"+n,a.location=t.gl.getUniformLocation(t.program,i),t.gl[a.method].apply(t.gl,[a.location].concat(a.value))}catch(t){console.log("fastUpdate",t)}}};var n=Date.now||function(){return(new Date).getTime()};return t}();window.TrailsService=t}(),function(){"use strict";var t,n=new CameraService,e=new TrailsService;function i(t,n){var e=new XMLHttpRequest;e.open("GET",t,!0),e.addEventListener("load",(function(){n(e.responseText)})),e.send()}t="",i("playgrounds/lib.glsl",(function(r){t=r,i("playgrounds/"+(function(t){if(""==t)return{};for(var n={},e=0;e<t.length;++e){var i=t[e].split("=",2);1==i.length?n[i[0]]="":n[i[0]]=decodeURIComponent(i[1].replace(/\+/g," "))}return n}(window.location.search.substr(1).split("&")).glsl||"main")+".glsl",(function(i){var r=document.querySelector(".editor");r.innerHTML=i;var a=new GlslEditor(r,{canvas_size:400,canvas_draggable:!0,fileDrops:!1,frag_header:t,menu:!1,multipleBuffers:!1,theme:"monokai",watchHash:!1}),o=a.shader.canvas;o.on("render",(function(){e.render(o),n.render(o),o.forceRender=!0})),o.on("load",(function(){o.uniformTexture("u_texture_0","https://rawgit.com/actarian/plausible-brdf-shader/master/textures/noise/cloud-1.png",{filtering:"mipmap",repeat:!0})})),o.canvas.addEventListener("mousedown",(function(t){var e=Math.min(o.canvas.offsetWidth,o.canvas.offsetHeight);n.down(t.x/e,t.y/e)})),o.canvas.addEventListener("mousemove",(function(t){var i=Math.min(o.canvas.offsetWidth,o.canvas.offsetHeight);n.move(t.x/i,t.y/i),e.move(t.x,o.canvas.offsetHeight-t.y)})),window.addEventListener("mouseup",(function(t){var e=Math.min(o.canvas.offsetWidth,o.canvas.offsetHeight);n.up(t.x/e,t.y/e)})),window.addEventListener("mousewheel",(function(t){n.wheel(t.wheelDelta/Math.abs(t.wheelDelta))})),o.canvas.addEventListener("mousemove",(function(t){e.move(t.x-a.shader.el.offsetLeft,a.shader.el.offsetTop+a.shader.el.offsetHeight-t.y)}))}))}))}();
//# sourceMappingURL=docs.min.js.map